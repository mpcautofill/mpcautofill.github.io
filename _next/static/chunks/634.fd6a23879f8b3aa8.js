try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5462821e-76ca-4435-ad89-bb683bb3924a",e._sentryDebugIdIdentifier="sentry-dbid-5462821e-76ca-4435-ad89-bb683bb3924a")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{79742:function(e,t){"use strict";for(var r=[],n=[],o=("undefined"!=typeof Uint8Array&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i=0,a=o.length;i<a;++i)r[i]=o[i],n[o.charCodeAt(i)]=i;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},83454:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(77663)},77663:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l=[],u=!1,c=-1;function f(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=s(f);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||u||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete r[e]}return i.exports}n.ab="//";var o=n(229);e.exports=o}()},37666:function(e,t,r){"use strict";var n=r(67294),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,c){var f=a(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;var h=i(e,(f=l(function(){function e(e){if(!s){if(s=!0,i=e,e=n(e),void 0!==c&&d.hasValue){var t=d.value;if(c(t,e))return a=t}return a=e}if(t=a,o(i,e))return t;var r=n(e);return void 0!==c&&c(t,r)?(i=e,t):(i=e,a=r)}var i,a,s=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,c]))[0],f[1]);return s(function(){d.hasValue=!0,d.value=h},[h]),u(h),h}},31103:function(e,t,r){"use strict";e.exports=r(37666)},55679:function(e,t,r){"use strict";r.d(t,{Ue:function(){return to},pW:function(){return ti},eB:function(){return td},yC:function(){return tD}});let n={arabic:"ar",armenian:"am",bulgarian:"bg",czech:"cz",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},o={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim,czech:/[^A-Z0-9a-zěščřžýáíéúůóťďĚŠČŘŽÝÁÍÉÓÚŮŤĎ-]+/gim},i=Object.keys(n);var a=r(83454);let s=Date.now().toString().slice(5),l=0,u=BigInt(1e3),c=BigInt(1e6),f=BigInt(1e9);function d(e,t){if(t.length<65535)Array.prototype.push.apply(e,t);else{let r=t.length;for(let n=0;n<r;n+=65535)Array.prototype.push.apply(e,t.slice(n,n+65535))}}function h(){return BigInt(Math.floor(1e6*performance.now()))}function p(e){return("number"==typeof e&&(e=BigInt(e)),e<u)?`${e}ns`:e<c?`${e/u}μs`:e<f?`${e/c}ms`:`${e/f}s`}function g(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?h():void 0!==a&&a.release&&"node"===a.release.name||void 0!==a&&"function"==typeof a?.hrtime?.bigint?a.hrtime.bigint():"undefined"!=typeof performance?h():BigInt(0)}function m(){return`${s}-${l++}`}function y(e,t){return void 0===Object.hasOwn?Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0:Object.hasOwn(e,t)?e[t]:void 0}function b(e,t){return t[1]===e[1]?e[0]-t[0]:t[1]-e[1]}function _(e,t){let r={},n=t.length;for(let o=0;o<n;o++){let n=t[o],i=n.split("."),a=e,s=i.length;for(let e=0;e<s;e++)if("object"==typeof(a=a[i[e]])){if(null!==a&&"lat"in a&&"lon"in a&&"number"==typeof a.lat&&"number"==typeof a.lon){a=r[n]=a;break}if(!Array.isArray(a)&&null!==a&&e===s-1){a=void 0;break}}else if((null===a||"object"!=typeof a)&&e<s-1){a=void 0;break}void 0!==a&&(r[n]=a)}return r}function w(e,t){return _(e,[t])[t]}let S={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function v(e,t){let r=S[t];if(void 0===r)throw Error(R("INVALID_DISTANCE_SUFFIX",e).message);return e*r}function I(e,t){e.hits=e.hits.map(e=>({...e,document:{...e.document,...t.reduce((e,t)=>{let r=t.split("."),n=r.pop(),o=e;for(let e of r)o[e]=o[e]??{},o=o[e];return o[n]=null,e},e.document)}}))}function O(e){return Array.isArray(e)?e.some(e=>O(e)):e?.constructor?.name==="AsyncFunction"}let T="intersection"in new Set;function E(...e){if(0===e.length)return new Set;if(1===e.length)return e[0];if(2===e.length){let t=e[0],r=e[1];if(T)return t.intersection(r);let n=new Set,o=t.size<r.size?t:r,i=o===t?r:t;for(let e of o)i.has(e)&&n.add(e);return n}let t={index:0,size:e[0].size};for(let r=1;r<e.length;r++)e[r].size<t.size&&(t.index=r,t.size=e[r].size);if(T){let r=e[t.index];for(let n=0;n<e.length;n++)n!==t.index&&(r=r.intersection(e[n]));return r}let r=e[t.index];for(let n=0;n<e.length;n++){if(n===t.index)continue;let o=e[n];for(let e of r)o.has(e)||r.delete(e)}return r}let N="union"in new Set;function D(e,t){return N?e?e.union(t):t:new Set(e?[...e,...t]:t)}function A(e){if("undefined"!=typeof SharedArrayBuffer&&"undefined"!=typeof Atomics){let t=new Int32Array(new SharedArrayBuffer(4));if(!1==(e>0&&e<1/0)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}Atomics.wait(t,0,0,Number(e))}else{if(!1==(e>0&&e<1/0)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}let t=Date.now()+Number(e);for(;t>Date.now(););}}let P=i.join("\n - "),k={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${P}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.orama.com/docs/orama-js/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.orama.com/docs/orama-js for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',UNKNOWN_VECTOR_PROPERTY:'Unknown vector property "%s". Make sure the property exists in the schema and is configured as a vector.',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:'Facet doens\'t support the type "%s".',INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.
Please install it before proceeding with creating an answer session.
Read more at https://docs.orama.com/docs/orama-js/plugins/plugin-secure-proxy#plugin-secure-proxy
`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.
Please provide a chat model before proceeding with creating an answer session.
Read more at https://docs.orama.com/docs/orama-js/plugins/plugin-secure-proxy#plugin-secure-proxy
`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.",PLUGIN_COMPONENT_CONFLICT:'The component "%s" is already defined. The plugin "%s" is trying to redefine it.'};function R(e,...t){let r=Error(function(e,...t){return e.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...e){let{width:r,type:n,position:o}=e[e.length-1],i=o?t[Number.parseInt(o)-1]:t.shift(),a=""===r?0:Number.parseInt(r);switch(n){case"d":return i.toString().padStart(a,"0");case"f":{let e=i,[t,n]=r.split(".").map(e=>Number.parseFloat(e));return"number"==typeof n&&n>=0&&(e=e.toFixed(n)),"number"==typeof t&&t>=0?e.toString().padStart(a,"0"):e.toString()}case"s":return a<0?i.toString().padEnd(-a," "):i.toString().padStart(a," ");default:return i}})}(k[e]??`Unsupported Orama Error code: ${e}`,...t));return r.code=e,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(r),r}function x(e){return{raw:Number(e),formatted:p(e)}}function M(e){if(e.id){if("string"!=typeof e.id)throw R("DOCUMENT_ID_MUST_BE_STRING",typeof e.id);return e.id}return m()}let C={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},U={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function z(e){return"string"==typeof e&&/^vector\[\d+\]$/.test(e)}function L(e){return"string"==typeof e&&C[e]}function j(e){let t=Number(e.slice(7,-1));switch(!0){case isNaN(t):throw R("INVALID_VECTOR_VALUE",e);case t<=0:throw R("INVALID_VECTOR_SIZE",e);default:return t}}function B(e){return{internalIdToId:e.internalIdToId}}function V(e,t){let{internalIdToId:r}=t;e.internalDocumentIDStore.idToInternalId.clear(),e.internalDocumentIDStore.internalIdToId=[];let n=r.length;for(let t=0;t<n;t++){let n=r[t];e.internalDocumentIDStore.idToInternalId.set(n,t+1),e.internalDocumentIDStore.internalIdToId.push(n)}}function W(e,t){if("string"==typeof t){let r=e.idToInternalId.get(t);if(r)return r;let n=e.idToInternalId.size+1;return e.idToInternalId.set(t,n),e.internalIdToId.push(t),n}return t>e.internalIdToId.length?W(e,t.toString()):t}function F(e,t){if(e.internalIdToId.length<t)throw Error(`Invalid internalId ${t}`);return e.internalIdToId[t-1]}function $(e,t){return{sharedInternalDocumentStore:t,docs:{},count:0}}function G(e,t){let r=W(e.sharedInternalDocumentStore,t);return e.docs[r]}function J(e,t){let r=t.length,n=Array.from({length:r});for(let o=0;o<r;o++){let r=W(e.sharedInternalDocumentStore,t[o]);n[o]=e.docs[r]}return n}function Y(e){return e.docs}function K(e,t,r,n){return void 0===e.docs[r]&&(e.docs[r]=n,e.count++,!0)}function H(e,t){let r=W(e.sharedInternalDocumentStore,t);return void 0!==e.docs[r]&&(delete e.docs[r],e.count--,!0)}function X(e){return e.count}function q(e,t){return{docs:t.docs,count:t.count,sharedInternalDocumentStore:e}}function Z(e){return{docs:e.docs,count:e.count}}let Q=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeUpsert","afterUpsert","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeUpsertMultiple","afterUpsertMultiple","beforeLoad","afterLoad","afterCreate"],ee=["tokenizer","index","documentsStore","sorter","pinning"],et=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];function er(e,t,r,n){if(e.some(O))return(async()=>{for(let o of e)await o(t,r,n)})();for(let o of e)o(t,r,n)}function en(e,t,r){if(e.some(O))return(async()=>{for(let n of e)await n(t,r)})();for(let n of e)n(t,r)}function eo(e,t,r,n,o){if(e.some(O))return(async()=>{for(let i of e)await i(t,r,n,o)})();for(let i of e)i(t,r,n,o)}function ei(e,t,r,n){if(e.some(O))return(async()=>{for(let o of e)await o(t,r,n)})();for(let o of e)o(t,r,n)}class ea{k;v;l=null;r=null;h=1;constructor(e,t){this.k=e,this.v=new Set(t)}updateHeight(){this.h=Math.max(ea.getHeight(this.l),ea.getHeight(this.r))+1}static getHeight(e){return e?e.h:0}getBalanceFactor(){return ea.getHeight(this.l)-ea.getHeight(this.r)}rotateLeft(){let e=this.r;return this.r=e.l,e.l=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.l;return this.l=e.r,e.r=this,this.updateHeight(),e.updateHeight(),e}toJSON(){return{k:this.k,v:Array.from(this.v),l:this.l?this.l.toJSON():null,r:this.r?this.r.toJSON():null,h:this.h}}static fromJSON(e){let t=new ea(e.k,e.v);return t.l=e.l?ea.fromJSON(e.l):null,t.r=e.r?ea.fromJSON(e.r):null,t.h=e.h,t}}class es{root=null;insertCount=0;constructor(e,t){void 0!==e&&void 0!==t&&(this.root=new ea(e,t))}insert(e,t,r=1e3){this.root=this.insertNode(this.root,e,t,r)}insertMultiple(e,t,r=1e3){for(let n of t)this.insert(e,n,r)}rebalance(){this.root&&(this.root=this.rebalanceNode(this.root))}toJSON(){return{root:this.root?this.root.toJSON():null,insertCount:this.insertCount}}static fromJSON(e){let t=new es;return t.root=e.root?ea.fromJSON(e.root):null,t.insertCount=e.insertCount||0,t}insertNode(e,t,r,n){if(null===e)return new ea(t,[r]);let o=[],i=e,a=null;for(;null!==i;)if(o.push({parent:a,node:i}),t<i.k){if(null===i.l){i.l=new ea(t,[r]),o.push({parent:i,node:i.l});break}a=i,i=i.l}else{if(!(t>i.k))return i.v.add(r),e;if(null===i.r){i.r=new ea(t,[r]),o.push({parent:i,node:i.r});break}a=i,i=i.r}let s=!1;this.insertCount++%n==0&&(s=!0);for(let t=o.length-1;t>=0;t--){let{parent:r,node:n}=o[t];if(n.updateHeight(),s){let t=this.rebalanceNode(n);r?r.l===n?r.l=t:r.r===n&&(r.r=t):e=t}}return e}rebalanceNode(e){let t=e.getBalanceFactor();if(t>1){if(e.l&&e.l.getBalanceFactor()>=0)return e.rotateRight();if(e.l)return e.l=e.l.rotateLeft(),e.rotateRight()}if(t<-1){if(e.r&&0>=e.r.getBalanceFactor())return e.rotateLeft();if(e.r)return e.r=e.r.rotateRight(),e.rotateLeft()}return e}find(e){let t=this.findNodeByKey(e);return t?t.v:null}contains(e){return null!==this.find(e)}getSize(){let e=0,t=[],r=this.root;for(;r||t.length>0;){for(;r;)t.push(r),r=r.l;r=t.pop(),e++,r=r.r}return e}isBalanced(){if(!this.root)return!0;let e=[this.root];for(;e.length>0;){let t=e.pop();if(Math.abs(t.getBalanceFactor())>1)return!1;t.l&&e.push(t.l),t.r&&e.push(t.r)}return!0}remove(e){this.root=this.removeNode(this.root,e)}removeDocument(e,t){let r=this.findNodeByKey(e);r&&(1===r.v.size?this.root=this.removeNode(this.root,e):r.v=new Set([...r.v.values()].filter(e=>e!==t)))}findNodeByKey(e){let t=this.root;for(;t;)if(e<t.k)t=t.l;else{if(!(e>t.k))return t;t=t.r}return null}removeNode(e,t){if(null===e)return null;let r=[],n=e;for(;null!==n&&n.k!==t;)r.push(n),n=t<n.k?n.l:n.r;if(null===n)return e;if(null===n.l||null===n.r){let t=n.l?n.l:n.r;if(0===r.length)e=t;else{let e=r[r.length-1];e.l===n?e.l=t:e.r=t}}else{let e=n,t=n.r;for(;null!==t.l;)e=t,t=t.l;n.k=t.k,n.v=t.v,e.l===t?e.l=t.r:e.r=t.r,n=e}r.push(n);for(let t=r.length-1;t>=0;t--){let n=r[t];n.updateHeight();let o=this.rebalanceNode(n);if(t>0){let e=r[t-1];e.l===n?e.l=o:e.r===n&&(e.r=o)}else e=o}return e}rangeSearch(e,t){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.l;if((o=n.pop()).k>=e&&o.k<=t)for(let e of o.v)r.add(e);if(o.k>t)break;o=o.r}return r}greaterThan(e,t=!1){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.r;if(o=n.pop(),t&&o.k>=e||!t&&o.k>e)for(let e of o.v)r.add(e);else if(o.k<=e)break;o=o.l}return r}lessThan(e,t=!1){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.l;if(o=n.pop(),t&&o.k<=e||!t&&o.k<e)for(let e of o.v)r.add(e);else if(o.k>e)break;o=o.r}return r}}class el{numberToDocumentId;constructor(){this.numberToDocumentId=new Map}insert(e,t){this.numberToDocumentId.has(e)?this.numberToDocumentId.get(e).add(t):this.numberToDocumentId.set(e,new Set([t]))}find(e){let t=this.numberToDocumentId.get(e);return t?Array.from(t):null}remove(e){this.numberToDocumentId.delete(e)}removeDocument(e,t){let r=this.numberToDocumentId.get(t);r&&(r.delete(e),0===r.size&&this.numberToDocumentId.delete(t))}contains(e){return this.numberToDocumentId.has(e)}getSize(){let e=0;for(let t of this.numberToDocumentId.values())e+=t.size;return e}filter(e){let t=Object.keys(e);if(1!==t.length)throw Error("Invalid operation");let r=t[0];switch(r){case"eq":{let t=e[r],n=this.numberToDocumentId.get(t);return n?Array.from(n):[]}case"in":{let t=e[r],n=new Set;for(let e of t){let t=this.numberToDocumentId.get(e);if(t)for(let e of t)n.add(e)}return Array.from(n)}case"nin":{let t=new Set(e[r]),n=new Set;for(let[e,r]of this.numberToDocumentId.entries())if(!t.has(e))for(let e of r)n.add(e);return Array.from(n)}default:throw Error("Invalid operation")}}filterArr(e){let t=Object.keys(e);if(1!==t.length)throw Error("Invalid operation");let r=t[0];switch(r){case"containsAll":{let t=e[r].map(e=>this.numberToDocumentId.get(e)??new Set);if(0===t.length)return[];return Array.from(t.reduce((e,t)=>new Set([...e].filter(e=>t.has(e)))))}case"containsAny":{let t=e[r].map(e=>this.numberToDocumentId.get(e)??new Set);if(0===t.length)return[];return Array.from(t.reduce((e,t)=>new Set([...e,...t])))}default:throw Error("Invalid operation")}}static fromJSON(e){if(!e.numberToDocumentId)throw Error("Invalid Flat Tree JSON");let t=new el;for(let[r,n]of e.numberToDocumentId)t.numberToDocumentId.set(r,new Set(n));return t}toJSON(){return{numberToDocumentId:Array.from(this.numberToDocumentId.entries()).map(([e,t])=>[e,Array.from(t)])}}}function eu(e,t,r){let n=function(e,t,r){if(r<0)return -1;if(e===t)return 0;let n=e.length,o=t.length;if(0===n)return o<=r?o:-1;if(0===o)return n<=r?n:-1;let i=Math.abs(n-o);if(e.startsWith(t))return i<=r?i:-1;if(t.startsWith(e))return 0;if(i>r)return -1;let a=[];for(let e=0;e<=n;e++){a[e]=[e];for(let t=1;t<=o;t++)a[e][t]=0===e?t:0}for(let i=1;i<=n;i++){let n=1/0;for(let r=1;r<=o;r++)e[i-1]===t[r-1]?a[i][r]=a[i-1][r-1]:a[i][r]=Math.min(a[i-1][r]+1,a[i][r-1]+1,a[i-1][r-1]+1),n=Math.min(n,a[i][r]);if(n>r)return -1}return a[n][o]<=r?a[n][o]:-1}(e,t,r);return{distance:n,isBounded:n>=0}}class ec{k;s;c=new Map;d=new Set;e;w="";constructor(e,t,r){this.k=e,this.s=t,this.e=r}updateParent(e){this.w=e.w+this.s}addDocument(e){this.d.add(e)}removeDocument(e){return this.d.delete(e)}findAllWords(e,t,r,n){let o=[this];for(;o.length>0;){let i=o.pop();if(i.e){let{w:o,d:a}=i;if(r&&o!==t)continue;if(null!==y(e,o)){if(n){if(!(Math.abs(t.length-o.length)<=n)||!eu(t,o,n).isBounded)continue;e[o]=[]}else e[o]=[]}if(null!=y(e,o)&&a.size>0){let t=e[o];for(let e of a)t.includes(e)||t.push(e)}}i.c.size>0&&o.push(...i.c.values())}return e}insert(e,t){let r=this,n=0,o=e.length;for(;n<o;){let i=e[n],a=r.c.get(i);if(a){let i=a.s,s=i.length,l=0;for(;l<s&&n+l<o&&i[l]===e[n+l];)l++;if(l===s){if(r=a,(n+=l)===o){a.e||(a.e=!0),a.addDocument(t);return}continue}let u=i.slice(0,l),c=i.slice(l),f=e.slice(n+l),d=new ec(u[0],u,!1);if(r.c.set(u[0],d),d.updateParent(r),a.s=c,a.k=c[0],d.c.set(c[0],a),a.updateParent(d),f){let e=new ec(f[0],f,!0);e.addDocument(t),d.c.set(f[0],e),e.updateParent(d)}else d.e=!0,d.addDocument(t);return}{let o=new ec(i,e.slice(n),!0);o.addDocument(t),r.c.set(i,o),o.updateParent(r);return}}r.e||(r.e=!0),r.addDocument(t)}_findLevenshtein(e,t,r,n,o){let i=[{node:this,index:t,tolerance:r}];for(;i.length>0;){let{node:t,index:r,tolerance:a}=i.pop();if(t.w.startsWith(e)){t.findAllWords(o,e,!1,0);continue}if(a<0)continue;if(t.e){let{w:r,d:i}=t;if(r&&(eu(e,r,n).isBounded&&(o[r]=[]),void 0!==y(o,r)&&i.size>0)){let e=new Set(o[r]);for(let t of i)e.add(t);o[r]=Array.from(e)}}if(r>=e.length)continue;let s=e[r];if(t.c.has(s)){let e=t.c.get(s);i.push({node:e,index:r+1,tolerance:a})}for(let[e,n]of(i.push({node:t,index:r+1,tolerance:a-1}),t.c))i.push({node:n,index:r,tolerance:a-1}),e!==s&&i.push({node:n,index:r+1,tolerance:a-1})}}find(e){let{term:t,exact:r,tolerance:n}=e;if(n&&!r){let e={};return this._findLevenshtein(t,0,n,n,e),e}{let e=this,o=0,i=t.length;for(;o<i;){let a=t[o],s=e.c.get(a);if(!s)return{};{let a=s.s,l=a.length,u=0;for(;u<l&&o+u<i&&a[u]===t[o+u];)u++;if(u===l)e=s,o+=u;else{if(o+u!==i||u!==i-o||r)return{};{let e={};return s.findAllWords(e,t,r,n),e}}}}let a={};return e.findAllWords(a,t,r,n),a}}contains(e){let t=this,r=0,n=e.length;for(;r<n;){let o=e[r],i=t.c.get(o);if(!i)return!1;{let o=i.s,a=o.length,s=0;for(;s<a&&r+s<n&&o[s]===e[r+s];)s++;if(s<a)return!1;r+=a,t=i}}return!0}removeWord(e){if(!e)return!1;let t=this,r=e.length,n=[];for(let o=0;o<r;o++){let r=e[o];if(!t.c.has(r))return!1;{let e=t.c.get(r);n.push({parent:t,character:r}),o+=e.s.length-1,t=e}}for(t.d.clear(),t.e=!1;n.length>0&&0===t.c.size&&!t.e&&0===t.d.size;){let{parent:e,character:r}=n.pop();e.c.delete(r),t=e}return!0}removeDocumentByWord(e,t,r=!0){if(!e)return!0;let n=this,o=e.length;for(let i=0;i<o;i++){let o=e[i];if(!n.c.has(o))return!1;{let a=n.c.get(o);i+=a.s.length-1,n=a,r&&n.w!==e||n.removeDocument(t)}}return!0}static getCommonPrefix(e,t){let r=Math.min(e.length,t.length),n=0;for(;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)n++;return e.slice(0,n)}toJSON(){return{w:this.w,s:this.s,e:this.e,k:this.k,d:Array.from(this.d),c:Array.from(this.c?.entries())?.map(([e,t])=>[e,t.toJSON()])}}static fromJSON(e){let t=new ec(e.k,e.s,e.e);return t.w=e.w,t.d=new Set(e.d),t.c=new Map(e?.c?.map(([e,t])=>[e,ec.fromJSON(t)])||[]),t}}class ef extends ec{constructor(){super("","",!1)}static fromJSON(e){let t=new ef;return t.w=e.w,t.s=e.s,t.e=e.e,t.k=e.k,t.d=new Set(e.d),t.c=new Map(e?.c?.map(([e,t])=>[e,ec.fromJSON(t)])||[]),t}toJSON(){return super.toJSON()}}class ed{point;docIDs;left;right;parent;constructor(e,t){this.point=e,this.docIDs=new Set(t),this.left=null,this.right=null,this.parent=null}toJSON(){return{point:this.point,docIDs:Array.from(this.docIDs),left:this.left?this.left.toJSON():null,right:this.right?this.right.toJSON():null}}static fromJSON(e,t=null){let r=new ed(e.point,e.docIDs);return r.parent=t,e.left&&(r.left=ed.fromJSON(e.left,r)),e.right&&(r.right=ed.fromJSON(e.right,r)),r}}class eh{root;nodeMap;constructor(){this.root=null,this.nodeMap=new Map}getPointKey(e){return`${e.lon},${e.lat}`}insert(e,t){let r=this.getPointKey(e),n=this.nodeMap.get(r);if(n){t.forEach(e=>n.docIDs.add(e));return}let o=new ed(e,t);if(this.nodeMap.set(r,o),null==this.root){this.root=o;return}let i=this.root,a=0;for(;;){if(0==a%2){if(e.lon<i.point.lon){if(null==i.left){i.left=o,o.parent=i;return}i=i.left}else{if(null==i.right){i.right=o,o.parent=i;return}i=i.right}}else if(e.lat<i.point.lat){if(null==i.left){i.left=o,o.parent=i;return}i=i.left}else{if(null==i.right){i.right=o,o.parent=i;return}i=i.right}a++}}contains(e){let t=this.getPointKey(e);return this.nodeMap.has(t)}getDocIDsByCoordinates(e){let t=this.getPointKey(e),r=this.nodeMap.get(t);return r?Array.from(r.docIDs):null}removeDocByID(e,t){let r=this.getPointKey(e),n=this.nodeMap.get(r);n&&(n.docIDs.delete(t),0===n.docIDs.size&&(this.nodeMap.delete(r),this.deleteNode(n)))}deleteNode(e){let t=e.parent,r=e.left?e.left:e.right;r&&(r.parent=t),t?t.left===e?t.left=r:t.right===e&&(t.right=r):(this.root=r,this.root&&(this.root.parent=null))}searchByRadius(e,t,r=!0,n="asc",o=!1){let i=o?eh.vincentyDistance:eh.haversineDistance,a=[{node:this.root,depth:0}],s=[];for(;a.length>0;){let{node:n,depth:o}=a.pop();if(null==n)continue;let l=i(e,n.point);(r?l<=t:l>t)&&s.push({point:n.point,docIDs:Array.from(n.docIDs)}),null!=n.left&&a.push({node:n.left,depth:o+1}),null!=n.right&&a.push({node:n.right,depth:o+1})}return n&&s.sort((t,r)=>{let o=i(e,t.point),a=i(e,r.point);return"asc"===n.toLowerCase()?o-a:a-o}),s}searchByPolygon(e,t=!0,r=null,n=!1){let o=[{node:this.root,depth:0}],i=[];for(;o.length>0;){let{node:r,depth:n}=o.pop();if(null==r)continue;null!=r.left&&o.push({node:r.left,depth:n+1}),null!=r.right&&o.push({node:r.right,depth:n+1});let a=eh.isPointInPolygon(e,r.point);(a&&t||!a&&!t)&&i.push({point:r.point,docIDs:Array.from(r.docIDs)})}let a=eh.calculatePolygonCentroid(e);if(r){let e=n?eh.vincentyDistance:eh.haversineDistance;i.sort((t,n)=>{let o=e(a,t.point),i=e(a,n.point);return"asc"===r.toLowerCase()?o-i:i-o})}return i}toJSON(){return{root:this.root?this.root.toJSON():null}}static fromJSON(e){let t=new eh;return e.root&&(t.root=ed.fromJSON(e.root),t.buildNodeMap(t.root)),t}buildNodeMap(e){if(null==e)return;let t=this.getPointKey(e.point);this.nodeMap.set(t,e),e.left&&this.buildNodeMap(e.left),e.right&&this.buildNodeMap(e.right)}static calculatePolygonCentroid(e){let t=0,r=0,n=0,o=e.length;for(let i=0,a=o-1;i<o;a=i++){let o=e[i].lon,s=e[i].lat,l=e[a].lon,u=e[a].lat,c=o*u-l*s;t+=c,r+=(o+l)*c,n+=(s+u)*c}let i=6*(t/=2);return{lon:r/=i,lat:n/=i}}static isPointInPolygon(e,t){let r=!1,n=t.lon,o=t.lat,i=e.length;for(let t=0,a=i-1;t<i;a=t++){let i=e[t].lon,s=e[t].lat,l=e[a].lon,u=e[a].lat;s>o!=u>o&&n<(l-i)*(o-s)/(u-s)+i&&(r=!r)}return r}static haversineDistance(e,t){let r=Math.PI/180,n=e.lat*r,o=t.lat*r,i=(t.lat-e.lat)*r,a=(t.lon-e.lon)*r,s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(o)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371e3}static vincentyDistance(e,t){let r,n,o,i,a,s,l;let u=1/298.257223563,c=(1-1/298.257223563)*6378137,f=Math.PI/180,d=e.lat*f,h=t.lat*f,p=(t.lon-e.lon)*f,g=Math.atan((1-u)*Math.tan(d)),m=Math.atan((1-u)*Math.tan(h)),y=Math.sin(g),b=Math.cos(g),_=Math.sin(m),w=Math.cos(m),S=p,v=1e3;do{let e=Math.sin(S),t=Math.cos(S);if(0===(n=Math.sqrt(w*e*(w*e)+(b*_-y*w*t)*(b*_-y*w*t))))return 0;i=Math.atan2(n,o=y*_+b*w*t),isNaN(l=o-2*y*_/(s=1-(a=b*w*e/n)*a))&&(l=0);let c=u/16*s*(4+u*(4-3*s));r=S,S=p+(1-c)*u*a*(i+c*n*(l+c*o*(-1+2*l*l)))}while(Math.abs(S-r)>1e-12&&--v>0);if(0===v)return NaN;let I=s*(40680631590769-c*c)/(c*c),O=I/1024*(256+I*(-128+I*(74-47*I)));return c*(1+I/16384*(4096+I*(-768+I*(320-175*I))))*(i-O*n*(l+O/4*(o*(-1+2*l*l)-O/6*l*(-3+4*n*n)*(-3+4*l*l))))}}class ep{true;false;constructor(){this.true=new Set,this.false=new Set}insert(e,t){t?this.true.add(e):this.false.add(e)}delete(e,t){t?this.true.delete(e):this.false.delete(e)}getSize(){return this.true.size+this.false.size}toJSON(){return{true:Array.from(this.true),false:Array.from(this.false)}}static fromJSON(e){let t=new ep;return t.true=new Set(e.true),t.false=new Set(e.false),t}}class eg{size;vectors=new Map;constructor(e){this.size=e}add(e,t){t instanceof Float32Array||(t=new Float32Array(t));let r=em(t,this.size);this.vectors.set(e,[r,t])}remove(e){this.vectors.delete(e)}find(e,t,r){return e instanceof Float32Array||(e=new Float32Array(e)),function(e,t,r,n,o){let i=em(e,n),a=[];for(let s of t||r.keys()){let t=r.get(s);if(!t)continue;let l=t[0],u=t[1],c=0;for(let t=0;t<n;t++)c+=e[t]*u[t];let f=c/(i*l);f>=o&&a.push([s,f])}return a}(e,r,this.vectors,this.size,t)}toJSON(){let e=[];for(let[t,[r,n]]of this.vectors)e.push([t,[r,Array.from(n)]]);return{size:this.size,vectors:e}}static fromJSON(e){let t=new eg(e.size);for(let[r,[n,o]]of e.vectors)t.vectors.set(r,[n,new Float32Array(o)]);return t}}function em(e,t){let r=0;for(let n=0;n<t;n++)r+=e[n]*e[n];return Math.sqrt(r)}function ey(e,t,r,n,o){let i=W(e.sharedInternalDocumentStore,r);e.avgFieldLength[t]=((e.avgFieldLength[t]??0)*(o-1)+n.length)/o,e.fieldLengths[t][i]=n.length,e.frequencies[t][i]={}}function eb(e,t,r,n,o){let i=0;for(let e of n)e===o&&i++;let a=W(e.sharedInternalDocumentStore,r),s=i/n.length;e.frequencies[t][a][o]=s,o in e.tokenOccurrences[t]||(e.tokenOccurrences[t][o]=0),e.tokenOccurrences[t][o]=(e.tokenOccurrences[t][o]??0)+1}function e_(e,t,r,n){let o=W(e.sharedInternalDocumentStore,r);n>1?e.avgFieldLength[t]=(e.avgFieldLength[t]*n-e.fieldLengths[t][o])/(n-1):e.avgFieldLength[t]=void 0,e.fieldLengths[t][o]=void 0,e.frequencies[t][o]=void 0}function ew(e,t,r){e.tokenOccurrences[t][r]--}function eS(e,t,r,n,o,i,a,s,l,u,c){if(z(a))return function(e,t,r,n,o){e.vectorIndexes[t].node.add(o,r)}(t,r,i,0,o);let f=n=>{let{type:i,node:a}=t.indexes[r];switch(i){case"Bool":a[n?"true":"false"].add(o);break;case"AVL":{let e=c?.avlRebalanceThreshold??1;a.insert(n,o,e);break}case"Radix":{let i=l.tokenize(n,s,r,!1);for(let n of(e.insertDocumentScoreParameters(t,r,o,i,u),i))e.insertTokenScoreParameters(t,r,o,i,n),a.insert(n,o);break}case"Flat":a.insert(n,o);break;case"BKD":a.insert(n,[o])}};if(!L(a))return f(i);let d=i.length;for(let e=0;e<d;e++)f(i[e])}function ev(e,t,r,n,o,i,a,s,l,u){if(z(a))return t.vectorIndexes[r].node.remove(o),!0;let{type:c,node:f}=t.indexes[r];switch(c){case"AVL":return f.removeDocument(i,o),!0;case"Bool":return f[i?"true":"false"].delete(o),!0;case"Radix":{let a=l.tokenize(i,s,r);for(let i of(e.removeDocumentScoreParameters(t,r,n,u),a))e.removeTokenScoreParameters(t,r,i),f.removeDocumentByWord(i,o);return!0}case"Flat":return f.removeDocument(o,i),!0;case"BKD":return f.removeDocByID(i,o),!1}}function eI(e,t,r,n,o,i,a,s,l,u){if(!L(a))return ev(e,t,r,n,o,i,a,s,l,u);let c=U[a],f=i.length;for(let a=0;a<f;a++)ev(e,t,r,n,o,i[a],c,s,l,u);return!0}function eO(e,t,r,n,o,i,a,s,l,u){let c=Array.from(n),f=e.avgFieldLength[t],d=e.fieldLengths[t],h=e.tokenOccurrences[t],p=e.frequencies[t],g="number"==typeof h[r]?h[r]??0:0,m=c.length;for(let e=0;e<m;e++){let n=c[e];if(l&&!l.has(n))continue;u.has(n)||u.set(n,new Map);let h=u.get(n);h.set(t,(h.get(t)||0)+1);let m=function(e,t,r,n,o,{k:i,b:a,d:s}){return Math.log(1+(r-t+.5)/(t+.5))*(s+e*(i+1))/(e+i*(1-a+a*n/o))}(p?.[n]?.[r]??0,g,o,d[n],f,i);a.has(n)?a.set(n,a.get(n)+m*s):a.set(n,m*s)}}function eT(e,t,r,n,o,i,a,s,l,u,c,f=0){let d=r.tokenize(t,n),h=d.length||1,p=new Map,g=new Map,m=new Map;for(let r of o){if(!(r in e.indexes))continue;let n=e.indexes[r],{type:o}=n;if("Radix"!==o)throw R("WRONG_SEARCH_PROPERTY_TYPE",r);let f=s[r]??1;if(f<=0)throw R("INVALID_BOOST_VALUE",f);0!==d.length||t||d.push("");let h=d.length;for(let t=0;t<h;t++){let o=d[t],s=n.node.find({term:o,exact:i,tolerance:a}),h=Object.keys(s);h.length>0&&g.set(o,!0);let y=h.length;for(let t=0;t<y;t++){let n=h[t],o=s[n];eO(e,r,n,o,u,l,m,f,c,p)}}}let y=Array.from(m.entries()).map(([e,t])=>[e,t]).sort((e,t)=>t[1]-e[1]);if(0===y.length)return[];if(1===f)return y;if(0===f){if(1===h)return y;for(let e of d)if(!g.get(e))return[];return y.filter(([e])=>{let t=p.get(e);return!!t&&Array.from(t.values()).some(e=>e===h)})}let b=y.filter(([e])=>{let t=p.get(e);return!!t&&Array.from(t.values()).some(e=>e===h)});if(b.length>0){let e=y.filter(([e])=>!b.some(([t])=>t===e)),t=Math.ceil(e.length*f);return[...b,...e.slice(0,t)]}return y}function eE(e){return e.searchableProperties}function eN(e){return e.searchablePropertiesWithTypes}function eD(e,t){let{indexes:r,vectorIndexes:n,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:a,tokenOccurrences:s,avgFieldLength:l,fieldLengths:u}=t,c={},f={};for(let e of Object.keys(r)){let{node:t,type:n,isArray:o}=r[e];switch(n){case"Radix":c[e]={type:"Radix",node:ef.fromJSON(t),isArray:o};break;case"Flat":c[e]={type:"Flat",node:el.fromJSON(t),isArray:o};break;case"AVL":c[e]={type:"AVL",node:es.fromJSON(t),isArray:o};break;case"BKD":c[e]={type:"BKD",node:eh.fromJSON(t),isArray:o};break;case"Bool":c[e]={type:"Bool",node:ep.fromJSON(t),isArray:o};break;default:c[e]=r[e]}}for(let e of Object.keys(n))f[e]={type:"Vector",isArray:!1,node:eg.fromJSON(n[e])};return{sharedInternalDocumentStore:e,indexes:c,vectorIndexes:f,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:a,tokenOccurrences:s,avgFieldLength:l,fieldLengths:u}}function eA(e){let{indexes:t,vectorIndexes:r,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:a,avgFieldLength:s,fieldLengths:l}=e,u={};for(let e of Object.keys(r))u[e]=r[e].node.toJSON();let c={};for(let e of Object.keys(t)){let{type:r,node:n,isArray:o}=t[e];"Flat"===r||"Radix"===r||"AVL"===r||"BKD"===r||"Bool"===r?c[e]={type:r,node:n.toJSON(),isArray:o}:(c[e]=t[e],c[e].node=c[e].node.toJSON())}return{indexes:c,vectorIndexes:u,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:a,avgFieldLength:s,fieldLengths:l}}function eP(e,t){e||(e=new Set);let r=t.length;for(let n=0;n<r;n++){let r=t[n].docIDs,o=r.length;for(let t=0;t<o;t++)e.add(r[t])}return e}function ek(e,t,r=!1){let n=r?eh.vincentyDistance:eh.haversineDistance,o=[],i=[];for(let{point:r}of e)i.push(n(t,r));let a=Math.max(...i),s=0;for(let{docIDs:t}of e){let e=a-i[s]+1;for(let r of t)o.push([r,e]);s++}return o.sort((e,t)=>t[1]-e[1]),o}function eR(e,t,r,n){return n?.enabled!==!1?function e(t,r,n,o,i){let a={language:t.tokenizer.language,sharedInternalDocumentStore:r,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(let[s,l]of Object.entries(n)){let n=`${i}${i?".":""}${s}`;if(!o.includes(n)){if("object"==typeof l&&!Array.isArray(l)){let i=e(t,r,l,o,n);d(a.sortableProperties,i.sortableProperties),a.sorts={...a.sorts,...i.sorts},a.sortablePropertiesWithTypes={...a.sortablePropertiesWithTypes,...i.sortablePropertiesWithTypes};continue}if(!z(l))switch(l){case"boolean":case"number":case"string":a.sortableProperties.push(n),a.sortablePropertiesWithTypes[n]=l,a.sorts[n]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:l};break;case"geopoint":case"enum":case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw R("INVALID_SORT_SCHEMA_TYPE",Array.isArray(l)?"array":l,n)}}}return a}(e,t,r,(n||{}).unsortableProperties||[],""):{disabled:!0}}function ex(e,t,r,n){if(!e.enabled)return;e.isSorted=!1;let o=W(e.sharedInternalDocumentStore,r),i=e.sorts[t];i.orderedDocsToRemove.has(o)&&eL(e,t),i.docs.set(o,i.orderedDocs.length),i.orderedDocs.push([o,n])}function eM(e){if(!e.isSorted&&e.enabled){for(let t of Object.keys(e.sorts))!function(e,t){let r;let n=e.sorts[t];switch(n.type){case"string":r=eC.bind(null,e.language);break;case"number":r=eU.bind(null);break;case"boolean":r=ez.bind(null)}n.orderedDocs.sort(r);let o=n.orderedDocs.length;for(let e=0;e<o;e++){let t=n.orderedDocs[e][0];n.docs.set(t,e)}}(e,t);e.isSorted=!0}}function eC(e,t,r){return t[1].localeCompare(r[1],void 0!==e&&i.includes(e)?n[e]:void 0)}function eU(e,t){return e[1]-t[1]}function ez(e,t){return t[1]?-1:1}function eL(e,t){let r=e.sorts[t];r.orderedDocsToRemove.size&&(r.orderedDocs=r.orderedDocs.filter(e=>!r.orderedDocsToRemove.has(e[0])),r.orderedDocsToRemove.clear())}function ej(e,t,r){if(!e.enabled)return;let n=e.sorts[t],o=W(e.sharedInternalDocumentStore,r);n.docs.get(o)&&(n.docs.delete(o),n.orderedDocsToRemove.set(o,!0))}function eB(e,t,r){if(!e.enabled)throw R("SORT_DISABLED");let n=r.property,o="DESC"===r.order,i=e.sorts[n];if(!i)throw R("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",n,e.sortableProperties.join(", "));return eL(e,n),eM(e),t.sort((t,r)=>{let n=i.docs.get(W(e.sharedInternalDocumentStore,t[0])),a=i.docs.get(W(e.sharedInternalDocumentStore,r[0])),s=void 0!==n,l=void 0!==a;return s||l?s?l?o?a-n:n-a:-1:1:0}),t}function eV(e){return e.enabled?e.sortableProperties:[]}function eW(e){return e.enabled?e.sortablePropertiesWithTypes:{}}function eF(e,t){if(!t.enabled)return{enabled:!1};let r=Object.keys(t.sorts).reduce((e,r)=>{let{docs:n,orderedDocs:o,type:i}=t.sorts[r];return e[r]={docs:new Map(Object.entries(n).map(([e,t])=>[+e,t])),orderedDocsToRemove:new Map,orderedDocs:o,type:i},e},{});return{sharedInternalDocumentStore:e,language:t.language,sortableProperties:t.sortableProperties,sortablePropertiesWithTypes:t.sortablePropertiesWithTypes,sorts:r,enabled:!0,isSorted:t.isSorted}}function e$(e){if(!e.enabled)return{enabled:!1};!function(e){for(let t of Object.keys(e.sorts))eL(e,t)}(e),eM(e);let t=Object.keys(e.sorts).reduce((t,r)=>{let{docs:n,orderedDocs:o,type:i}=e.sorts[r];return t[r]={docs:Object.fromEntries(n.entries()),orderedDocs:o,type:i},t},{});return{language:e.language,sortableProperties:e.sortableProperties,sortablePropertiesWithTypes:e.sortablePropertiesWithTypes,sorts:t,enabled:e.enabled,isSorted:e.isSorted}}let eG=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115],eJ={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},eY={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},eK="[aeiouy]",eH="[^aeiou][^aeiouy]*",eX=eK+"[aeiou]*",eq="^("+eH+")?"+eX+eH,eZ="^("+eH+")?"+eX+eH+"("+eX+")?$",eQ="^("+eH+")?"+eX+eH+eX+eH,e0="^("+eH+")?"+eK;function e1(e){let t,r,n,o,i,a;if(e.length<3)return e;let s=e.substring(0,1);if("y"==s&&(e=s.toUpperCase()+e.substring(1)),o=/^(.+?)([^s])s$/,(n=/^(.+?)(ss|i)es$/).test(e)?e=e.replace(n,"$1$2"):o.test(e)&&(e=e.replace(o,"$1$2")),o=/^(.+?)(ed|ing)$/,(n=/^(.+?)eed$/).test(e)){let t=n.exec(e);(n=new RegExp(eq)).test(t[1])&&(n=/.$/,e=e.replace(n,""))}else o.test(e)&&(t=o.exec(e)[1],(o=new RegExp(e0)).test(t)&&(e=t,o=/(at|bl|iz)$/,i=RegExp("([^aeiouylsz])\\1$"),a=RegExp("^"+eH+eK+"[^aeiouwxy]$"),o.test(e)?e+="e":i.test(e)?(n=/.$/,e=e.replace(n,"")):a.test(e)&&(e+="e")));if((n=/^(.+?)y$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(e0),t&&n.test(t)&&(e=t+"i")}if((n=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(e)){let o=n.exec(e);t=o?.[1],r=o?.[2],n=new RegExp(eq),t&&n.test(t)&&(e=t+eJ[r])}if((n=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(e)){let o=n.exec(e);t=o?.[1],r=o?.[2],n=new RegExp(eq),t&&n.test(t)&&(e=t+eY[r])}if(o=/^(.+?)(s|t)(ion)$/,(n=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(eQ),t&&n.test(t)&&(e=t)}else if(o.test(e)){let r=o.exec(e);t=r?.[1]??""+r?.[2]??"",(o=new RegExp(eQ)).test(t)&&(e=t)}if((n=/^(.+?)e$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(eQ),o=new RegExp(eZ),i=RegExp("^"+eH+eK+"[^aeiouwxy]$"),t&&(n.test(t)||o.test(t)&&!i.test(t))&&(e=t)}return n=/ll$/,o=new RegExp(eQ),n.test(e)&&o.test(e)&&(n=/.$/,e=e.replace(n,"")),"y"==s&&(e=s.toLowerCase()+e.substring(1)),e}function e6(e,t,r=!0){let n=`${this.language}:${e}:${t}`;return r&&this.normalizationCache.has(n)?this.normalizationCache.get(n):this.stopWords?.includes(t)?(r&&this.normalizationCache.set(n,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(e)&&(t=this.stemmer(t)),t=function(e){let t=[];for(let n=0;n<e.length;n++){var r;t[n]=(r=e.charCodeAt(n))<192||r>383?r:eG[r-192]||r}return String.fromCharCode(...t)}(t),r&&this.normalizationCache.set(n,t),t)}function e2(e,t,r,n=!0){let i;if(t&&t!==this.language)throw R("LANGUAGE_NOT_SUPPORTED",t);if("string"!=typeof e)return[e];let a=this.normalizeToken.bind(this,r??"");if(r&&this.tokenizeSkipProperties.has(r))i=[a(e,n)];else{let t=o[this.language];i=e.toLowerCase().split(t).map(e=>a(e,n)).filter(Boolean)}let s=function(e){for(;""===e[e.length-1];)e.pop();for(;""===e[0];)e.shift();return e}(i);return this.allowDuplicates?s:Array.from(new Set(s))}function e7(e={}){let t,r;if(e.language){if(!i.includes(e.language))throw R("LANGUAGE_NOT_SUPPORTED",e.language)}else e.language="english";if(e.stemming||e.stemmer&&!("stemming"in e)){if(e.stemmer){if("function"!=typeof e.stemmer)throw R("INVALID_STEMMER_FUNCTION_TYPE");t=e.stemmer}else if("english"===e.language)t=e1;else throw R("MISSING_STEMMER",e.language)}if(!1!==e.stopWords){if(r=[],Array.isArray(e.stopWords))r=e.stopWords;else if("function"==typeof e.stopWords)r=e.stopWords(r);else if(e.stopWords)throw R("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(r))throw R("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(let e of r)if("string"!=typeof e)throw R("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}let n={tokenize:e2,language:e.language,stemmer:t,stemmerSkipProperties:new Set(e.stemmerSkipProperties?[e.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(e.tokenizeSkipProperties?[e.tokenizeSkipProperties].flat():[]),stopWords:r,allowDuplicates:!!e.allowDuplicates,normalizeToken:e6,normalizationCache:new Map};return n.tokenize=e2.bind(n),n.normalizeToken=e6,n}function e3(e){return{sharedInternalDocumentStore:e,rules:new Map}}function e9(e,t){if(e.rules.has(t.id))throw Error(`PINNING_RULE_ALREADY_EXISTS: A pinning rule with id "${t.id}" already exists. Use updateRule to modify it.`);e.rules.set(t.id,t)}function e8(e,t){if(!e.rules.has(t.id))throw Error(`PINNING_RULE_NOT_FOUND: Cannot update pinning rule with id "${t.id}" because it does not exist. Use addRule to create it.`);e.rules.set(t.id,t)}function e5(e,t){return e.rules.delete(t)}function e4(e,t){return e.rules.get(t)}function te(e){return Array.from(e.rules.values())}function tt(e,t){if(!t)return[];let r=[];for(let n of e.rules.values())(function(e,t){return!!e&&t.conditions.every(t=>(function(e,t){let r=e.toLowerCase().trim(),n=t.pattern.toLowerCase().trim();switch(t.anchoring){case"is":return r===n;case"starts_with":return r.startsWith(n);case"contains":return r.includes(n);default:return!1}})(e,t))})(t,n)&&r.push(n);return r}function tr(e,t){return{sharedInternalDocumentStore:e,rules:new Map(t?.rules??[])}}function tn(e){return{rules:Array.from(e.rules.entries())}}function to({schema:e,sort:t,language:r,components:n,id:o,plugins:i}){for(let t of(n||(n={}),i??[])){if(!("getComponents"in t)||"function"!=typeof t.getComponents)continue;let r=t.getComponents(e);for(let e of Object.keys(r))if(n[e])throw R("PLUGIN_COMPONENT_CONFLICT",e,t.name);n={...n,...r}}o||(o=m());let a=n.tokenizer,s=n.index,l=n.documentsStore,u=n.sorter,c=n.pinning;if(a=a?a.tokenize?a:e7(a):e7({language:r??"english"}),n.tokenizer&&r)throw R("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");let f={idToInternalId:new Map,internalIdToId:[],save:B,load:V};s||={create:function e(t,r,n,o,i=""){for(let[a,s]of(o||(o={sharedInternalDocumentStore:r,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}}),Object.entries(n))){let n=`${i}${i?".":""}${a}`;if("object"==typeof s&&!Array.isArray(s)){e(t,r,s,o,n);continue}if(z(s))o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=s,o.vectorIndexes[n]={type:"Vector",node:new eg(j(s)),isArray:!1};else{let e=/\[/.test(s);switch(s){case"boolean":case"boolean[]":o.indexes[n]={type:"Bool",node:new ep,isArray:e};break;case"number":case"number[]":o.indexes[n]={type:"AVL",node:new es(0,[]),isArray:e};break;case"string":case"string[]":o.indexes[n]={type:"Radix",node:new ef,isArray:e},o.avgFieldLength[n]=0,o.frequencies[n]={},o.tokenOccurrences[n]={},o.fieldLengths[n]={};break;case"enum":case"enum[]":o.indexes[n]={type:"Flat",node:new el,isArray:e};break;case"geopoint":o.indexes[n]={type:"BKD",node:new eh,isArray:e};break;default:throw R("INVALID_SCHEMA_TYPE",Array.isArray(s)?"array":s,n)}o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=s}}return o},insert:eS,remove:eI,insertDocumentScoreParameters:ey,insertTokenScoreParameters:eb,removeDocumentScoreParameters:e_,removeTokenScoreParameters:ew,calculateResultScores:eO,search:eT,searchByWhereClause:function e(t,r,n,o){if("and"in n&&n.and&&Array.isArray(n.and)){let i=n.and;return 0===i.length?new Set:E(...i.map(n=>e(t,r,n,o)))}if("or"in n&&n.or&&Array.isArray(n.or)){let i=n.or;return 0===i.length?new Set:i.map(n=>e(t,r,n,o)).reduce((e,t)=>D(e,t),new Set)}if("not"in n&&n.not){let i=n.not,a=new Set,s=t.sharedInternalDocumentStore;for(let e=1;e<=s.internalIdToId.length;e++)a.add(e);return function(e,t){let r=new Set;for(let n of e)t.has(n)||r.add(n);return r}(a,e(t,r,i,o))}let i=Object.keys(n),a=i.reduce((e,t)=>({[t]:new Set,...e}),{});for(let e of i){let i=n[e];if(void 0===t.indexes[e])throw R("UNKNOWN_FILTER_PROPERTY",e);let{node:s,type:l,isArray:u}=t.indexes[e];if("Bool"===l){let t=i?s.true:s.false;a[e]=D(a[e],t);continue}if("BKD"===l){let t;if("radius"in i)t="radius";else if("polygon"in i)t="polygon";else throw Error(`Invalid operation ${i}`);if("radius"===t){let{value:r,coordinates:n,unit:o="m",inside:l=!0,highPrecision:u=!1}=i[t],c=v(r,o),f=s.searchByRadius(n,c,l,void 0,u);a[e]=eP(a[e],f)}else{let{coordinates:r,inside:n=!0,highPrecision:o=!1}=i[t],l=s.searchByPolygon(r,n,void 0,o);a[e]=eP(a[e],l)}continue}if("Radix"===l&&("string"==typeof i||Array.isArray(i))){for(let t of[i].flat())for(let n of r.tokenize(t,o,e)){let t=s.find({term:n,exact:!0});a[e]=function(e,t){e||(e=new Set);let r=Object.keys(t),n=r.length;for(let o=0;o<n;o++){let n=t[r[o]],i=n.length;for(let t=0;t<i;t++)e.add(n[t])}return e}(a[e],t)}continue}let c=Object.keys(i);if(c.length>1)throw R("INVALID_FILTER_OPERATION",c.length);if("Flat"===l){let t=new Set(u?s.filterArr(i):s.filter(i));a[e]=D(a[e],t);continue}if("AVL"===l){let t;let r=c[0],n=i[r];switch(r){case"gt":t=s.greaterThan(n,!1);break;case"gte":t=s.greaterThan(n,!0);break;case"lt":t=s.lessThan(n,!1);break;case"lte":t=s.lessThan(n,!0);break;case"eq":t=s.find(n)??new Set;break;case"between":{let[e,r]=n;t=s.rangeSearch(e,r);break}default:throw R("INVALID_FILTER_OPERATION",r)}a[e]=D(a[e],t)}}return E(...Object.values(a))},getSearchableProperties:eE,getSearchablePropertiesWithTypes:eN,load:eD,save:eA},u||={create:eR,insert:ex,remove:ej,save:e$,load:eF,sortBy:eB,getSortableProperties:eV,getSortablePropertiesWithTypes:eW},l||={create:$,get:G,getMultiple:J,getAll:Y,store:K,remove:H,count:X,load:q,save:Z},c||={create:e3,addRule:e9,updateRule:e8,removeRule:e5,getRule:e4,getAllRules:te,getMatchingRules:tt,load:tr,save:tn},function(e){let t={formatElapsedTime:x,getDocumentIndexId:M,getDocumentProperties:_,validateSchema:function e(t,r){for(let[n,o]of Object.entries(r)){let r=t[n];if(void 0!==r&&("geopoint"!==o||"object"!=typeof r||"number"!=typeof r.lon||"number"!=typeof r.lat)&&("enum"!==o||"string"!=typeof r&&"number"!=typeof r)){if("enum[]"===o&&Array.isArray(r)){let e=r.length;for(let t=0;t<e;t++)if("string"!=typeof r[t]&&"number"!=typeof r[t])return n+"."+t;continue}if(z(o)){let e=j(o);if(!Array.isArray(r)||r.length!==e)throw R("INVALID_INPUT_VECTOR",n,e,r.length);continue}if(L(o)){if(!Array.isArray(r))return n;let e=U[o],t=r.length;for(let o=0;o<t;o++)if(typeof r[o]!==e)return n+"."+o;continue}if("object"==typeof o){if(!r||"object"!=typeof r)return n;let t=e(r,o);if(t)return n+"."+t;continue}if(typeof r!==o)return n}}}};for(let r of et)if(e[r]){if("function"!=typeof e[r])throw R("COMPONENT_MUST_BE_FUNCTION",r)}else e[r]=t[r];for(let t of Object.keys(e))if(!ee.includes(t)&&!et.includes(t))throw R("UNSUPPORTED_COMPONENT",t)}(n);let{getDocumentProperties:d,getDocumentIndexId:h,validateSchema:p,formatElapsedTime:g}=n,y={data:{},caches:{},schema:e,tokenizer:a,index:s,sorter:u,documentsStore:l,pinning:c,internalDocumentIDStore:f,getDocumentProperties:d,getDocumentIndexId:h,validateSchema:p,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeUpsert:[],afterUpsert:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],beforeUpdateMultiple:[],afterUpdateMultiple:[],beforeUpsertMultiple:[],afterUpsertMultiple:[],afterCreate:[],formatElapsedTime:g,id:o,plugins:i,version:"{{VERSION}}"};for(let r of(y.data={index:y.index.create(y,f,e),docs:y.documentsStore.create(y,f),sorting:y.sorter.create(y,f,e,t),pinning:y.pinning.create(f)},Q))y[r]=(y[r]??[]).concat(function(e,t){let r=[],n=e.plugins?.length;if(!n)return r;for(let o=0;o<n;o++)try{let n=e.plugins[o];"function"==typeof n[t]&&r.push(n[t])}catch(e){throw console.error("Caught error in getAllPluginsByHook:",e),R("PLUGIN_CRASHED")}return r}(y,r));let b=y.afterCreate;return b&&function(e,t){if(e.some(O))return(async()=>{for(let r of e)await r(t)})();for(let r of e)r(t)}(b,y),y}function ti(e,t){return e.documentsStore.get(e.data.docs,t)}function ta(e,t,r,n,o){let i=e.validateSchema(t,e.schema);if(i)throw R("SCHEMA_VALIDATION_FAILURE",i);return O(e.beforeInsert)||O(e.afterInsert)||O(e.index.beforeInsert)||O(e.index.insert)||O(e.index.afterInsert)?tu(e,t,r,n,o):function(e,t,r,n,o){let{index:i,docs:a}=e.data,s=e.getDocumentIndexId(t);if("string"!=typeof s)throw R("DOCUMENT_ID_MUST_BE_STRING",typeof s);let l=W(e.internalDocumentIDStore,s);if(n||er(e.beforeInsert,e,s,t),!e.documentsStore.store(a,s,l,t))throw R("DOCUMENT_ALREADY_EXISTS",s);let u=e.documentsStore.count(a),c=e.index.getSearchableProperties(i),f=e.index.getSearchablePropertiesWithTypes(i),d=e.getDocumentProperties(t,c);for(let[e,t]of Object.entries(d))void 0!==t&&tc(typeof t,f[e],e,t);return function(e,t,r,n,o,i,a,s){for(let a of r){let r=n[a];if(void 0===r)continue;let l=e.index.getSearchablePropertiesWithTypes(e.data.index)[a],u=W(e.internalDocumentIDStore,t);e.index.beforeInsert?.(e.data.index,a,t,r,l,i,e.tokenizer,o),e.index.insert(e.index,e.data.index,a,t,u,r,l,i,e.tokenizer,o,s),e.index.afterInsert?.(e.data.index,a,t,r,l,i,e.tokenizer,o)}let l=e.sorter.getSortableProperties(e.data.sorting),u=e.getDocumentProperties(a,l);for(let r of l){let n=u[r];if(void 0===n)continue;let o=e.sorter.getSortablePropertiesWithTypes(e.data.sorting)[r];e.sorter.insert(e.data.sorting,r,t,n,o,i)}}(e,s,c,d,u,r,t,o),n||er(e.afterInsert,e,s,t),s}(e,t,r,n,o)}let ts=new Set(["enum","enum[]"]),tl=new Set(["string","number"]);async function tu(e,t,r,n,o){let{index:i,docs:a}=e.data,s=e.getDocumentIndexId(t);if("string"!=typeof s)throw R("DOCUMENT_ID_MUST_BE_STRING",typeof s);let l=W(e.internalDocumentIDStore,s);if(n||await er(e.beforeInsert,e,s,t),!e.documentsStore.store(a,s,l,t))throw R("DOCUMENT_ALREADY_EXISTS",s);let u=e.documentsStore.count(a),c=e.index.getSearchableProperties(i),f=e.index.getSearchablePropertiesWithTypes(i),d=e.getDocumentProperties(t,c);for(let[e,t]of Object.entries(d))void 0!==t&&tc(typeof t,f[e],e,t);return await tf(e,s,c,d,u,r,t,o),n||await er(e.afterInsert,e,s,t),s}function tc(e,t,r,n){if(!("geopoint"===t&&"object"==typeof n&&"number"==typeof n.lon&&"number"==typeof n.lat||z(t)&&Array.isArray(n)||L(t)&&Array.isArray(n))&&!(ts.has(t)&&tl.has(e))&&e!==t)throw R("INVALID_DOCUMENT_PROPERTY",r,t,e)}async function tf(e,t,r,n,o,i,a,s){for(let a of r){let r=n[a];if(void 0===r)continue;let l=e.index.getSearchablePropertiesWithTypes(e.data.index)[a];await e.index.beforeInsert?.(e.data.index,a,t,r,l,i,e.tokenizer,o);let u=e.internalDocumentIDStore.idToInternalId.get(t);await e.index.insert(e.index,e.data.index,a,t,u,r,l,i,e.tokenizer,o,s),await e.index.afterInsert?.(e.data.index,a,t,r,l,i,e.tokenizer,o)}let l=e.sorter.getSortableProperties(e.data.sorting),u=e.getDocumentProperties(a,l);for(let r of l){let n=u[r];if(void 0===n)continue;let o=e.sorter.getSortablePropertiesWithTypes(e.data.sorting)[r];e.sorter.insert(e.data.sorting,r,t,n,o,i)}}function td(e,t,r,n,o,i){return O(e.afterInsertMultiple)||O(e.beforeInsertMultiple)||O(e.index.beforeInsert)||O(e.index.insert)||O(e.index.afterInsert)?th(e,t,r,n,o,i):function(e,t,r=1e3,n,o,i=0){let a=[],s=0;return!function(){let l=Date.now();for(;function(){let i=t.slice(s*r,(s+1)*r);if(0===i.length)return!1;for(let t of i){let r=ta(e,t,n,o,{avlRebalanceThreshold:i.length});a.push(r)}return s++,!0}();)if(i>0){let e=Date.now()-l;if(e>=i){let t=i-e%i;t>0&&A(t)}}}(),o||en(e.afterInsertMultiple,e,t),a}(e,t,r,n,o,i)}async function th(e,t,r=1e3,n,o,i=0){let a=[],s=async i=>{let s=Math.min(i+r,t.length),l=t.slice(i,s);for(let t of l){let r={avlRebalanceThreshold:l.length},i=await ta(e,t,n,o,r);a.push(i)}return s},l=async()=>{let e=0;for(;e<t.length;){let t=Date.now();if(e=await s(e),i>0){let e=i-(Date.now()-t);e>0&&A(e)}}};return await l(),o||await en(e.afterInsertMultiple,e,t),a}let tp="fulltext";function tg(e,t){return e[1]-t[1]}function tm(e,t){return t[1]-e[1]}function ty(e,t,r){let n={},o=t.map(([e])=>e),i=e.documentsStore.getMultiple(e.data.docs,o),a=Object.keys(r),s=e.index.getSearchablePropertiesWithTypes(e.data.index);for(let e of a){let t;if("number"===s[e]){let{ranges:n}=r[e],o=n.length,i=Array.from({length:o});for(let e=0;e<o;e++){let t=n[e];i[e]=[`${t.from}-${t.to}`,0]}t=Object.fromEntries(i)}n[e]={count:0,values:t??{}}}let l=i.length;for(let e=0;e<l;e++){let t=i[e];for(let e of a){let o=e.includes(".")?w(t,e):t[e],i=s[e],a=n[e].values;switch(i){case"number":tb(r[e].ranges,a)(o);break;case"number[]":{let t=new Set,n=tb(r[e].ranges,a,t);for(let e of o)n(e);break}case"boolean":case"enum":case"string":t_(a,i)(o);break;case"boolean[]":case"enum[]":case"string[]":{let e=t_(a,"boolean[]"===i?"boolean":"string",new Set);for(let t of o)e(t);break}default:throw R("FACET_NOT_SUPPORTED",i)}}}for(let e of a){let t=n[e];if(t.count=Object.keys(t.values).length,"string"===s[e]){let n=r[e],o=function(e="desc"){return"asc"===e.toLowerCase()?tg:tm}(n.sort);t.values=Object.fromEntries(Object.entries(t.values).sort(o).slice(n.offset??0,n.limit??10))}}return n}function tb(e,t,r){return n=>{for(let o of e){let e=`${o.from}-${o.to}`;!r?.has(e)&&n>=o.from&&n<=o.to&&(void 0===t[e]?t[e]=1:(t[e]++,r?.add(e)))}}}function t_(e,t,r){let n="boolean"===t?"false":"";return t=>{let o=t?.toString()??n;r?.has(o)||(e[o]=(e[o]??0)+1,r?.add(o))}}let tw={reducer:(e,t,r,n)=>(t[n]=r,t),getInitialValue:e=>Array.from({length:e})},tS=["string","number","boolean"];function tv(e,t,r){let n=r.properties,o=n.length,i=e.index.getSearchablePropertiesWithTypes(e.data.index);for(let e=0;e<o;e++){let t=n[e];if(void 0===i[t])throw R("UNKNOWN_GROUP_BY_PROPERTY",t);if(!tS.includes(i[t]))throw R("INVALID_GROUP_BY_PROPERTY",t,tS.join(", "),i[t])}let a=t.map(([t])=>F(e.internalDocumentIDStore,t)),s=e.documentsStore.getMultiple(e.data.docs,a),l=s.length,u=r.maxResult||Number.MAX_SAFE_INTEGER,c=[],f={};for(let e=0;e<o;e++){let t=n[e],r={property:t,perValue:{}},o=new Set;for(let e=0;e<l;e++){let n=w(s[e],t);if(void 0===n)continue;let i="boolean"!=typeof n?n:""+n,a=r.perValue[i]??{indexes:[],count:0};a.count>=u||(a.indexes.push(e),a.count++,r.perValue[i]=a,o.add(n))}c.push(Array.from(o)),f[t]=r}let h=function e(t,r=0){if(r+1===t.length)return t[r].map(e=>[e]);let n=t[r],o=e(t,r+1),i=[];for(let e of n)for(let t of o){let r=[e];d(r,t),i.push(r)}return i}(c),p=h.length,g=[];for(let e=0;e<p;e++){let t=h[e],r=t.length,o={values:[],indexes:[]},i=[];for(let e=0;e<r;e++){let r=t[e],a=n[e];i.push(f[a].perValue["boolean"!=typeof r?r:""+r].indexes),o.values.push(r)}o.indexes=(function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(let t=1;t<e.length;t++)if(e[t].length<e[0].length){let r=e[0];e[0]=e[t],e[t]=r}let t=new Map;for(let r of e[0])t.set(r,1);for(let r=1;r<e.length;r++){let n=0;for(let o of e[r]){let e=t.get(o);e===r&&(t.set(o,e+1),n++)}if(0===n)return[]}return e[0].filter(r=>{let n=t.get(r);return void 0!==n&&t.set(r,0),n===e.length})})(i).sort((e,t)=>e-t),0!==o.indexes.length&&g.push(o)}let m=g.length,y=Array.from({length:m});for(let e=0;e<m;e++){let n=g[e],o=r.reduce||tw,i=n.indexes.map(e=>({id:a[e],score:t[e][1],document:s[e]})),l=o.reducer.bind(null,n.values),u=o.getInitialValue(n.indexes.length),c=i.reduce(l,u);y[e]={values:n.values,result:c}}return y}function tI(e,t,r,n){let o=tt(t,n);if(0===o.length)return r;let i=o.flatMap(e=>e.consequence.promote);i.sort((e,t)=>e.position-t.position);let a=new Set,s=new Map,l=new Set;for(let t of i){let r=W(e.internalDocumentIDStore,t.doc_id);if(void 0!==r){if(s.has(r)){let e=s.get(r);t.position<e&&s.set(r,t.position);continue}l.has(t.position)||(a.add(r),s.set(r,t.position),l.add(t.position))}}if(0===s.size)return r;let u=r.filter(([e])=>!a.has(e)),c=[];for(let[t,n]of s.entries())r.find(([e])=>e===t)?c.push([t,1e6-n]):e.documentsStore.get(e.data.docs,t)&&c.push([t,0]);c.sort((e,t)=>(s.get(e[0])??1/0)-(s.get(t[0])??1/0));let f=[],d=new Map;for(let e of c){let t=s.get(e[0]);d.set(t,e)}let h=0,p=0;for(;p<u.length+c.length;)if(d.has(p))f.push(d.get(p)),p++;else if(h<u.length)f.push(u[h]),h++,p++;else break;for(let[e,t]of d.entries())e>=f.length&&f.push(t);return f}function tO(e,t,r){let n,o;let{term:i,properties:a}=t,s=e.data.index,l=e.caches.propertiesToSearch;if(!l){let t=e.index.getSearchablePropertiesWithTypes(s);l=(l=e.index.getSearchableProperties(s)).filter(e=>t[e].startsWith("string")),e.caches.propertiesToSearch=l}if(a&&"*"!==a){for(let e of a)if(!l.includes(e))throw R("UNKNOWN_INDEX",e,l.join(", "));l=l.filter(e=>a.includes(e))}let u=Object.keys(t.where??{}).length>0;u&&(n=e.index.searchByWhereClause(s,e.tokenizer,t.where,r));let c=void 0!==t.threshold&&null!==t.threshold?t.threshold:1;if(i||a){let a=e.documentsStore.count(e.data.docs);if(o=e.index.search(s,i||"",e.tokenizer,r,l,t.exact||!1,t.tolerance||0,t.boost||{},function(e){let t=e??{};return t.k=t.k??tT.k,t.b=t.b??tT.b,t.d=t.d??tT.d,t}(t.relevance),a,n,c),t.exact&&i){let t=i.trim().split(/\s+/);o=o.filter(([r])=>{let n=e.documentsStore.get(e.data.docs,r);if(!n)return!1;for(let e of l){let r=function(e,t){let r=t.split("."),n=e;for(let e of r){if(!n||"object"!=typeof n||!(e in n))return;n=n[e]}return n}(n,e);if("string"==typeof r&&t.every(e=>RegExp(`\\b${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`).test(r)))return!0}return!1})}}else o=u?function(e,t){let r;let n=function(e,t){let r=Object.keys(e);if(1!==r.length)return{isGeoOnly:!1};let n=r[0],o=e[n];if(void 0===t.indexes[n])return{isGeoOnly:!1};let{type:i}=t.indexes[n];return"BKD"===i&&o&&("radius"in o||"polygon"in o)?{isGeoOnly:!0,geoProperty:n,geoOperation:o}:{isGeoOnly:!1}}(t,e);if(!n.isGeoOnly||!n.geoProperty||!n.geoOperation)return null;let{node:o}=e.indexes[n.geoProperty],i=n.geoOperation;if("radius"in i){let{value:e,coordinates:t,unit:r="m",inside:n=!0,highPrecision:a=!1}=i.radius,s=v(e,r);return ek(o.searchByRadius(t,s,n,"asc",a),t,a)}if("polygon"in i){let{coordinates:e,inside:t=!0,highPrecision:r=!1}=i.polygon;return ek(o.searchByPolygon(e,t,"asc",r),eh.calculatePolygonCentroid(e),r)}return null}(s,t.where)||(n?Array.from(n):[]).map(e=>[+e,0]):Object.keys(e.documentsStore.getAll(e.data.docs)).map(e=>[+e,0]);return o}let tT={k:1.2,b:.75,d:.5};function tE(e,t,r){let n;let o=t.vector;if(o&&(!("value"in o)||!("property"in o)))throw R("INVALID_VECTOR_INPUT",Object.keys(o).join(", "));let i=e.data.index.vectorIndexes[o.property];if(!i)throw R("UNKNOWN_VECTOR_PROPERTY",o.property);let a=i.node.size;if(o?.value.length!==a){if(o?.property===void 0||o?.value.length===void 0)throw R("INVALID_INPUT_VECTOR","undefined",a,"undefined");throw R("INVALID_INPUT_VECTOR",o.property,a,o.value.length)}let s=e.data.index;return Object.keys(t.where??{}).length>0&&(n=e.index.searchByWhereClause(s,e.tokenizer,t.where,r)),i.node.find(o.value,t.similarity??.8,n)}function tN(e){return e[1]}function tD(e,t,r){let n=t.mode??tp;if(n===tp)return function(e,t,r){let n=g();function o(){let o;let i=Object.keys(e.data.index.vectorIndexes),a=t.facets&&Object.keys(t.facets).length>0,{limit:s=10,offset:l=0,distinctOn:u,includeVectors:c=!1}=t,f=!0===t.preflight,d=tO(e,t,r);if(t.sortBy){if("function"==typeof t.sortBy){let r=d.map(([e])=>e),n=e.documentsStore.getMultiple(e.data.docs,r).map((e,t)=>[d[t][0],d[t][1],e]);n.sort(t.sortBy),d=n.map(([e,t])=>[e,t])}else d=e.sorter.sortBy(e.data.sorting,d,t.sortBy).map(([t,r])=>[W(e.internalDocumentIDStore,t),r])}else d=d.sort(b);d=tI(e,e.data.pinning,d,t.term),f||(o=u?function(e,t,r,n,o){let i=e.data.docs,a=new Map,s=[],l=new Set,u=t.length,c=0;for(let f=0;f<u;f++){let u=t[f];if(void 0===u)continue;let[d,h]=u;if(l.has(d))continue;let p=e.documentsStore.get(i,d),g=w(p,o);if(!(void 0===g||a.has(g))&&(a.set(g,!0),!(++c<=r)&&(s.push({id:F(e.internalDocumentIDStore,d),score:h,document:p}),l.add(d),c>=r+n)))break}return s}(e,d,l,s,u):tA(e,d,l,s));let h={elapsed:{formatted:"",raw:0},hits:[],count:d.length};if(void 0===o||(h.hits=o.filter(Boolean),c||I(h,i)),a){let r=ty(e,d,t.facets);h.facets=r}return t.groupBy&&(h.groups=tv(e,d,t.groupBy)),h.elapsed=e.formatElapsedTime(g()-n),h}async function i(){e.beforeSearch&&await ei(e.beforeSearch,e,t,r);let n=o();return e.afterSearch&&await eo(e.afterSearch,e,t,r,n),n}return e.beforeSearch?.length||e.afterSearch?.length?i():o()}(e,t,r);if("vector"===n)return function(e,t,r="english"){let n=g();function o(){let o=tE(e,t,r).sort(b);o=tI(e,e.data.pinning,o,void 0);let i=[];t.facets&&Object.keys(t.facets).length>0&&(i=ty(e,o,t.facets));let a=t.vector.property,s=t.includeVectors??!1,l=t.limit??10,u=t.offset??0,c=Array.from({length:l});for(let t=0;t<l;t++){let r=o[t+u];if(!r)break;let n=e.data.docs.docs[r[0]];if(n){s||(n[a]=null);let o={id:F(e.internalDocumentIDStore,r[0]),score:r[1],document:n};c[t]=o}}let f=[];t.groupBy&&(f=tv(e,o,t.groupBy));let d=g()-n;return{count:o.length,hits:c.filter(Boolean),elapsed:{raw:Number(d),formatted:p(d)},...i?{facets:i}:{},...f?{groups:f}:{}}}async function i(){e.beforeSearch&&await ei(e.beforeSearch,e,t,r);let n=o();return e.afterSearch&&await eo(e.afterSearch,e,t,r,n),n}return e.beforeSearch?.length||e.afterSearch?.length?i():o()}(e,t);if("hybrid"===n)return function(e,t,r){let n=g();function o(){let r,o,i=function(e,t,r){let n=function(e){let t=Math.max.apply(Math,e.map(tN));return e.map(([e,r])=>[e,r/t])}(tO(e,t,r)),o=tE(e,t,r),i=t.hybridWeights;return function(e,t,r,n){let o=Math.max.apply(Math,e.map(tN)),i=Math.max.apply(Math,t.map(tN)),{text:a,vector:s}=n&&n.text&&n.vector?n:{text:.5,vector:.5},l=new Map,u=e.length,c=(e,t)=>e*a+t*s;for(let t=0;t<u;t++){let[r,n]=e[t],i=c(n/o,0);l.set(r,i)}let f=t.length;for(let e=0;e<f;e++){let[r,n]=t[e],o=n/i,a=l.get(r)??0;l.set(r,a+c(0,o))}return[...l].sort((e,t)=>t[1]-e[1])}(n,o,t.term,i)}(e,t,void 0);i=tI(e,e.data.pinning,i,t.term),t.facets&&Object.keys(t.facets).length>0&&(r=ty(e,i,t.facets)),t.groupBy&&(o=tv(e,i,t.groupBy));let a=tA(e,i,t.offset??0,t.limit??10).filter(Boolean),s=g(),l={count:i.length,elapsed:{raw:Number(s-n),formatted:p(s-n)},hits:a,...r?{facets:r}:{},...o?{groups:o}:{}};return t.includeVectors||I(l,Object.keys(e.data.index.vectorIndexes)),l}async function i(){e.beforeSearch&&await ei(e.beforeSearch,e,t,void 0);let r=o();return e.afterSearch&&await eo(e.afterSearch,e,t,void 0,r),r}return e.beforeSearch?.length||e.afterSearch?.length?i():o()}(e,t);throw R("INVALID_SEARCH_MODE",n)}function tA(e,t,r,n){let o=e.data.docs,i=Array.from({length:n}),a=new Set;for(let s=r;s<n+r;s++){let r=t[s];if(void 0===r)break;let[n,l]=r;if(!a.has(n)){let t=e.documentsStore.get(o,n);i[s]={id:F(e.internalDocumentIDStore,n),score:l,document:t},a.add(n)}}return i}Symbol("orama.insertions"),Symbol("orama.removals")},8327:function(e,t,r){"use strict";r.d(t,{eU:function(){return S},hg:function(){return b},wc:function(){return I}});var n,o=r(93513),i=r(65849);r(83454),"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var a=e=>e&&"function"==typeof e.match;function s(e,t){function r(...n){if(t){let r=t(...n);if(!r)throw Error(R(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>(0,i.LG)(t)&&t.type===e,r}function l(e){return(0,o.o$)(e)?(0,o.Uy)(e,()=>{}):e}function u(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function c(e){let t;let r={},n=[],o={addCase(e,t){let n="string"==typeof e?e:e.type;if(!n)throw Error(R(28));if(n in r)throw Error(R(29));return r[n]=t,o},addAsyncThunk:(e,t)=>(t.pending&&(r[e.pending.type]=t.pending),t.rejected&&(r[e.rejected.type]=t.rejected),t.fulfilled&&(r[e.fulfilled.type]=t.fulfilled),t.settled&&n.push({matcher:e.settled,reducer:t.settled}),o),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),o),addDefaultCase:e=>(t=e,o)};return e(o),[r,n,t]}var f=(e,t)=>a(e)?e.match(t):e(t),d=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},h=["name","message","stack","code"],p=class{constructor(e,t){this.payload=e,this.meta=t}_type},g=class{constructor(e,t){this.payload=e,this.meta=t}_type},m=e=>{if("object"==typeof e&&null!==e){let t={};for(let r of h)"string"==typeof e[r]&&(t[r]=e[r]);return t}return{message:String(e)}},y="External signal was aborted",b=(()=>{function e(e,t,r){let n=s(e+"/fulfilled",(e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}})),o=s(e+"/pending",(e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}})),i=s(e+"/rejected",(e,t,n,o,i)=>({payload:o,error:(r&&r.serializeError||m)(e||"Rejected"),meta:{...i||{},arg:n,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}}));return Object.assign(function(e,{signal:a}={}){return(s,l,u)=>{let c,f;let h=r?.idGenerator?r.idGenerator(e):d(),m=new AbortController;function b(e){f=e,m.abort()}a&&(a.aborted?b(y):a.addEventListener("abort",()=>b(y),{once:!0}));let w=async function(){let a;try{var d;let i=r?.condition?.(e,{getState:l,extra:u});if(d=i,null!==d&&"object"==typeof d&&"function"==typeof d.then&&(i=await i),!1===i||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let y=new Promise((e,t)=>{c=()=>{t({name:"AbortError",message:f||"Aborted"})},m.signal.addEventListener("abort",c,{once:!0})});s(o(h,e,r?.getPendingMeta?.({requestId:h,arg:e},{getState:l,extra:u}))),a=await Promise.race([y,Promise.resolve(t(e,{dispatch:s,getState:l,extra:u,requestId:h,signal:m.signal,abort:b,rejectWithValue:(e,t)=>new p(e,t),fulfillWithValue:(e,t)=>new g(e,t)})).then(t=>{if(t instanceof p)throw t;return t instanceof g?n(t.payload,h,e,t.meta):n(t,h,e)})])}catch(t){a=t instanceof p?i(null,h,e,t.payload,t.meta):i(t,h,e)}finally{c&&m.signal.removeEventListener("abort",c)}return r&&!r.dispatchConditionRejection&&i.match(a)&&a.meta.condition||s(a),a}();return Object.assign(w,{abort:b,requestId:h,arg:e,unwrap:()=>w.then(_)})}},{pending:o,rejected:i,fulfilled:n,settled:function(...e){return t=>e.some(e=>f(e,t))}(i,n),typePrefix:e})}return e.withTypes=()=>e,e})();function _(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var w=Symbol.for("rtk-slice-createasyncthunk"),S={[w]:b},v=((n=v||{}).reducer="reducer",n.reducerWithPrepare="reducerWithPrepare",n.asyncThunk="asyncThunk",n);function I({creators:e}={}){let t=e?.asyncThunk?.[w];return function(e){let r;let{name:n,reducerPath:i=n}=e;if(!n)throw Error(R(11));let a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},f=Object.keys(a),d={},h={},p={},g=[],m={addCase(e,t){let r="string"==typeof e?e:e.type;if(!r)throw Error(R(12));if(r in h)throw Error(R(13));return h[r]=t,m},addMatcher:(e,t)=>(g.push({matcher:e,reducer:t}),m),exposeAction:(e,t)=>(p[e]=t,m),exposeCaseReducer:(e,t)=>(d[e]=t,m)};function y(){let[t={},r=[],n]="function"==typeof e.extraReducers?c(e.extraReducers):[e.extraReducers],i={...t,...h};return function(e,t){let r;let[n,i,a]=c(t);if("function"==typeof e)r=()=>l(e());else{let t=l(e);r=()=>t}function s(e=r(),t){let s=[n[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===s.filter(e=>!!e).length&&(s=[a]),s.reduce((e,r)=>{if(r){if((0,o.mv)(e)){let n=r(e,t);return void 0===n?e:n}if((0,o.o$)(e))return(0,o.Uy)(e,e=>r(e,t));{let n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return s.getInitialState=r,s}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of g)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}f.forEach(r=>{let o=a[r],i={reducerName:r,type:`${n}/${r}`,createNotation:"function"==typeof e.reducers};"asyncThunk"===o._reducerDefinitionType?function({type:e,reducerName:t},r,n,o){if(!o)throw Error(R(18));let{payloadCreator:i,fulfilled:a,pending:s,rejected:l,settled:u,options:c}=r,f=o(e,i,c);n.exposeAction(t,f),a&&n.addCase(f.fulfilled,a),s&&n.addCase(f.pending,s),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:a||O,pending:s||O,rejected:l||O,settled:u||O})}(i,o,m,t):function({type:e,reducerName:t,createNotation:r},n,o){let i,a;if("reducer"in n){if(r&&"reducerWithPrepare"!==n._reducerDefinitionType)throw Error(R(17));i=n.reducer,a=n.prepare}else i=n;o.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?s(e,a):s(e))}(i,o,m)});let b=e=>e,_=new Map,w=new WeakMap;function S(e,t){return r||(r=y()),r(e,t)}function v(){return r||(r=y()),r.getInitialState()}function I(t,r=!1){function n(e){let o=e[t];return void 0===o&&r&&(o=u(w,n,v)),o}function o(t=b){let n=u(_,r,()=>new WeakMap);return u(n,t,()=>{let n={};for(let[o,i]of Object.entries(e.selectors??{}))n[o]=function(e,t,r,n){function o(i,...a){let s=t(i);return void 0===s&&n&&(s=r()),e(s,...a)}return o.unwrapped=e,o}(i,t,()=>u(w,t,v),r);return n})}return{reducerPath:t,getSelectors:o,get selectors(){return o(n)},selectSlice:n}}let T={name:n,reducer:S,actions:p,caseReducers:d,getInitialState:v,...I(i),injectInto(e,{reducerPath:t,...r}={}){let n=t??i;return e.inject({reducerPath:n,reducer:S},r),{...T,...I(n,!0)}}};return T}}function O(){}var T=(e,t)=>{if("function"!=typeof e)throw TypeError(R(32))},{assign:E}=Object,N="listenerMiddleware",D=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:i}=e;if(t)o=s(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(o);else throw Error(R(21));return T(i,"options.listener"),{predicate:o,type:t,effect:i}},A=E(e=>{let{type:t,predicate:r,effect:n}=D(e);return{id:d(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw Error(R(22))}}},{withTypes:()=>A}),P=E(s(`${N}/add`),{withTypes:()=>P}),k=E(s(`${N}/remove`),{withTypes:()=>k});function R(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original")},54375:function(e,t,r){"use strict";r.d(t,{Jj:function(){return c}});let n=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),l=e=>"object"==typeof e&&null!==e||"function"==typeof e,u=new Map([["proxy",{canHandle:e=>l(e)&&e[n],serialize(e){let{port1:t,port2:r}=new MessageChannel;return c(e,t),[r,[r]]},deserialize:e=>(e.start(),function(e,t){let r=new Map;return e.addEventListener("message",function(e){let{data:t}=e;if(!t||!t.id)return;let n=r.get(t.id);if(n)try{n(t)}finally{r.delete(t.id)}}),function e(t,r,n=[],a=function(){}){let s=!1,l=new Proxy(a,{get(o,a){if(d(s),a===i)return()=>{g&&g.unregister(l),h(t),r.clear(),s=!0};if("then"===a){if(0===n.length)return{then:()=>l};let e=w(t,r,{type:"GET",path:n.map(e=>e.toString())}).then(_);return e.then.bind(e)}return e(t,r,[...n,a])},set(e,o,i){d(s);let[a,l]=b(i);return w(t,r,{type:"SET",path:[...n,o].map(e=>e.toString()),value:a},l).then(_)},apply(i,a,l){d(s);let u=n[n.length-1];if(u===o)return w(t,r,{type:"ENDPOINT"}).then(_);if("bind"===u)return e(t,r,n.slice(0,-1));let[c,f]=m(l);return w(t,r,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:c},f).then(_)},construct(e,o){d(s);let[i,a]=m(o);return w(t,r,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:i},a).then(_)}});return function(e,t){let r=(p.get(t)||0)+1;p.set(t,r),g&&g.register(e,t,e)}(l,t),l}(e,r,[],void 0)}(e))}],["throw",{canHandle:e=>l(e)&&s in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function c(e,t=globalThis,r=["*"]){t.addEventListener("message",function o(i){let l;if(!i||!i.data)return;if(!function(e,t){for(let r of e)if(t===r||"*"===r||r instanceof RegExp&&r.test(t))return!0;return!1}(r,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}let{id:u,type:d,path:h}=Object.assign({path:[]},i.data),p=(i.data.argumentList||[]).map(_);try{var g,m;let t=h.slice(0,-1).reduce((e,t)=>e[t],e),r=h.reduce((e,t)=>e[t],e);switch(d){case"GET":l=r;break;case"SET":t[h.slice(-1)[0]]=_(i.data.value),l=!0;break;case"APPLY":l=r.apply(t,p);break;case"CONSTRUCT":g=new r(...p),l=Object.assign(g,{[n]:!0});break;case"ENDPOINT":{let{port1:t,port2:r}=new MessageChannel;c(e,r),m=[t],y.set(t,m),l=t}break;case"RELEASE":l=void 0;break;default:return}}catch(e){l={value:e,[s]:0}}Promise.resolve(l).catch(e=>({value:e,[s]:0})).then(r=>{let[n,i]=b(r);t.postMessage(Object.assign(Object.assign({},n),{id:u}),i),"RELEASE"===d&&(t.removeEventListener("message",o),f(t),a in e&&"function"==typeof e[a]&&e[a]())}).catch(e=>{let[r,n]=b({value:TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},r),{id:u}),n)})}),t.start&&t.start()}function f(e){"MessagePort"===e.constructor.name&&e.close()}function d(e){if(e)throw Error("Proxy has been released and is not useable")}function h(e){return w(e,new Map,{type:"RELEASE"}).then(()=>{f(e)})}let p=new WeakMap,g="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(p.get(e)||0)-1;p.set(e,t),0===t&&h(e)});function m(e){var t;let r=e.map(b);return[r.map(e=>e[0]),(t=r.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let y=new WeakMap;function b(e){for(let[t,r]of u)if(r.canHandle(e)){let[n,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},o]}return[{type:"RAW",value:e},y.get(e)||[]]}function _(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function w(e,t,r,n){return new Promise(o=>{let i=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(i,o),e.start&&e.start(),e.postMessage(Object.assign({id:i},r),n)})}},34339:function(e,t,r){"use strict";function n(e,t,r){return e.byteLength>=t+r}function o(e,t,r=!1){if(n(e,t,4))return e.getUint32(t,r)}function i(e,t,r=!1){if(n(e,t,2))return e.getUint16(t,r)}function a(e){if(e.length<16||!(102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]))return;let t=o(new DataView(e.buffer,e.byteOffset,e.byteLength),0);if(void 0===t||t<16||t>e.length)return;let r=[];r.push(String.fromCodePoint(...e.slice(8,12)));for(let n=16;n+4<=t;n+=4)r.push(String.fromCodePoint(...e.slice(n,n+4)));return r}function s(e,t){let r=o(new DataView(e.buffer,e.byteOffset,e.byteLength),t);if(void 0!==r&&!(e.length<r+t)&&!(r<8))return{type:String.fromCodePoint(...e.slice(t+4,t+8)),data:e.slice(t+8,t+r),tail:t+r}}function l(e){let t=[],r=0;for(;r<e.length;){let n=s(e,r);if(!n)break;"meta"===n.type&&function(e,t){let r=4;for(;r<e.length;){let n=s(e,r);if(!n)break;"iprp"===n.type&&function(e,t){let r=0;for(;r<e.length;){let n=s(e,r);if(!n)break;"ipco"===n.type&&function(e,t){let r=0;for(;r<e.length;){let n=s(e,r);if(!n)break;if("ispe"===n.type){let e=new DataView(n.data.buffer,n.data.byteOffset,n.data.byteLength),r=o(e,4),i=o(e,8);if(void 0===r||void 0===i)return;t.push({width:r,height:i})}r=n.tail}}(n.data,t),r=n.tail}}(n.data,t),r=n.tail}}(n.data,t),r=n.tail}return t}function u(e){let t=e[0];for(let r of e)r.width*r.height>t.width*t.height&&(t=r);return t}r.d(t,{z:function(){return I}});let c=e=>137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7],f=e=>67===e[12]&&103===e[13]&&66===e[14]&&73===e[15],d=e=>255===e[0]&&216===e[1]&&255===e[2],h=e=>71===e[0]&&73===e[1]&&70===e[2]&&56===e[3]&&(55===e[4]||57===e[4])&&97===e[5],p=e=>82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&69===e[9]&&66===e[10]&&80===e[11],g=e=>86===e[12]&&80===e[13]&&56===e[14]&&32===e[15],m=e=>86===e[12]&&80===e[13]&&56===e[14]&&76===e[15],y=e=>86===e[12]&&80===e[13]&&56===e[14]&&88===e[15];function b(e,t){let r=e.getUint8(t),n=e.getUint8(t+1);return e.getUint8(t+2)<<16|n<<8|r}let _=new Set(["avif","avis","avio"]),w=e=>{let t=a(e);return!!t&&t.some(e=>_.has(e))},S=new Set(["mif1","msf1","heic","heix","hevc","hevx","heim","heis","hevm","hevs"]),v=e=>{let t=a(e);return!!t&&t.some(e=>S.has(e))};async function I(e){let t=new Uint8Array(0);for await(let r of e){let e=new Uint8Array(t.length+r.length);e.set(t),e.set(r,t.length);let a=function(e){if(!(e.length<3))return function(e){if(!c(e))return;let t=new DataView(e.buffer),r=f(e),n=o(t,r?32:16,!1),i=o(t,r?36:20,!1);if(void 0!==n&&void 0!==i)return{width:n,height:i,type:"png"}}(e=new Uint8Array(e))??function(e){if(!h(e))return;let t=new DataView(e.buffer),r=i(t,6,!0),n=i(t,8,!0);if(void 0!==r&&void 0!==n)return{width:r,height:n,type:"gif"}}(e)??function(e){if(!d(e))return;let t=new DataView(e.buffer),r=2;for(;n(t,r,2);){let e=t.getUint16(r);if(r+=2,e>=65472&&e<=65475){let e=i(t,r+3,!1),n=i(t,r+5,!1);if(void 0===e||void 0===n)return;return{height:e,width:n,type:"jpeg"}}let n=i(t,r);if(void 0===n||(r+=n)>t.byteLength)return}}(e)??function(e){if(!p(e))return;let t=new DataView(e.buffer);if(g(e)){if(!n(t,28,2))return;return{width:16383&t.getUint16(26,!0),height:16383&t.getUint16(28,!0),type:"webp"}}if(m(e)){let e=o(t,21,!0);if(void 0===e)return;return{width:(16383&e)+1,height:(e>>14&16383)+1,type:"webp"}}if(y(e)){if(!n(t,27,3))return;return{width:b(t,24)+1,height:b(t,27)+1,type:"webp"}}}(e)??function(e){if(!w(e))return;let t=l(e);if(0!==t.length)return{...u(t),type:"avif"}}(e)??function(e){if(!v(e))return;let t=l(e);if(0!==t.length)return{...u(t),type:"heic"}}(e)}(t=e);if(a)return a}}},93513:function(e,t,r){"use strict";r.d(t,{Uy:function(){return ed},mv:function(){return m},o$:function(){return y}});var n,o=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function s(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var l=Object,u=l.getPrototypeOf,c="constructor",f="prototype",d="configurable",h="enumerable",p="writable",g="value",m=e=>!!e&&!!e[a];function y(e){return!!e&&(w(e)||E(e)||!!e[i]||!!e[c]?.[i]||N(e)||D(e))}var b=l[f][c].toString(),_=new WeakMap;function w(e){if(!e||!A(e))return!1;let t=u(e);if(null===t||t===l[f])return!0;let r=l.hasOwnProperty.call(t,c)&&t[c];if(r===Object)return!0;if(!P(r))return!1;let n=_.get(r);return void 0===n&&(n=Function.toString.call(r),_.set(r,n)),n===b}function S(e,t,r=!0){0===v(e)?(r?Reflect.ownKeys(e):l.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function v(e){let t=e[a];return t?t.type_:E(e)?1:N(e)?2:D(e)?3:0}var I=(e,t,r=v(e))=>2===r?e.has(t):l[f].hasOwnProperty.call(e,t),O=(e,t,r=v(e))=>2===r?e.get(t):e[t],T=(e,t,r,n=v(e))=>{2===n?e.set(t,r):3===n?e.add(r):e[t]=r},E=Array.isArray,N=e=>e instanceof Map,D=e=>e instanceof Set,A=e=>"object"==typeof e,P=e=>"function"==typeof e,k=e=>"boolean"==typeof e,R=e=>e.copy_||e.base_,x=e=>e.modified_?e.copy_:e.base_;function M(e,t){if(N(e))return new Map(e);if(D(e))return new Set(e);if(E(e))return Array[f].slice.call(e);let r=w(e);if(!0!==t&&("class_only"!==t||r)){let t=u(e);if(null!==t&&r)return{...e};let n=l.create(t);return l.assign(n,e)}{let t=l.getOwnPropertyDescriptors(e);delete t[a];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){let o=r[n],i=t[o];!1===i[p]&&(i[p]=!0,i[d]=!0),(i.get||i.set)&&(t[o]={[d]:!0,[p]:!0,[h]:i[h],[g]:e[o]})}return l.create(u(e),t)}}function C(e,t=!1){return z(e)||m(e)||!y(e)||(v(e)>1&&l.defineProperties(e,{set:U,add:U,clear:U,delete:U}),l.freeze(e),t&&S(e,(e,t)=>{C(t,!0)},!1)),e}var U={[g]:function(){s(2)}};function z(e){return!(null!==e&&A(e))||l.isFrozen(e)}var L="MapSet",j="Patches",B="ArrayMethods",V={};function W(e){let t=V[e];return t||s(0,e),t}var F=e=>!!V[e],$=()=>n,G=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:F(L)?W(L):void 0,arrayMethodsPlugin_:F(B)?W(B):void 0});function J(e,t){t&&(e.patchPlugin_=W(j),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Y(e){K(e),e.drafts_.forEach(X),e.drafts_=null}function K(e){e===n&&(n=e.parent_)}var H=e=>n=G(n,e);function X(e){let t=e[a];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function q(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];if(void 0!==e&&e!==r){r[a].modified_&&(Y(t),s(4)),y(e)&&(e=Z(t,e));let{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[a].base_,e,t)}else e=Z(t,r);return function(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C(t,r)}(t,e,!0),Y(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==o?e:void 0}function Z(e,t){if(z(t))return t;let r=t[a];if(!r)return eo(t,e.handledSet_,e);if(!ee(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){let{callbacks_:t}=r;if(t)for(;t.length>0;)t.pop()(e);en(r,e)}return r.copy_}function Q(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ee=(e,t)=>e.scope_===t,et=[];function er(e,t,r,n){let o=R(e),i=e.type_;if(void 0!==n&&O(o,n,i)===t){T(o,n,r,i);return}if(!e.draftLocations_){let t=e.draftLocations_=new Map;S(o,(e,r)=>{if(m(r)){let n=t.get(r)||[];n.push(e),t.set(r,n)}})}for(let n of e.draftLocations_.get(t)??et)T(o,n,r,i)}function en(e,t){if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){let{patchPlugin_:r}=t;if(r){let n=r.getPath(e);n&&r.generatePatches_(e,n,t)}Q(e)}}function eo(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||m(e)||t.has(e)||!y(e)||z(e)||(t.add(e),S(e,(n,o)=>{if(m(o)){let t=o[a];ee(t,r)&&(T(e,n,x(t),e.type_),Q(t))}else y(o)&&eo(o,t,r)})),e}var ei={get(e,t){if(t===a)return e;let r=e.scope_.arrayMethodsPlugin_,n=1===e.type_&&"string"==typeof t;if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);let o=R(e);if(!I(o,t,e.type_))return function(e,t,r){let n=el(t,r);return n?g in n?n[g]:n.get?.call(e.draft_):void 0}(e,o,t);let i=o[t];if(e.finalized_||!y(i)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&function(e){let t=+e;return Number.isInteger(t)&&String(t)===e}(t))return i;if(i===es(e.base_,t)){ec(e);let r=1===e.type_?+t:t,n=ef(e.scope_,i,e,r);return e.copy_[r]=n}return i},has:(e,t)=>t in R(e),ownKeys:e=>Reflect.ownKeys(R(e)),set(e,t,r){let n=el(R(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=es(R(e),t),o=n?.[a];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if((r===n?0!==r||1/r==1/n:r!=r&&n!=n)&&(void 0!==r||I(e.base_,t,e.type_)))return!0;ec(e),eu(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_.set(t,!0),!function(e,t,r){let{scope_:n}=e;if(m(r)){let o=r[a];ee(o,n)&&o.callbacks_.push(function(){ec(e),er(e,r,x(o),t)})}else y(r)&&e.callbacks_.push(function(){O(R(e),t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&eo(O(e.copy_,t,e.type_),n.handledSet_,n)})}(e,t,r),!0)},deleteProperty:(e,t)=>(ec(e),void 0!==es(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),eu(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=R(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{[p]:!0,[d]:1!==e.type_||"length"!==t,[h]:n[h],[g]:r[t]}:n},defineProperty(){s(11)},getPrototypeOf:e=>u(e.base_),setPrototypeOf(){s(12)}},ea={};function es(e,t){let r=e[a];return(r?R(r):e)[t]}function el(e,t){if(!(t in e))return;let r=u(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=u(r)}}function eu(e){!e.modified_&&(e.modified_=!0,e.parent_&&eu(e.parent_))}function ec(e){e.copy_||(e.assigned_=new Map,e.copy_=M(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function ef(e,t,r,n){let[o,i]=N(t)?W(L).proxyMap_(t,r):D(t)?W(L).proxySet_(t,r):function(e,t){let r=E(e),n={type_:r?1:0,scope_:t?t.scope_:$(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0},o=n,i=ei;r&&(o=[n],i=ea);let{revoke:a,proxy:s}=Proxy.revocable(o,i);return n.draft_=s,n.revoke_=a,[s,n]}(t,r);return(r?.scope_??$()).drafts_.push(o),i.callbacks_=r?.callbacks_??[],i.key_=n,r&&void 0!==n?function(e,t,r){e.callbacks_.push(function(n){if(!t||!ee(t,n))return;n.mapSetPlugin_?.fixSetContents(t);let o=x(t);er(e,t.draft_??t,o,r),en(t,n)})}(r,i,n):i.callbacks_.push(function(e){e.mapSetPlugin_?.fixSetContents(i);let{patchPlugin_:t}=e;i.modified_&&t&&t.generatePatches_(i,[],e)}),o}S(ei,(e,t)=>{ea[e]=function(){let e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),ea.deleteProperty=function(e,t){return ea.set.call(this,e,t,void 0)},ea.set=function(e,t,r){return ei.set.call(this,e[0],t,r,e[0])};var ed=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,r)=>{let n;if(P(e)&&!P(t)){let r=t;t=e;let n=this;return function(e=r,...o){return n.produce(e,e=>t.call(this,e,...o))}}if(P(t)||s(6),void 0===r||P(r)||s(7),y(e)){let o=H(this),i=ef(o,e,void 0),a=!0;try{n=t(i),a=!1}finally{a?Y(o):K(o)}return J(o,r),q(n,o)}if(e&&A(e))s(1,e);else{if(void 0===(n=t(e))&&(n=e),n===o&&(n=void 0),this.autoFreeze_&&C(n,!0),r){let t=[],o=[];W(j).generateReplacementPatches_(e,n,{patches_:t,inversePatches_:o}),r(t,o)}return n}},this.produceWithPatches=(e,t)=>{let r,n;return P(e)?(t,...r)=>this.produceWithPatches(t,t=>e(t,...r)):[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},k(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),k(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),k(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){var t;y(e)||s(8),m(e)&&(m(t=e)||s(10,t),e=function e(t){let r;if(!y(t)||z(t))return t;let n=t[a],o=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=M(t,n.scope_.immer_.useStrictShallowCopy_),o=n.scope_.immer_.shouldUseStrictIteration()}else r=M(t,!0);return S(r,(t,n)=>{T(r,t,e(n))},o),n&&(n.finalized_=!1),r}(t));let r=H(this),n=ef(r,e,void 0);return n[a].isManual_=!0,K(r),n}finishDraft(e,t){let r=e&&e[a];r&&r.isManual_||s(9);let{scope_:n}=r;return J(n,t),q(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=W(j).applyPatches_;return m(e)?n(e,t):this.produce(e,e=>n(e,t))}}().produce},45007:function(e,t,r){"use strict";r.d(t,{I0:function(){return d},oR:function(){return f},v9:function(){return p}});var n=r(67294),o=r(31103),i=Symbol.for("react-redux-context"),a="undefined"!=typeof globalThis?globalThis:{},s=function(){if(!n.createContext)return{};let e=a[i]??=new Map,t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}();function l(e=s){return function(){return n.useContext(e)}}var u=l();function c(e=s){let t=e===s?u:l(e),r=()=>{let{store:e}=t();return e};return Object.assign(r,{withTypes:()=>r}),r}var f=c(),d=function(e=s){let t=e===s?f:c(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}(),h=(e,t)=>e===t,p=function(e=s){let t=e===s?u:l(e),r=(e,r={})=>{let{equalityFn:i=h}="function"==typeof r?{equalityFn:r}:r,{store:a,subscription:s,getServerState:l}=t();n.useRef(!0);let u=n.useCallback({[e.name]:t=>e(t)}[e.name],[e]),c=(0,o.useSyncExternalStoreWithSelector)(s.addNestedSub,a.getState,l||a.getState,u,i);return n.useDebugValue(c),c};return Object.assign(r,{withTypes:()=>r}),r}()},65849:function(e,t,r){"use strict";r.d(t,{LG:function(){return i},qC:function(){return o}});var n=()=>Math.random().toString(36).substring(7).split("").join(".");function o(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function i(e){return function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}(e)&&"type"in e&&"string"==typeof e.type}n(),n(),()=>`@@redux/PROBE_UNKNOWN_ACTION${n()}`},19119:function(e,t,r){"use strict";r.d(t,{P1:function(){return w}});var n=e=>Array.isArray(e)?e:[e],o=0,i=class{revision=o;_value;_lastValue;_isEqual=a;constructor(e,t=a){this._value=this._lastValue=e,this._isEqual=t}get value(){return this._value}set value(e){this.value!==e&&(this._value=e,this.revision=++o)}};function a(e,t){return e===t}function s(e){return e instanceof i||console.warn("Not a valid cell! ",e),e.value}var l=(e,t)=>!1;function u(){return function(e,t=a){return new i(null,t)}(0,l)}var c=e=>{let t=e.collectionTag;null===t&&(t=e.collectionTag=u()),s(t)};Symbol();var f=0,d=Object.getPrototypeOf({}),h=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy(this,p);tag=u();tags={};children={};collectionTag=null;id=f++},p={get:(e,t)=>(function(){let{value:r}=e,n=Reflect.get(r,t);if("symbol"==typeof t||t in d)return n;if("object"==typeof n&&null!==n){let r=e.children[t];return void 0===r&&(r=e.children[t]=Array.isArray(n)?new g(n):new h(n)),r.tag&&s(r.tag),r.proxy}{let r=e.tags[t];return void 0===r&&((r=e.tags[t]=u()).value=n),s(r),n}})(),ownKeys:e=>(c(e),Reflect.ownKeys(e.value)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e.value,t),has:(e,t)=>Reflect.has(e.value,t)},g=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy([this],m);tag=u();tags={};children={};collectionTag=null;id=f++},m={get:([e],t)=>("length"===t&&c(e),p.get(e,t)),ownKeys:([e])=>p.ownKeys(e),getOwnPropertyDescriptor:([e],t)=>p.getOwnPropertyDescriptor(e,t),has:([e],t)=>p.has(e,t)},y="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function b(){return{s:0,v:void 0,o:null,p:null}}function _(e,t={}){let r,n=b(),{resultEqualityCheck:o}=t,i=0;function a(){let t,a=n,{length:s}=arguments;for(let e=0;e<s;e++){let t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=a.o;null===e&&(a.o=e=new WeakMap);let r=e.get(t);void 0===r?(a=b(),e.set(t,a)):a=r}else{let e=a.p;null===e&&(a.p=e=new Map);let r=e.get(t);void 0===r?(a=b(),e.set(t,a)):a=r}}let l=a;if(1===a.s)t=a.v;else if(t=e.apply(null,arguments),i++,o){let e=r?.deref?.()??r;null!=e&&o(e,t)&&(t=e,0!==i&&i--),r="object"==typeof t&&null!==t||"function"==typeof t?new y(t):t}return l.s=1,l.v=t,t}return a.clearCache=()=>{n=b(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}var w=function(e,...t){let r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,o=(...e)=>{let t,o=0,i=0,a={},s=e.pop();"object"==typeof s&&(a=s,s=e.pop()),function(e,t=`expected a function, instead received ${typeof e}`){if("function"!=typeof e)throw TypeError(t)}(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);let{memoize:l,memoizeOptions:u=[],argsMemoize:c=_,argsMemoizeOptions:f=[],devModeChecks:d={}}={...r,...a},h=n(u),p=n(f),g=function(e){let t=Array.isArray(e[0])?e[0]:e;return!function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){let r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),m=l(function(){return o++,s.apply(null,arguments)},...h);return Object.assign(c(function(){i++;let e=function(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}(g,arguments);return t=m.apply(null,e)},...p),{resultFunc:s,memoizedResultFunc:m,dependencies:g,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:l,argsMemoize:c})};return Object.assign(o,{withTypes:()=>o}),o}(_),S=Object.assign((e,t=w)=>{!function(e,t=`expected an object, instead received ${typeof e}`){if("object"!=typeof e)throw TypeError(t)}(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e);return t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}))},{withTypes:()=>S})}}]);