"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{2283:function(e,t,r){r.d(t,{D_:function(){return D},Hz:function(){return P},QA:function(){return x},QZ:function(){return I},Xz:function(){return q},cf:function(){return w},hi:function(){return d},l:function(){return k},uX:function(){return C},zr:function(){return Z}});var n=r(5673),s=r(848),i=r(1677),l=r(1866),a=r(611),o=r(1546),c=r(8737);let u=async(e,t,r)=>{let s=t.getState().backend.url,i=(0,n.ni)({baseUrl:null!=s?s:void 0});return i(e,t,r)},d=(0,s.LC)({reducerPath:"api",baseQuery:u,tagTypes:[i.Fj.BackendSpecific,i.Fj.SearchResults],endpoints:e=>({getCards:e.query({query:e=>({url:"2/cards/",method:"POST",body:{card_identifiers:JSON.stringify(e)}}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.results}),getCardbacks:e.query({query:()=>({url:"2/cardbacks/",method:"GET"}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.cardbacks}),search:e.query({query:e=>({url:"2/searchResults/",method:"POST",body:JSON.stringify({searchSettings:e.searchSettings,queries:Array.from(e.queries)})}),providesTags:[i.Fj.BackendSpecific,i.Fj.SearchResults],transformResponse:(e,t,r)=>e.results}),getSources:e.query({query:()=>({url:"2/sources/",method:"GET"}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.results}),getImportSites:e.query({query:()=>({url:"2/importSites/",method:"GET"}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.import_sites}),queryImportSite:e.query({query:e=>({url:"2/importSiteDecklist/",method:"POST",body:JSON.stringify({url:e})}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.cards}),getDFCPairs:e.query({query:()=>({url:"2/DFCPairs/",method:"GET"}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>Object.fromEntries(Object.keys(e.dfc_pairs).map(t=>[(0,a.dG)(t),(0,a.dG)(e.dfc_pairs[t])]))}),getSampleCards:e.query({query:()=>({url:"2/sampleCards/",method:"GET"}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.cards}),getContributions:e.query({query:()=>({url:"2/contributions/",method:"GET"}),providesTags:[i.Fj.BackendSpecific]}),getBackendInfo:e.query({query:()=>({url:"2/info/",method:"GET"}),providesTags:[i.Fj.BackendSpecific],transformResponse:(e,t,r)=>e.info}),getGoogleDriveImage:e.query({query:e=>({url:i._g,method:"GET",params:{id:e},responseHandler:"text"}),keepUnusedDataFor:1})})}),{useGetCardsQuery:f,useGetCardbacksQuery:m,useSearchQuery:h,useGetSourcesQuery:p,useGetImportSitesQuery:y,useQueryImportSiteQuery:g,useGetDFCPairsQuery:b,useGetSampleCardsQuery:v,useGetContributionsQuery:S,useGetBackendInfoQuery:j}=d;function x(){let e=(0,o.CG)(c.If);return y(void 0,{skip:null==e})}function k(){let e=(0,o.CG)(c.If);return b(void 0,{skip:null==e})}function w(){let e=(0,o.CG)(c.If);return v(void 0,{skip:null==e})}function I(){let e=(0,o.CG)(c.If);return S(void 0,{skip:null==e})}function Z(){let e=(0,o.CG)(c.If);return j(void 0,{skip:null==e})}async function q(e,t){let r=await fetch((0,a.X8)(e,"/2/cards/"),{method:"POST",body:JSON.stringify({card_identifiers:Array.from(t)}),credentials:"same-origin",headers:(0,l.ho)()}),n=await r.json();return n.results}async function C(e){let t=await fetch((0,a.X8)(e,"/2/cardbacks/"),{method:"GET",credentials:"same-origin",headers:(0,l.ho)()}),r=await t.json();return r.cardbacks}async function D(e,t,r){let n=await fetch((0,a.X8)(e,"/2/searchResults/"),{method:"POST",body:JSON.stringify({searchSettings:t,queries:Array.from(r)}),credentials:"same-origin",headers:(0,l.ho)()}),s=await n.json();return s.results}async function P(e){let t=await fetch((0,a.X8)(e,"/2/sources/"),{method:"GET",credentials:"same-origin",headers:(0,l.ho)()}),r=await t.json();return r.results}},1677:function(e,t,r){var n,s;r.d(t,{A0:function(){return d},B4:function(){return b},B9:function(){return Z},Ds:function(){return T},Em:function(){return P},Fj:function(){return n},Fo:function(){return l},M0:function(){return g},Ni:function(){return m},Nu:function(){return B},Ox:function(){return w},P$:function(){return h},WU:function(){return u},Wn:function(){return R},Zb:function(){return o},_g:function(){return O},bD:function(){return I},dt:function(){return c},eJ:function(){return y},gx:function(){return k},i6:function(){return p},kw:function(){return D},lq:function(){return G},mo:function(){return S},nS:function(){return q},qY:function(){return f},sL:function(){return x},tm:function(){return v},vV:function(){return i},vs:function(){return a},xk:function(){return j},yl:function(){return C}});let i="MPC Autofill",l="MakePlayingCards.com",a="https://www.makeplayingcards.com",o="CARD",c="CARDBACK",u="TOKEN",d="@",f=":",m={"":o,b:c,t:u},h=Object.fromEntries(Object.keys(m).map(e=>[m[e],e.length>0?e+f:e])),p="front",y="back",g="|",b=38,v=50,S=40,j=1200,x=0,k=1500,w=50,I=30,Z=1,q="csrftoken",C="searchSettings",D="googleAnalyticsConsent",P="backendURL",T=[18,36,55,72,90,108,126,144,162,180,198,216,234,396,504,612],R=T[T.length-1];(s=n||(n={})).BackendSpecific="backendSpecific",s.SearchResults="searchResults";let _="(S30) Standard Smooth",N="(S33) Superior Smooth",E="(M31) Linen",F="(P10) Plastic",B=[_,N,E,F],G={[_]:!0,[N]:!0,[E]:!0,[F]:!1},O="https://script.google.com/macros/s/AKfycbw8laScKBfxda2Wb0g63gkYDBdy8NWNxINoC4xDOwnCQ3JMFdruam1MdmNmN4wI5k4/exec"},1866:function(e,t,r){r.d(t,{j:function(){return g},ho:function(){return u},_m:function(){return m},Vs:function(){return p},cI:function(){return d},Y9:function(){return h},IT:function(){return y},Wm:function(){return f}});var n=r(6533),s=r.n(n),i=r(1955),l=r(1677),a=JSON.parse('{"$schema":"https://json-schema.org/draft/2019-09/schema","$id":"search_setting.json","title":"Search Settings","type":"object","properties":{"searchTypeSettings":{"$id":"search_type_settings","title":"Search Type Settings","type":"object","properties":{"fuzzySearch":{"description":"Whether fuzzy search is enabled","type":"boolean"}},"required":["fuzzySearch"],"additionalProperties":false},"sourceSettings":{"$id":"source_settings","title":"Source Settings","type":"object","properties":{"sources":{"description":"The list of sources in the order they should be searched","type":["array","null"],"items":{"$id":"source_row","title":"Source Row","type":"array","items":[{"type":"number","description":"The source\'s primary key","minimum":0},{"type":"boolean","description":"Whether the source is enabled for searching"}],"minItems":2,"maxItems":2,"additionalProperties":false}}},"required":["sources"],"additionalProperties":false},"filterSettings":{"$id":"filter_settings","title":"Filter Settings","type":"object","properties":{"minimumDPI":{"type":"number","description":"The minimum DPI that cards must meet to be included in search results","minimum":0},"maximumDPI":{"type":"number","description":"The maximum DPI that cards can have to be included in search results","minimum":0},"maximumSize":{"type":"number","description":"The maximum filesize that cards can have to be included in search results","minimum":0}},"required":["minimumDPI","maximumDPI","maximumSize"],"additionalProperties":false}},"required":["searchTypeSettings","sourceSettings","filterSettings"],"additionalProperties":false}'),o=r.t(a,2);let c=new(s());function u(){let e=i.Z.get(l.nS);if(null!=e)return{"X-CSRFToken":e}}function d(e){var t,r;let n=JSON.parse(null!==(t=localStorage.getItem(l.yl))&&void 0!==t?t:"{}"),s=c.compile(o),i=s(n);if(!i)return{searchTypeSettings:{fuzzySearch:!1},sourceSettings:{sources:Object.values(e).map(e=>[e.pk,!0])},filterSettings:{minimumDPI:l.sL,maximumDPI:l.gx,maximumSize:l.bD}};{let t=new Set(Object.values(e).map(e=>e.pk)),s=null!==(r=n.sourceSettings.sources)&&void 0!==r?r:[],i=new Set(s.map(e=>e[0]));return n.sourceSettings.sources=s.filter(e=>t.has(e[0])).concat(Array.from(t).filter(e=>!i.has(e)).map(e=>[e,!0])),n}}function f(e){localStorage.setItem(l.yl,JSON.stringify(e))}function m(){let e=i.Z.get(l.kw);return void 0!=e?!0===JSON.parse(e):void 0}function h(e){i.Z.set(l.kw,JSON.stringify(e),{expires:365,sameSite:"strict"})}function p(){return localStorage.getItem(l.Em)}function y(e){localStorage.setItem(l.Em,e)}function g(){localStorage.removeItem(l.Em)}},611:function(e,t,r){r.d(t,{DE:function(){return f},GL:function(){return l},X8:function(){return m},XV:function(){return o},dG:function(){return a},jg:function(){return h},l_:function(){return c},ts:function(){return u},wt:function(){return d}});var n=r(9742),s=r(1677);function i(e){return e.replaceAll(/ +(?= )/g,"").trim()}function l(e){return i(e.replaceAll(/[([].*?[)\]]/g,""))}function a(e){return i(e.toLowerCase().trim().replace(/[~`!@#$%^&*(){}\[\];:"'<,.>?/\\|_+=]/g,""))}function o(e){for(let[t,r]of Object.entries(s.Ni))if(""!==t&&e.trimStart().toLowerCase().startsWith("".concat(t).concat(s.qY)))return{query:a(e.trimStart().slice(t.length+1)),card_type:r};return{query:a(e),card_type:s.Ni[""]}}function c(e,t){let r=[];return e.forEach(e=>{if(null!=e&&e.trim().length>0){let[n,i,l]=function(e,t){var r,n,i,l;let a,c;let[u,d,f]=function(e){var t;let r=e.replace(/\s+/g," ").trim(),n=RegExp("^(?:([0-9]*)?[xX]?\\s?(.*?)(?:".concat(s.A0,"([A-z0-9_\\-]*))?)?(?:(?:\\s*)").concat("\\"+s.M0,"(?:\\s*)(.+?)(?:").concat(s.A0,"([A-z0-9_\\-]*))?)?$"),"gm"),i=n.exec(r);return null==i?[0,null,null]:[parseInt(null!==(t=i[1])&&void 0!==t?t:"1"),[i[2],i[3]],[i[4],i[5]]]}(e),m=null;null!=d&&(null!==(r=d[0])&&void 0!==r?r:"").length>0&&(m=o(d[0]),a=null!==(n=d[1])&&void 0!==n?n:void 0);let h=null;return null!=f&&(null!==(i=f[0])&&void 0!==i?i:"").length>0?(h=o(f[0]),c=null!==(l=f[1])&&void 0!==l?l:void 0):null!=m&&(null==m?void 0:m.query)!=null&&m.query in t&&(h={query:t[m.query],card_type:s.Zb}),[u,null!=m?{query:m,selectedImage:a,selected:!1}:null,null!=h?{query:h,selectedImage:c,selected:!1}:null]}(e,t);n>0&&(null!=i||null!=l)&&r.push([n,i,l])}}),r}function u(e,t){return c(e.split(/\r?\n|\r|\n/g),t)}function d(e,t){let r=[];for(let[n,i,l]of e){let e=Math.min(n,s.Wn-(t+r.length));if((null!=i||null!=l)&&t+(r=[...r,...Array(e).fill({front:{query:null==i?void 0:i.query,selectedImage:null==i?void 0:i.selectedImage,selected:!1},back:{query:null==l?void 0:l.query,selectedImage:null==l?void 0:l.selectedImage,selected:!1}})]).length>=s.Wn)break}return r}function f(e){var t;let r=[...e.matchAll(/^(https?:\/\/)?(.*?)(?:\/.*)?$/gm)][0];return(null!==(t=r[1])&&void 0!==t?t:"https://")+r[2]}function m(e,t){return e+t}function h(e){return new Blob([(0,n.b$)(e)])}},1546:function(e,t,r){r.d(t,{CG:function(){return l},TL:function(){return i},as:function(){return a}});var n=r(1876),s=r(2664);let i=s.I0,l=s.v9,a=n.hg.withTypes()},8737:function(e,t,r){r.d(t,{If:function(){return a},LW:function(){return l},jb:function(){return i}});var n=r(1876);let s=(0,n.oM)({name:"backend",initialState:{url:null},reducers:{setURL:(e,t)=>{e.url=t.payload},clearURL:e=>{e.url=null}}}),{setURL:i,clearURL:l}=s.actions;t.ZP=s.reducer;let a=e=>e.backend.url},3152:function(e,t,r){r.d(t,{xu:function(){return l}});var n=r(1876),s=r(2283),i=r(1546);let l=(0,i.as)("cardbacks/fetchCardbacks",async(e,t)=>{let r=t.getState(),n=r.backend.url;return null!=n?(0,s.uX)(n):null}),a=(0,n.oM)({name:"cardbacks",initialState:{cardbacks:[],status:"idle",error:null},reducers:{addCardbackDocuments:(e,t)=>{e.cardbacks=[...t.payload]}},extraReducers(e){e.addCase(l.pending,(e,t)=>{e.status="loading"}).addCase(l.fulfilled,(e,t)=>{null!=t.payload?(e.status="succeeded",e.cardbacks=[...t.payload]):e.status="failed"}).addCase(l.rejected,(e,t)=>{e.status="failed",e.error=""})}});t.ZP=a.reducer},5688:function(e,t,r){r.d(t,{GG:function(){return l},HU:function(){return a},Mc:function(){return o},uR:function(){return c}});var n=r(1876),s=r(1677);let i=(0,n.oM)({name:"finishSettings",initialState:{cardstock:"(S30) Standard Smooth",foil:!1},reducers:{setCardstock:(e,t)=>{e.cardstock=t.payload,s.lq[t.payload]||(e.foil=!1)},setFoil:(e,t)=>{e.foil=!!s.lq[e.cardstock]&&t.payload},toggleFoil:e=>{e.foil=!!s.lq[e.cardstock]&&!e.foil}}}),l=e=>e.finishSettings,{setCardstock:a,setFoil:o,toggleFoil:c}=i.actions;t.ZP=i.reducer},1230:function(e,t,r){r.d(t,{HS:function(){return I},ND:function(){return b},NO:function(){return Z},NV:function(){return u},O$:function(){return k},Tx:function(){return g},Y:function(){return h},fP:function(){return w},mp:function(){return j},nZ:function(){return p},p4:function(){return m},pl:function(){return c},qP:function(){return y},qe:function(){return S},r7:function(){return x},sZ:function(){return f},uA:function(){return q},wH:function(){return o},zO:function(){return d}});var n=r(1876),s=r(1677),i=r(611);let l={members:[{front:{query:{query:"island",card_type:s.Zb},selectedImage:void 0,selected:!1},back:null},{front:{query:{query:"island",card_type:s.Zb},selectedImage:void 0,selected:!1},back:null},{front:{query:{query:"grim monolith",card_type:s.Zb},selectedImage:void 0,selected:!1},back:null},{front:{query:{query:"past in flames",card_type:s.Zb},selectedImage:void 0,selected:!1},back:null},{front:{query:{query:"necropotence",card_type:s.Zb},selectedImage:void 0,selected:!1},back:null}],cardback:null},a=(0,n.oM)({name:"project",initialState:l,reducers:{setSelectedImage:(e,t)=>{null==e.members[t.payload.slot][t.payload.face]?e.members[t.payload.slot][t.payload.face]={query:{query:null,card_type:s.Zb},selectedImage:t.payload.selectedImage,selected:!1}:e.members[t.payload.slot][t.payload.face].selectedImage=t.payload.selectedImage},bulkReplaceSelectedImage:(e,t)=>{let r=new Set;for(let[n,s]of e.members.entries())null!=s[t.payload.face]&&s[t.payload.face].selectedImage===t.payload.currentImage&&r.add(n);for(let n of r)null==e.members[n][t.payload.face]?e.members[n][t.payload.face]={query:{query:null,card_type:s.Zb},selectedImage:t.payload.selectedImage,selected:!1}:e.members[n][t.payload.face].selectedImage=t.payload.selectedImage},bulkSetSelectedImage:(e,t)=>{for(let[r,n]of t.payload.slots)null==e.members[n][r]?e.members[n][r]={query:{query:null,card_type:s.Zb},selectedImage:t.payload.selectedImage,selected:!1}:(e.members[n][r].selectedImage=t.payload.selectedImage,e.members[n][r].selected=!1)},setQuery:(e,t)=>{let r=(0,i.XV)(t.payload.query);null==e.members[t.payload.slot][t.payload.face]?e.members[t.payload.slot][t.payload.face]={query:r,selectedImage:void 0,selected:!1}:e.members[t.payload.slot][t.payload.face].query=r},bulkSetQuery:(e,t)=>{let r=(0,i.XV)(t.payload.query);for(let[n,s]of t.payload.slots)null==e.members[s][n]?e.members[s][n]={query:r,selectedImage:void 0,selected:!1}:(e.members[s][n].query=r,e.members[s][n].selected=!1)},setSelectedCardback:(e,t)=>{e.cardback=t.payload.selectedImage},addMembers:(e,t)=>{e.members=[...e.members,...t.payload.members.slice(0,s.Wn-e.members.length)]},toggleMemberSelection:(e,t)=>{var r;null!=(null!==(r=e.members[t.payload.slot])&&void 0!==r?r:{})[t.payload.face]&&(e.members[t.payload.slot][t.payload.face].selected=!e.members[t.payload.slot][t.payload.face].selected)},bulkSetMemberSelection:(e,t)=>{for(let[r,n]of t.payload.slots)null==e.members[n][r]?e.members[n][r]={query:{query:null,card_type:s.Zb},selectedImage:void 0,selected:t.payload.selectedStatus}:e.members[n][r].selected=t.payload.selectedStatus},bulkAlignMemberSelection:(e,t)=>{var r,n,s;let i=(null!==(r=e.members[t.payload.slot])&&void 0!==r?r:{})[t.payload.face];if(null!=i)for(let[r,l]of e.members.entries())null!=l[t.payload.face]&&(null===(n=l[t.payload.face].query)||void 0===n?void 0:n.query)===i.query.query&&(null===(s=l[t.payload.face].query)||void 0===s?void 0:s.card_type)===i.query.card_type&&(l[t.payload.face].selected=i.selected)},deleteSlot:(e,t)=>{e.members.splice(t.payload.slot,1)},bulkDeleteSlots:(e,t)=>{t.payload.slots.sort(function(e,t){return t-e}).forEach(function(t){e.members.splice(t,1)})}}}),o=e=>e.project.members,c=e=>new Set(e.project.members.flatMap(e=>{var t,r;return((null===(t=e.front)||void 0===t?void 0:t.selectedImage)!=null?[e.front.selectedImage]:[]).concat((null===(r=e.back)||void 0===r?void 0:r.selectedImage)!=null?[e.back.selectedImage]:[])})),u=e=>e.project.members.flatMap((e,t)=>{var r,n;return((null===(r=e.front)||void 0===r?void 0:r.selected)===!0?[[s.i6,t]]:[]).concat((null===(n=e.back)||void 0===n?void 0:n.selected)===!0?[[s.eJ,t]]:[])}),d=e=>e.project.members.length,f=e=>e.project.cardback,m=e=>{let t=new Set;for(let n of e.project.members)for(let e of[s.i6,s.eJ]){var r;let s=null===(r=n[e])||void 0===r?void 0:r.selectedImage;null!=s&&t.add(s)}let n=e.cardDocuments.cardDocuments;return Array.from(t).reduce((e,t)=>{var r;return e+(null!==(r=n[t])&&void 0!==r?r:{size:0}).size},0)},h=e=>{let t=new Set(e.cardbacks.cardbacks);for(let l of e.project.members)for(let a of[s.i6,s.eJ]){var r,n,i;let s=l[a];(null==s?void 0:null===(r=s.query)||void 0===r?void 0:r.query)!=null&&(null!==(i=(null!==(n=e.searchResults.searchResults[s.query.query])&&void 0!==n?n:{})[s.query.card_type])&&void 0!==i?i:[]).length>0&&e.searchResults.searchResults[s.query.query][s.query.card_type].forEach(e=>t.add(e))}return t},p=e=>{let t=[];for(let i of e.project.members)for(let l of[s.i6,s.eJ]){var r,n;let s=i[l];(null==s?void 0:null===(r=s.query)||void 0===r?void 0:r.query)!=null&&null==(null!==(n=e.searchResults.searchResults[s.query.query])&&void 0!==n?n:{})[s.query.card_type]&&t.push(s.query)}return t},{setSelectedImage:y,bulkReplaceSelectedImage:g,bulkSetSelectedImage:b,setQuery:v,bulkSetQuery:S,setSelectedCardback:j,addMembers:x,toggleMemberSelection:k,bulkSetMemberSelection:w,bulkAlignMemberSelection:I,deleteSlot:Z,bulkDeleteSlots:q}=a.actions;t.ZP=a.reducer},7088:function(e,t,r){r.d(t,{U9:function(){return c}});var n=r(1876),s=r(2283),i=r(1546),l=r(3152),a=r(1230),o=r(5713);let c=(0,i.as)("cardDocuments/fetchCardDocuments",async(e,t)=>{await t.dispatch((0,o.IA)()),await t.dispatch((0,l.xu)());let r=t.getState(),n=(0,a.Y)(r),i=new Set(Object.keys(r.cardDocuments.cardDocuments)),c=new Set(Array.from(n).filter(e=>!i.has(e))),u=r.backend.url;if(c.size>0&&null!=u)return(0,s.Xz)(u,c)}),u=(0,n.oM)({name:"cardDocuments",initialState:{cardDocuments:{},status:"idle",error:null},reducers:{addCardDocuments:(e,t)=>{e.cardDocuments={...e.cardDocuments,...t.payload}}},extraReducers(e){e.addCase(c.pending,(e,t)=>{e.status="loading"}).addCase(c.fulfilled,(e,t)=>{e.status="succeeded",e.cardDocuments={...e.cardDocuments,...t.payload}}).addCase(c.rejected,(e,t)=>{e.status="failed",e.error=""})}});t.ZP=u.reducer},5713:function(e,t,r){r.d(t,{IA:function(){return a},Ug:function(){return u}});var n=r(1876),s=r(2283),i=r(1546),l=r(1230);let a=(0,i.as)("searchResults/fetchCards",async(e,t)=>{let r=t.getState(),n=(0,l.nZ)(r),i=r.backend.url;return n.length>0&&null!=i?(0,s.D_)(i,r.searchSettings,n):null}),o=(0,n.oM)({name:"searchResults",initialState:{searchResults:{},status:"idle",error:null},reducers:{addSearchResults:(e,t)=>{e.searchResults={...e.searchResults,...t.payload}},clearSearchResults:e=>{e.searchResults={}}},extraReducers(e){e.addCase(a.fulfilled,(e,t)=>{e.searchResults={...e.searchResults,...t.payload}}),e.addCase(a.rejected,(e,t)=>{alert("fetching cards broke")})}}),{addSearchResults:c,clearSearchResults:u}=o.actions;t.ZP=o.reducer},5582:function(e,t,r){r.d(t,{$:function(){return l},TK:function(){return o}});var n=r(1876),s=r(2283),i=r(1546);let l=(0,i.as)("sourceDocuments/fetchSourceDocuments",async(e,t)=>{let r=t.getState();return null!=r.backend.url?(0,s.Hz)(r.backend.url):null}),a=(0,n.oM)({name:"sourceDocuments",initialState:{sourceDocuments:void 0},reducers:{addSourceDocuments:(e,t)=>{e.sourceDocuments={...e.sourceDocuments,...t.payload}}},extraReducers(e){e.addCase(l.fulfilled,(e,t)=>{null!=t.payload&&(e.sourceDocuments={...e.sourceDocuments,...t.payload})}),e.addCase(l.rejected,(e,t)=>{alert("fetching sources broke")})}});t.ZP=a.reducer;let o=e=>e.sourceDocuments.sourceDocuments},5749:function(e,t,r){r.d(t,{Fg:function(){return a},Ph:function(){return o},_E:function(){return c},xN:function(){return u}});var n=r(1876),s=r(1677);let i={searchTypeSettings:{fuzzySearch:!1},sourceSettings:{sources:null},filterSettings:{minimumDPI:s.sL,maximumDPI:s.gx,maximumSize:s.bD}},l=(0,n.oM)({name:"searchSettings",initialState:i,reducers:{setSearchTypeSettings:(e,t)=>{e.searchTypeSettings=t.payload},setSourceSettings:(e,t)=>{e.sourceSettings=t.payload},setFilterSettings:(e,t)=>{e.filterSettings=t.payload}}}),{setSearchTypeSettings:a,setSourceSettings:o,setFilterSettings:c}=l.actions;t.ZP=l.reducer;let u=e=>e.searchSettings},1110:function(e,t,r){var n=r(5893),s=r(5152),i=r.n(s),l=r(7294);let a=e=>(0,n.jsx)(l.Fragment,{children:e.children});t.Z=i()(()=>Promise.resolve(a),{ssr:!1})},4353:function(e,t,r){r.d(t,{Z:function(){return ej}});var n,s,i=r(7297),l=r(5893),a=r(1163),o=r(4304),c=r(7294),u=r(682),d=r(3559),f=r(2664),m=r(9521),h=r(8356),p=r(1876),y=r(2283),g=r(8737),b=r(3152),v=r(5688),S=r(1230),j=r(7088),x=r(5713),k=r(5582),w=r(5749),I=r(5384);let Z=(0,h.UY)({[y.hi.reducerPath]:y.hi.reducer,viewSettings:I.ZP,finishSettings:v.ZP,searchSettings:w.ZP,searchResults:x.ZP,cardDocuments:j.ZP,cardbacks:b.ZP,sourceDocuments:k.ZP,project:S.ZP,backend:g.ZP}),q=(0,p.xC)({reducer:Z,preloadedState:void 0,middleware:e=>e().concat([y.hi.middleware])});var C=r(1677),D=r(1866),P=r(611),T=r(1664),R=r.n(T),_=r(7104),N=r(1555),E=r(4051),F=r(8331),B=r(2021),G=r(1110);function O(){let e=(0,D._m)(),[t,r]=(0,c.useState)(!1),n=()=>{(0,D.Y9)(!0),r(!0)},s=()=>{(0,D.Y9)(!1),r(!0)};return(0,l.jsxs)(F.Z,{show:void 0==e&&!t,delay:3e3,animation:!0,children:[(0,l.jsx)(F.Z.Header,{closeButton:!1,children:(0,l.jsx)("strong",{className:"me-auto",children:"Cookie Usage"})}),(0,l.jsxs)(F.Z.Body,{children:[(0,l.jsxs)("p",{children:[C.vV," uses cookies for remembering your search settings, and for collecting analytics data to help improve the site. Your data is never shared with anyone. Would you like to opt out of analytics cookies?"]}),(0,l.jsxs)("p",{children:["View our privacy policy ",(0,l.jsx)(R(),{href:"/about",children:"here"}),"."]}),(0,l.jsx)("div",{className:"mt-2 pt-2 border-top",children:(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(N.Z,{className:"d-grid gap-0",children:(0,l.jsx)(_.Z,{variant:"outline-info",size:"sm",onClick:s,children:"Opt out"})}),(0,l.jsx)(N.Z,{className:"d-grid gap-0",children:(0,l.jsx)(_.Z,{variant:"primary",size:"sm",onClick:n,children:"That's fine!"})})]})})]})]})}function z(){return(0,l.jsx)(G.Z,{children:(0,l.jsx)(B.Z,{position:"top-start",children:(0,l.jsx)(O,{})})})}var A=r(5675),V=r.n(A),M=r(1451),L=r(9126),U=r(4214),W=r(5276),Q=r.n(W),$=r(8375),H=r(7346),J=r(4874);r(1351),(n=s||(s={})).IN_PROGRESS="record-circle-fill",n.SUCCEEDED="check-circle-fill",n.FAILED="x-circle-fill";let X=["Validating URL","Pinging server","Checking search engine health"];function Y(e){let t=!1;try{new URL(e),t=!0}catch(e){}return t}async function K(e){let t=!1;try{let r=new(Q());await r.ping(e,function(e,r){t=null==e})}catch(e){}return t}async function ee(e){let t=!1;try{await fetch(new URL("2/searchEngineHealth/",e).toString(),{method:"GET",mode:"cors"}).then(e=>e.json()).then(e=>{var r;t=!0===(null!==(r=e.online)&&void 0!==r&&r)})}catch(e){}return t}function et(e){var t;let{show:r,handleClose:n}=e,i=(0,f.I0)(),[a,o]=(0,c.useState)([]),[u,d]=(0,c.useState)(!1),m=(0,f.v9)(g.If),h=()=>{i((0,g.LW)()),(0,D.j)(),i(y.hi.util.invalidateTags([C.Fj.BackendSpecific])),o([])},[p,b]=(0,c.useState)(""),v=async e=>{e.preventDefault(),d(!0);let t=(0,P.DE)(p.trim()),r=[];for(let e of(o(r),[Y,K,ee])){r.push(s.IN_PROGRESS),o(r);let n=await e(t);if(o(r=[...r.slice(0,-1),n?s.SUCCEEDED:s.FAILED]),!n)break}r.every(e=>e===s.SUCCEEDED)&&(i((0,g.jb)(t)),(0,D.IT)(t),i(y.hi.util.invalidateTags([C.Fj.BackendSpecific])),b("")),d(!1)};return(0,c.useEffect)(()=>{let e=(0,D.Vs)();void 0!=e&&(i((0,g.jb)(e)),i(y.hi.util.invalidateTags([C.Fj.BackendSpecific])))},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(J.Z,{show:r,onHide:n,children:[(0,l.jsx)(J.Z.Header,{closeButton:!0,children:(0,l.jsx)(J.Z.Title,{children:"Configure Server"})}),(0,l.jsxs)(J.Z.Body,{children:[null!=m&&(0,l.jsxs)($.Z,{variant:"success",children:["You're currently connected to ",(0,l.jsx)("b",{children:m}),".",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(_.Z,{variant:"danger",onClick:h,children:"Disconnect"})]}),"Enter the URL of the server you'd like to connect ",C.vV," ","to and hit ",(0,l.jsx)("b",{children:"Submit"}),".",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)(H.Z,{onSubmit:v,children:[(0,l.jsx)(H.Z.Group,{className:"mb-3",controlId:"formURL",children:(0,l.jsx)(H.Z.Control,{type:"url",placeholder:"https://",onChange:e=>b(e.target.value),value:p,disabled:u})}),a.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("hr",{}),(0,l.jsx)("ul",{children:X.map((e,r)=>(0,l.jsxs)("li",{children:[(0,l.jsx)("i",{className:"bi bi-".concat(null!==(t=a[r])&&void 0!==t?t:"circle")})," ",e,a[r]===s.IN_PROGRESS&&"..."]},e))}),(0,l.jsx)("hr",{})]}),(0,l.jsx)(_.Z,{variant:"primary",type:"submit",disabled:u||0==p.trim().length,children:"Submit"})]})]})]})})}var er=r(6212),en=r(5305);function es(e){var t,r,n,s;let{show:i,handleClose:a}=e,o=(0,y.zr)();return(0,l.jsxs)(er.Z,{show:i,onHide:a,children:[(0,l.jsx)(er.Z.Header,{closeButton:!0,children:(0,l.jsxs)(er.Z.Title,{children:["Support ",null!==(n=null===(t=o.data)||void 0===t?void 0:t.name)&&void 0!==n?n:"Your Server Manager"]})}),(0,l.jsx)(er.Z.Body,{children:(null==o?void 0:null===(r=o.data)||void 0===r?void 0:r.patreon)==null?(0,l.jsx)(en.$,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h4",{children:"Patron Tiers"}),Object.values(null!==(s=o.data.patreon.tiers)&&void 0!==s?s:{}).map(e=>(0,l.jsx)("h6",{children:(0,l.jsxs)("b",{children:[e.title," ($",e.usd," USD)"]})},"patreon-tier-".concat(e.title)))]})}),(0,l.jsx)(er.Z.Footer,{children:(0,l.jsx)(_.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}function ei(){return(0,l.jsx)("a",{href:"https://www.buymeacoffee.com/chilli.axe",target:"_blank",children:(0,l.jsx)(V(),{className:"mx-auto d-block",src:"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",alt:"Buy Me A Coffee",width:217,height:60})})}function el(e){let{show:t,handleClose:r}=e;return(0,l.jsxs)(er.Z,{show:t,onHide:r,children:[(0,l.jsx)(er.Z.Header,{closeButton:!0,children:(0,l.jsx)(er.Z.Title,{children:"Support the Developer"})}),(0,l.jsxs)(er.Z.Body,{children:[(0,l.jsx)("h4",{children:"A bit about me"}),(0,l.jsxs)("p",{children:["Hey there! Thanks for checking out ",C.vV,". I'm Nick, the creator and primary developer of this project."]}),(0,l.jsxs)("p",{children:["I'm responsible for this website, the code that image repository servers run on, and the desktop tool that automates"," ",(0,l.jsx)("a",{href:C.vs,target:"_blank",children:C.Fo}),"."]}),(0,l.jsxs)("p",{children:["I started developing ",C.vV," in early 2020 while I was in uni to simplify how the tabletop gaming community shares its MPC print-ready images — at the time, we were manually browsing through Google Drives to find cards we wanted to print and dragging & dropping them into MPC."]}),(0,l.jsxs)("p",{children:["These days, I'm working full-time and continuing to develop"," ",C.vV," by night, and I'm passionate about delivering the best print tooling I can to the tabletop gaming community."]}),(0,l.jsxs)("p",{children:[C.vV," is completely open source software (licensed under GPL-3) and all of its features will always be free."]}),(0,l.jsxs)("p",{children:["You can support my continued development of this project through"," ",(0,l.jsx)("i",{children:"Buy Me a Coffee"})," below ♥️"]}),(0,l.jsx)("h4",{children:"Where does my donation go?"}),(0,l.jsxs)("p",{children:["I don't host any ",C.vV," servers, just the website you're on right now — which GitHub allows me to host for free."]}),(0,l.jsx)("p",{children:"Any donation goes towards:"}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Fuelling my coffee addiction, and"}),(0,l.jsx)("li",{children:"Allowing me to spend more time developing and improving this project for you all. Several large features are in the pipeline that I'm excited to share when they're ready!"})]}),(0,l.jsx)("hr",{}),(0,l.jsx)(ei,{})]}),(0,l.jsx)(er.Z.Footer,{children:(0,l.jsx)(_.Z,{variant:"secondary",onClick:r,children:"Close"})})]})}function ea(){let e=(0,i.Z)(["\n  max-width: ","px;\n"]);return ea=function(){return e},e}function eo(){let e=(0,i.Z)(["\n  --bs-navbar-padding-y: 0px;\n"]);return eo=function(){return e},e}function ec(){let e=(0,i.Z)(["\n  font-weight: bold;\n"]);return ec=function(){return e},e}let eu=(0,m.ZP)(u.Z).withConfig({componentId:"sc-310135e0-0"})(ea(),C.xk),ed=(0,m.ZP)(L.Z).withConfig({componentId:"sc-310135e0-1"})(eo()),ef=(0,m.ZP)(L.Z.Collapse).withConfig({componentId:"sc-310135e0-2"})(ec());function em(){var e,t,r,n,s,i;let a=(0,f.v9)(g.If),o=(0,y.zr)(),[u,d]=(0,c.useState)(!1),[m,h]=(0,c.useState)(!1),[p,b]=(0,c.useState)(!1),v=()=>d(!1),S=()=>d(!0),j=()=>h(!1),x=()=>h(!0),k=()=>b(!1),w=()=>b(!0),I=null!==(s=o.isSuccess?null===(e=o.data)||void 0===e?void 0:e.name:null)&&void 0!==s?s:C.vV;return(0,l.jsxs)(G.Z,{children:[(0,l.jsx)(ed,{expand:"lg",fixed:"top",variant:"dark",bg:"primary",children:(0,l.jsxs)(eu,{className:"justify-content-center align-middle",children:[(0,l.jsxs)(L.Z.Brand,{href:"/",as:R(),children:[(0,l.jsx)(V(),{src:"/logolowres.png",alt:"logo",width:C.mo,height:C.mo})," ",(0,l.jsx)("span",{className:"align-middle",children:(0,l.jsx)("b",{children:I})})]}),(0,l.jsx)(L.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,l.jsxs)(ef,{id:"basic-navbar-nav",children:[(0,l.jsxs)(M.Z,{className:"me-auto",children:[null!=a&&(0,l.jsx)(M.Z.Link,{as:R(),href:"/editor",children:"Editor"}),null!=a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.Z.Link,{as:R(),href:"/new",children:"What's New?"}),(0,l.jsx)(M.Z.Link,{as:R(),href:"/contributions",children:"Contributions"})]}),(0,l.jsx)(M.Z.Link,{as:R(),href:"https://github.com/chilli-axe/mpc-autofill/wiki/Overview",target:"_blank",children:"Wiki"}),(0,l.jsx)(M.Z.Link,{href:"https://github.com/chilli-axe/mpc-autofill/releases/latest",target:"_blank",children:"Download"}),(0,l.jsxs)(U.Z,{title:"Donate",children:[(0,l.jsxs)(U.Z.Item,{onClick:x,children:[(0,l.jsx)("i",{className:"bi bi-code"})," Support the Developer"]}),(null===(t=o.data)||void 0===t?void 0:t.name)!=null&&(null!==(i=null===(r=o.data)||void 0===r?void 0:null===(n=r.patreon)||void 0===n?void 0:n.url)&&void 0!==i?i:"").trim().length>0&&(0,l.jsxs)(U.Z.Item,{onClick:w,children:[(0,l.jsx)("i",{className:"bi bi-server"})," Support"," ",o.data.name]})]})]}),(0,l.jsx)(M.Z,{className:"ms-auto d-flex",children:(0,l.jsx)(_.Z,{className:"my-xl-0 my-lg-0 my-md-2 my-sm-2 my-2",variant:"success",onClick:S,children:"Configure Server"})})]})]})}),(0,l.jsx)(et,{show:u,handleClose:v}),(0,l.jsx)(el,{show:m,handleClose:j}),(0,l.jsx)(es,{show:p,handleClose:k})]})}function eh(){let e=(0,i.Z)(["\n  overscroll-behavior: none;\n  overflow-x: hidden;\n  overflow-y: hidden; // https://stackoverflow.com/a/69589919/13021511\n"]);return eh=function(){return e},e}function ep(){let e=(0,i.Z)(["\n  top: ","px;\n  height: calc(\n    100vh - ","px\n  ); // for compatibility with older browsers\n  height: calc(100dvh - ","px); // handles the ios address bar\n  position: fixed;\n  overflow-y: scroll;\n  overflow-x: hidden;\n"]);return ep=function(){return e},e}function ey(){let e=(0,i.Z)(["\n  max-width: ","px;\n"]);return ey=function(){return e},e}function eg(){let e=(0,a.useRouter)(),{server:t}=e.query,r=null!=t&&"string"==typeof t&&t.length>0?(0,P.DE)(t.trim()):null,n=(0,f.I0)(),s=(0,f.v9)(g.If);return(0,c.useEffect)(()=>{null==s&&null!=r&&(n((0,g.jb)(r)),(0,D.IT)(r),null!=t&&"string"==typeof t&&t.length>0&&e.replace({server:t},void 0,{shallow:!0}))},[e.isReady,s,r,n]),(0,l.jsx)(l.Fragment,{})}let eb=(0,m.ZP)(f.zt).withConfig({componentId:"sc-8534e505-0"})(eh()),ev=(0,m.ZP)(u.Z).withConfig({componentId:"sc-8534e505-1"})(ep(),C.tm,C.tm,C.tm),eS=(0,m.ZP)(u.Z).withConfig({componentId:"sc-8534e505-2"})(ey(),C.xk);function ej(e){let{gutter:t=2,children:r}=e,n=(0,D._m)();return(0,l.jsxs)(l.Fragment,{children:[!0===n&&(0,l.jsx)(o.Wi,{trackPageViews:!0}),(0,l.jsx)(d.Z,{children:(0,l.jsxs)(eb,{store:q,children:[(0,l.jsx)(z,{}),(0,l.jsx)(eg,{}),(0,l.jsx)(em,{}),(0,l.jsx)(ev,{fluid:!0,className:"g-".concat(t),children:(0,l.jsx)(eS,{className:"g-".concat(t),children:r})})]})})]})}},5305:function(e,t,r){r.d(t,{$:function(){return u}});var n,s,i=r(7297),l=r(5893);r(7294);var a=r(9521);function o(){let e=(0,i.Z)(["\n  width: ","em;\n  height: ","em;\n"]);return o=function(){return e},e}let c=a.ZP.div.withConfig({componentId:"sc-ff15f3e1-0"})(o(),e=>null!==(n=e.size)&&void 0!==n?n:4,e=>null!==(s=e.size)&&void 0!==s?s:4);function u(e){let{size:t=4}=e;return(0,l.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,l.jsx)(c,{size:t,className:"spinner-border",role:"status",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}},5384:function(e,t,r){r.d(t,{$3:function(){return a},Mo:function(){return d},O6:function(){return o},X8:function(){return c},tC:function(){return u}});var n=r(1876);let s=(0,n.oM)({name:"viewSettings",initialState:{frontsVisible:!0,sourcesVisible:{},facetBySource:!0},reducers:{switchToFront:e=>{e.frontsVisible=!0},switchToBack:e=>{e.frontsVisible=!1},toggleFaces:e=>{e.frontsVisible=!e.frontsVisible},toggleSourceVisible:(e,t)=>{var r;e.sourcesVisible={...e.sourcesVisible,[t.payload]:!(null===(r=e.sourcesVisible[t.payload])||void 0===r||r)}},makeAllSourcesVisible:e=>{e.sourcesVisible={}},makeAllSourcesInvisible:(e,t)=>{e.sourcesVisible=Object.fromEntries(t.payload.map(e=>[e,!1]))},toggleFacetBySource:e=>{e.facetBySource=!e.facetBySource}}}),{switchToFront:i,switchToBack:l,toggleFaces:a,toggleSourceVisible:o,makeAllSourcesVisible:c,makeAllSourcesInvisible:u,toggleFacetBySource:d}=s.actions;t.ZP=s.reducer}}]);