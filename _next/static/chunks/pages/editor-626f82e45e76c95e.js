(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(8140)}])},6666:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var s=n(2692),r=n(5893),l=n(9521);function a(){let e=(0,s.Z)(["\n  position: absolute;\n  top: 50vh;\n  left: 50vw;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]);return a=function(){return e},e}function i(){let e=(0,s.Z)(["\n  font-size: 1.25em;\n"]);return i=function(){return e},e}let c=l.ZP.div.withConfig({componentId:"sc-2f488237-0"})(a()),o=l.ZP.p.withConfig({componentId:"sc-2f488237-1"})(i());function d(e){let{title:t,text:n}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)("h1",{children:t}),n.map((e,t)=>(0,r.jsx)(o,{children:e},t.toString()))]})}},5617:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var s=n(5893),r=n(1677),l=n(6666);function a(){return(0,s.jsx)(l.J,{title:"No Server Configured",text:["You haven't configured a server for ".concat(r.vV," to communicate with just yet"),"Click the Configure Server button in the top-right to get started!"]})}},8140:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e4}});var s=n(5893),r=n(9008),l=n.n(r),a=n(2692),i=n(7294),c=n(1555),o=n(4051),d=n(9521),h=n(1677),u=n(1546),x=n(8737),m=n(6212),j=n(7104),f=n(8208),g=n(9159),p=n(3152),b=n(6518),y=n(478),C=n(3389),v=n(7088),Z=n(5582),k=n(6898),w=n(5384);function N(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,sourceNamesByKey:r}=e;return(0,s.jsx)(o.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(t).map((e,t)=>{let[r,l]=e;return(0,s.jsx)(s.Fragment,{children:l.flatMap(e=>{let[t,r]=e;return(0,s.jsx)(g.LL,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(r+1),cardOnClick:()=>n(t),noResultsFound:!1},"gridSelector-".concat(t))})})})})}function I(e){var t,n;let{cardIdentifiersAndOptionNumbersBySource:r,selectImage:l,sourceNamesByKey:a}=e,i=(0,u.TL)(),c=(0,u.CG)(w.Hm);return(0,s.jsx)(s.Fragment,{children:Object.entries(r).map((e,r)=>{let[d,h]=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"sticky-top",onClick:()=>i((0,w.O6)(d)),style:{backgroundColor:"#4E5D6B",zIndex:r+100},children:[(0,s.jsx)("hr",{},"".concat(d,"-top-hr")),(0,s.jsxs)(y.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,s.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:a[d]},"".concat(d,"-header-title")),(0,s.jsxs)("h6",{className:"text-primary prevent-select",children:[h.length," version",1!=h.length&&"s"]}),(0,s.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(t=c[d])||void 0===t||t?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(d,"-collapse-header")},"".concat(d,"-arrow"))]},"".concat(d,"-header-inner"))]},"".concat(d,"-header")),(0,s.jsx)(b.Z,{in:null===(n=c[d])||void 0===n||n,"data-testid":"".concat(d,"-collapse"),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("hr",{},"".concat(d,"-bottom-hr")),(0,s.jsx)(o.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:h.map(e=>{let[t,n]=e;return(0,s.jsx)(g.LL,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:()=>l(t),noResultsFound:!1},"gridSelector-".concat(t))})},"".concat(d,"-row"))]})})]})})})}function S(e){let{testId:t,imageIdentifiers:n,show:r,handleClose:l,onClick:a}=e,d=(0,u.TL)(),x=(0,u.CG)(e=>(0,v.ek)(e,n)),f=(0,u.CG)(w.Mj),g=(0,i.useCallback)(e=>{a(e),l()},[a,l]),p=(0,u.CG)(Z.sn),b=Object.keys(p),y=(0,u.CG)(w.Ne),S=(0,i.useMemo)(()=>n.reduce((e,t,n)=>{let s=x[t];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([t,n])),e},{}),[x,n]);return(0,s.jsxs)(m.Z,{show:r,onHide:l,size:"lg","data-testid":t,children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Select Version"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(c.Z,{md:8,sm:6,children:(0,s.jsx)(C.ZP,{onClick:()=>d((0,w.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:f})}),f&&(0,s.jsx)(c.Z,{md:4,sm:6,children:(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(j.Z,{onClick:()=>d(y?(0,w.X8)():(0,w.tC)(b)),children:[(0,s.jsx)(k.V9,{bootstrapIconName:"arrows-".concat(y?"expand":"collapse")})," ",y?"Expand":"Collapse"," All"]})})})]}),(0,s.jsx)("br",{}),f?(0,s.jsx)(I,{cardIdentifiersAndOptionNumbersBySource:S,selectImage:g,sourceNamesByKey:p}):(0,s.jsx)(N,{cardIdentifiersAndOptionNumbersBySource:S,selectImage:g,sourceNamesByKey:p})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:l,children:"Close"})})]})}var T=n(4251),F=n(1230),P=n(5713);let L=(0,i.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:r,show:l,handleClose:a}=e,i=(0,u.TL)();return(0,s.jsx)(S,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:r,show:l,handleClose:a,onClick:function(e){i((0,F.qP)({face:t,slot:n,selectedImage:e}))}})}),B=(0,i.memo)(function(e){var t;let{searchQuery:n,face:r,slot:l}=e,[a,c]=(0,i.useState)(!1),o=()=>c(!1),d=()=>c(!0),x=(0,u.TL)(),m=(0,u.CG)(p.yU),b=(0,u.CG)(F.sZ),y=(0,u.CG)(e=>(0,P.ci)(e,n,r,m)),C=(0,u.CG)(e=>(0,F.AN)(e,l,r)),v=null==C?void 0:C.selectedImage,Z=()=>{x((0,T.PP)([[[r,l]],"changeQuery"]))};(0,i.useEffect)(()=>{if(null!=y){let e=v;null==e||y.includes(e)||(e=void 0),y.length>0&&null==e&&((null==n?void 0:n.query)!=null?e=y[0]:r===h.eJ&&null!=b&&(e=b)),x((0,F.qP)({face:r,slot:l,selectedImage:e}))}},[x,r,l,null==n?void 0:n.query,y,b,v]);let k=null!=y?y:[],w=null!=v?k.indexOf(v):void 0,N=null!=w?k[(0,f.N0)(w+1,k.length)]:void 0,I=null!=w?k[(0,f.N0)(w-1,k.length)]:void 0,S=()=>{x((0,F.NO)({slot:l}))},B=e=>{2==e.detail?x((0,F.HS)({slot:l,face:r})):x((0,F.O$)({slot:l,face:r}))};function G(e){null!=w&&x((0,F.qP)({face:r,slot:l,selectedImage:k[(0,f.N0)(w+e,k.length)]}))}let E=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"card-select",onClick:B,"aria-label":"select-".concat(r).concat(l),children:(0,s.jsx)("i",{className:"bi bi".concat(null!==(t=null==C?void 0:C.selected)&&void 0!==t&&t?"-check":"","-square")})}),(0,s.jsx)("button",{className:"remove",children:(0,s.jsx)("i",{className:"bi bi-x-circle",onClick:S,"aria-label":"remove-".concat(r).concat(l)})})]}),z=(0,s.jsxs)(s.Fragment,{children:[1===k.length&&(0,s.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",k.length]}),k.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:d,children:[(null!=w?w:0)+1," / ",k.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j.Z,{variant:"outline-primary",className:"prev",onClick:()=>G(-1),children:"❮"}),(0,s.jsx)(j.Z,{variant:"outline-primary",className:"next",onClick:()=>G(1),children:"❯"})]})]})]});return(0,s.jsxs)("div",{style:{contentVisibility:"auto"},"data-testid":"".concat(r,"-slot").concat(l),children:[(0,s.jsx)(g.LL,{imageIdentifier:v,previousImageIdentifier:N,nextImageIdentifier:I,cardHeaderTitle:"Slot ".concat(l+1),cardFooter:z,cardHeaderButtons:E,searchQuery:n,nameOnClick:Z,noResultsFound:null!=y&&0===y.length}),k.length>1&&a&&(0,s.jsx)(L,{face:r,slot:l,searchResultsForQuery:k,show:a,handleClose:o})]})});var G=n(5305);function E(){let e=(0,a.Z)(["\n  position: absolute;\n  border: 1px darkgray solid;\n  border-radius: 10px;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 50px 0 black inset;\n"]);return E=function(){return e},e}function z(){let e=(0,a.Z)(["\n  position: relative;\n  font-size: 1.25em;\n  text-align: center;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 4px 15px #000000;\n  max-width: 90%;\n"]);return z=function(){return e},e}let O=d.ZP.div.withConfig({componentId:"sc-87262926-0"})(E()),q=d.ZP.div.withConfig({componentId:"sc-87262926-1"})(z());function D(){return(0,s.jsx)(O,{children:(0,s.jsxs)(q,{children:[(0,s.jsx)("p",{children:"Your project is empty at the moment."}),(0,s.jsxs)("p",{children:["Use the ",(0,s.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function M(){let e=(0,u.CG)(e=>"loading"==e.cardDocuments.status||"loading"===e.searchResults.status),t=(0,u.CG)(F.aG),n=(0,u.CG)(w.ZR),r=(0,u.CG)(F.wH),l=[],a=[];for(let[e,t]of r.entries()){var i,c;l.push((0,s.jsx)(B,{searchQuery:null===(i=t.front)||void 0===i?void 0:i.query,face:h.i6,slot:e},"".concat(h.i6,"-slot").concat(e))),a.push((0,s.jsx)(B,{searchQuery:null===(c=t.back)||void 0===c?void 0:c.query,face:h.eJ,slot:e},"".concat(h.eJ,"-slot").concat(e)))}return(0,s.jsxs)(s.Fragment,{children:[0==r.length&&(0,s.jsx)(D,{}),(0,s.jsx)(o.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"":"none"},children:l}),(0,s.jsx)(o.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"none":""},children:a}),(0,s.jsxs)(m.Z,{show:e&&!t,centered:!0,children:[(0,s.jsx)(m.Z.Header,{children:(0,s.jsx)(m.Z.Title,{style:{textAlign:"center",userSelect:"none"},className:"w-100",children:"Loading your cards..."})}),(0,s.jsx)(m.Z.Body,{children:(0,s.jsx)(G.$,{})})]})]})}let A=(0,i.memo)(function(e){let{searchResults:t,show:n,handleClose:r}=e,l=(0,u.CG)(F.sZ),a=(0,u.TL)();return(0,s.jsx)(S,{testId:"cardback-grid-selector",imageIdentifiers:t,show:n,handleClose:r,onClick:function(e){null!=l&&(a((0,F.Tx)({currentImage:l,selectedImage:e,face:h.eJ})),a((0,F.mp)({selectedImage:e})))}})});function V(e){let{selectedImage:t}=e,n=(0,u.TL)(),[r,l]=(0,i.useState)(!1),a=()=>l(!1),c=()=>l(!0),o=(0,u.CG)(p.yU);(0,i.useEffect)(()=>{let e=t;null==e||o.includes(e)||(e=void 0),o.length>0&&null==e&&(e=o[0]),n((0,F.mp)({selectedImage:null!=e?e:null}))},[n,t,o]);let d=null!=t?o.indexOf(t):void 0,x=null!=d?o[(0,f.N0)(d+1,o.length)]:void 0,m=null!=d?o[(0,f.N0)(d-1,o.length)]:void 0;function b(e){if(null!=t&&null!=d){let s=o[(0,f.N0)(d+e,o.length)];n((0,F.Tx)({currentImage:t,selectedImage:s,face:h.eJ})),n((0,F.mp)({selectedImage:s}))}}let y=(0,s.jsxs)(s.Fragment,{children:[1===o.length&&(0,s.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",o.length]}),o.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:c,children:[(null!=d?d:0)+1," / ",o.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j.Z,{variant:"outline-primary",className:"prev",onClick:()=>b(-1),children:"❮"}),(0,s.jsx)(j.Z,{variant:"outline-primary",className:"next",onClick:()=>b(1),children:"❯"})]})]})]});return(0,s.jsxs)("div",{"data-testid":"common-cardback",children:[(0,s.jsx)(g.LL,{imageIdentifier:t,previousImageIdentifier:x,nextImageIdentifier:m,cardHeaderTitle:"Cardback",cardFooter:y,noResultsFound:0===o.length}),r&&(0,s.jsx)(A,{searchResults:o,show:r,handleClose:a})]})}var H=n(1205),R=n(8102),U=n(2664),_=n(611);let Q=e=>(function(e,t){let n=function(e,t){function n(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(t,e.selectedImage)&&t[e.selectedImage].card_type===h.Zb?(0,_.GL)(t[e.selectedImage].name):null}return e.map(e=>[n(e[h.i6]),n(e[h.eJ])])}(e,t),s=n.map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]," ").concat(h.M0," ").concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0);return(function(e){let t=e.reduce((e,t)=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=0),e[t]++,e),{});return Object.keys(t).sort().map(e=>"".concat(t[e],"x ").concat(e))})(s).join("\n")})((0,F.wH)(e),e.cardDocuments.cardDocuments);function X(){let e=(0,U.oR)(),t=(0,u.CG)(F.aG),n=()=>{let t=Q(e.getState());(0,R.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"decklist.txt")};return(0,s.jsxs)(H.Z.Item,{disabled:t,onClick:n,"data-testid":"export-decklist-button",children:[(0,s.jsx)(k.V9,{bootstrapIconName:"card-text"})," Decklist"]})}var W=n(8375),$=n(1479),J=n(7932),K=n(1457);function Y(){let e=(0,a.Z)(["\n  --bs-progress-bg: #424e5c;\n"]);return Y=function(){return e},e}let ee=(0,d.ZP)($.Z).withConfig({componentId:"sc-5077c2e7-0"})(Y());function et(){let e=(0,u.TL)(),t=(0,u.CG)(F.aG),[r,l]=(0,i.useState)(!1),a=()=>l(!1),c=()=>l(!0),[o,d]=(0,i.useState)(!1),x=(0,v.zK)(),f=Object.keys(x).length,[g,p]=(0,i.useState)(0),b=(0,i.useRef)(null),y=async()=>{null!=b.current&&(await b.current.terminate(!0),d(!1))},C=async()=>{if(d(!0),p(0),b.current=(0,J.Kg)(()=>(0,J.Cs)(new J.Cc(n.tu(new URL(n.p+n.u(667),n.b)))),5),null!=b.current){let t=0;Object.keys(x).map(n=>{null!=b.current&&b.current.queue(async s=>{let r=x[n];if(null!=r)try{let e=await s(n);(0,R.saveAs)((0,_.jg)(e),"".concat(r.name," (").concat(r.identifier,").").concat(r.extension))}catch(t){e((0,K.sT)(["download-".concat(r.identifier,"-failed"),{name:"Failed to download image",message:"Downloading the full"}]))}p(++t)})}),await b.current.settled(),await b.current.terminate(),d(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(H.Z.Item,{disabled:t,onClick:c,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"image"})," Card Images"]}),(0,s.jsxs)(m.Z,{show:r,onHide:a,"data-testid":"export-images",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Download — Card Images"})}),(0,s.jsxs)(m.Z.Body,{children:[o&&(0,s.jsx)("p",{children:"Your images should be downloading now. This might take a while! Please don't close the page until the process is complete."}),!o&&0==f&&(0,s.jsx)("p",{children:"You'll be able to download the card images in your project here once you've added some cards."}),!o&&f>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Click the button below to begin. This will download the"," ",(0,s.jsx)("b",{children:f})," unique image",1!=f&&"s"," in your project."]}),(0,s.jsx)("p",{children:"This feature may not work as expected on mobile devices."}),(0,s.jsxs)(W.Z,{variant:"info",children:["If you're planning on using the ",h.vV," desktop tool to auto-fill your project, you don't need to download images here. The desktop tool will download your images for you."]})]}),(o||g==f&&g>0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee,{striped:!0,animated:!0,now:100*g/f,label:"".concat(g," / ").concat(f),variant:"success"}),(0,s.jsx)("br",{})]}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsx)(j.Z,{variant:"danger",onClick:y,children:"Terminate"})}),(0,s.jsx)("br",{})]}),(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsx)(j.Z,{variant:"primary",onClick:C,disabled:o||0==f,children:o?(0,s.jsx)(G.$,{size:1.5}):"Download Images"})})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:a,children:"Close"})})]})]})}var en=n(3518),es=n.n(en),er=n(5688);let el=e=>(function(e,t,n,s,r){let l=function(e,t){let n={front:{},back:{}};for(let[s,r]of e.entries())for(let e of[h.i6,h.eJ]){let l=r[e];if(null!=l){let r=l.selectedImage;null!=r&&r!==t&&(null==n[e][r]?n[e][r]=new Set([s]):n[e][r].add(s))}}return n}(e,n),a=document.implementation.createDocument("","",null),i=a.createElement("order"),c=a.createElement("details"),o=a.createElement("quantity");o.appendChild(a.createTextNode(s.toString())),c.appendChild(o);let d=a.createElement("bracket");d.appendChild(a.createTextNode((0,f.wk)(s).toString())),c.appendChild(d);let u=a.createElement("stock");u.appendChild(a.createTextNode(r.cardstock)),c.appendChild(u);let x=a.createElement("foil");for(let e of(x.appendChild(a.createTextNode(r.foil?"true":"false")),c.appendChild(x),i.append(c),[h.i6,h.eJ]))if(Object.keys(l[e]).length>0){let s=a.createElement("".concat(e,"s"));for(let[r,i]of Object.entries(l[e])){let l=function(e,t,n,s){let r=e[n];if(null==r)return null;let l=t.createElement("card"),a=t.createElement("id");a.appendChild(t.createTextNode(n)),l.appendChild(a);let i=t.createElement("slots");i.appendChild(t.createTextNode(Array.from(s).sort((e,t)=>e-t).toString())),l.appendChild(i);let c=t.createElement("name");c.appendChild(t.createTextNode("".concat(r.name,".").concat(r.extension))),l.append(c);let o=t.createElement("query");return o.appendChild(t.createTextNode(h.P$[r.card_type]+r.searchq)),l.append(o),l}(t,a,r,i),c=r===n&&e===h.eJ;null==l||c||s.appendChild(l)}s.children.length>0&&i.appendChild(s)}let m=a.createElement("cardback");null!=n&&m.appendChild(a.createTextNode(n)),i.appendChild(m),a.appendChild(i);let j=new XMLSerializer,g=j.serializeToString(a);return es()(g,{collapseContent:!0})})((0,F.wH)(e),e.cardDocuments.cardDocuments,e.project.cardback,(0,F.zO)(e),(0,er.GG)(e));function ea(){let e=(0,U.oR)(),t=(0,u.CG)(F.aG),n=()=>{let t=el(e.getState());(0,R.saveAs)(new Blob([t],{type:"text/xml;charset=utf-8"}),"cards.xml")};return(0,s.jsxs)(H.Z.Item,{disabled:t,onClick:n,"data-testid":"export-xml-button",children:[(0,s.jsx)(k.V9,{bootstrapIconName:"file-code"})," XML"]})}function ei(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(H.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(H.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,s.jsx)(k.V9,{bootstrapIconName:"cloud-arrow-down"})," Download"]})}),(0,s.jsxs)(H.Z.Menu,{children:[(0,s.jsx)(X,{}),(0,s.jsx)(ea,{}),(0,s.jsx)(et,{})]})]})})}var ec=n(7346);function eo(){let e=(0,u.CG)(er.GG),t=(0,u.TL)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{lg:8,md:12,sm:12,xs:12,children:(0,s.jsx)(ec.Z.Group,{children:(0,s.jsx)(ec.Z.Select,{value:e.cardstock,style:{height:h.B4+"px"},onChange:e=>t((0,er.HU)(e.target.value)),children:h.Nu.map(e=>(0,s.jsx)("option",{children:e},e))})})}),(0,s.jsx)(c.Z,{lg:4,md:12,sm:12,xs:12,children:(0,s.jsx)(C.ZP,{onClick:()=>t((0,er.uR)()),on:"Foil",onClassName:"flex-centre",off:"Non-Foil",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:e.foil,disabled:!h.lq[e.cardstock]})})]})}var ed=n(7125),eh=n(5147),eu=n(3205),ex=n(2512);function em(){let e=(0,a.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return em=function(){return e},e}let ej=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",ef=d.ZP.div.withConfig({componentId:"sc-e091a590-0"})(em(),e=>ej(e));function eg(e){let{mimeTypes:t,fileUploadCallback:n,label:r}=e,l=(0,u.TL)(),a=(0,i.useCallback)(()=>l((0,K.sT)(["dropzone-onabort",{name:"File upload error",message:"File reading was stopped."}])),[]),c=(0,i.useCallback)(()=>l((0,K.sT)(["dropzone-onerror",{name:"File upload error",message:"An error occurred while reading the file."}])),[]),o=(0,i.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=a,t.onerror=c,t.onload=()=>{n(t.result)},t.readAsText(e)})},[n,a,c]),{getRootProps:d,getInputProps:h,isFocused:x,isDragAccept:m,isDragReject:j}=(0,ex.uI)({onDrop:o,accept:t,maxFiles:1});return(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)(ef,{...d({isFocused:x,isDragAccept:m,isDragReject:j}),"aria-label":null!=r?r:"dropzone",children:[(0,s.jsx)("input",{...h()}),"Drag and drop a file here, or click to select a file."]})})}var ep=n(5749);function eb(){let e=(0,a.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return eb=function(){return e},e}function ey(){let e=(0,a.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return ey=function(){return e},e}function eC(){let e=(0,a.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return eC=function(){return e},e}let ev=(0,d.ZP)(eh.Z).withConfig({componentId:"sc-ce3b3b29-0"})(eb()),eZ=d.ZP.th.withConfig({componentId:"sc-ce3b3b29-1"})(ey()),ek=d.ZP.td.withConfig({componentId:"sc-ce3b3b29-2"})(eC()),ew={quantity:"Quantity",frontQuery:"Front",frontSelectedImage:"Front ID",backQuery:"Back",backSelectedImage:"Back ID"};function eN(e){let{children:t}=e;return(0,s.jsx)(k.y6,{children:(0,s.jsxs)(ev,{bordered:!0,children:[(0,s.jsx)("thead",{children:Object.values(ew).map(e=>(0,s.jsx)(eZ,{children:e},e))}),(0,s.jsx)("tbody",{children:t})]})})}function eI(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eN,{children:[,,,].fill((0,s.jsx)("tr",{children:[,,,,,].fill((0,s.jsx)(ek,{}))}))}),"Where the columns follow these rules:",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:ew.quantity}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:ew.frontQuery}),": Search query for card front."," ",(0,s.jsx)("b",{children:"Cannot be blank."})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:ew.frontSelectedImage}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:ew.backQuery}),": Search query for card back. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:ew.backSelectedImage}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function eS(){return(0,s.jsxs)(eN,{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"2"})}),(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"island"})}),(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"1HsvTYs1..."})}),(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"forest"})}),(0,s.jsx)(ek,{})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"3"})}),(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"t:goblin"})}),(0,s.jsx)(ek,{}),(0,s.jsx)(ek,{}),(0,s.jsx)(ek,{children:(0,s.jsx)("code",{children:"1JtXL6Ca..."})})]})]})}function eT(){let e=(0,u.TL)(),t=(0,eu.l)(),[n,r]=(0,i.useState)(!1),l=()=>r(!1),a=()=>r(!0),c=(0,u.CG)(ep.WP),o=(0,u.CG)(F.zO),d=n=>{var s;if("string"!=typeof n){e((0,K.sT)(["invalid-csv-contents",{name:"Invalid CSV file",message:"The contents of the uploaded file did not match the expected text format."}]));return}let r=(0,ed.Q)(n,{header:Object.fromEntries(Object.entries(ew).map(e=>{let[t,n]=e;return[n,t]}))}),a=e=>{var t,n,s,r,l;let a="".concat(null!==(t=e.quantity)&&void 0!==t?t:""," ").concat(null!==(n=e.frontQuery)&&void 0!==n?n:"");return(null!==(s=e.frontSelectedImage)&&void 0!==s?s:"").length>0&&(a+="".concat(h.A0).concat(e.frontSelectedImage)),(null!==(r=e.backQuery)&&void 0!==r?r:"").length>0&&(a+=" ".concat(h.M0," ").concat(e.backQuery),(null!==(l=e.backSelectedImage)&&void 0!==l?l:"").length>0&&(a+="".concat(h.A0).concat(e.backSelectedImage))),a},i=(0,_.l_)(r.map(a),null!==(s=t.data)&&void 0!==s?s:{},c);e((0,F.r7)({members:(0,_.wt)(i,o)})),l()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(H.Z.Item,{onClick:a,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"file-earmark-spreadsheet"})," CSV"]}),(0,s.jsxs)(m.Z,{show:n,onHide:l,"data-testid":"import-csv",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — CSV"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,s.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,s.jsx)(eI,{}),"For example:",(0,s.jsx)(eS,{}),(0,s.jsx)("hr",{}),(0,s.jsx)(eg,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:d,label:"import-csv"})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})}var eF=n(5607);function eP(){let e=(0,eu.cf)(),t=(0,eu.l)(),n=(0,u.CG)(ep.WP),r=(0,u.TL)(),[l,a]=(0,i.useState)(!1),c=()=>a(!1),o=()=>a(!0),[d,x]=(0,i.useState)(""),[g,p]=(0,i.useState)(""),b=(0,u.CG)(F.zO),y=e=>{let t=[];for(let n of[h.Zb,h.WU,h.dt])null!=e[n]&&t.push(e[n].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(h.P$[n]).concat((0,_.GL)(e.name))).join("\n"));return t.join("\n\n")};(0,i.useEffect)(()=>{void 0!=e.data&&p(y(e.data))},[e.data]);let C=()=>{var e;let s=(0,_.ts)(d,null!==(e=t.data)&&void 0!==e?e:{},n);r((0,F.r7)({members:(0,_.wt)(s,b)})),c()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(H.Z.Item,{onClick:o,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"card-text"})," Text"]}),(0,s.jsxs)(m.Z,{show:l,onHide:c,onExited:()=>x(""),"data-testid":"import-text",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — Text"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,s.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,s.jsx)(eF.Z,{children:(0,s.jsxs)(eF.Z.Item,{eventKey:"0",children:[(0,s.jsx)(eF.Z.Header,{children:"Syntax Guide"}),(0,s.jsx)(eF.Z.Body,{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["There are three types of images in ",h.vV," —"," ",h.Zb.toLowerCase(),"s, ",h.dt.toLowerCase(),"s, and"," ",h.WU.toLowerCase(),"s. If you search for a card, the search results ",(0,s.jsx)("b",{children:"won't contain cardbacks or tokens"}),"."]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:[(0,f.LF)(h.Zb),"s"]})," are searched for by default."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[h.WU.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:h.P$[h.WU]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[h.P$[h.WU],"your"," ",h.WU.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[h.dt.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:h.P$[h.dt]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[h.P$[h.dt],"your"," ",h.dt.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["You may optionally specify the image ID to select by typing your search query, ",(0,s.jsx)("code",{children:h.A0}),", then the image ID — for example,"," ",(0,s.jsxs)("code",{children:["your ",h.Zb.toLowerCase()," name",h.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]}),"."]}),(0,s.jsxs)("li",{children:["You may specify queries for both the front and the back by separating them with ",(0,s.jsx)("code",{children:h.M0})," — for example,"," ",(0,s.jsxs)("code",{children:["4x goblin ",h.M0," ",h.P$[h.WU],"elf"]}),"."]}),(0,s.jsx)("li",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back card for you."})]})})]})}),(0,s.jsx)("br",{}),(0,s.jsx)(ec.Z.Group,{className:"mb-3",children:(0,s.jsx)(ec.Z.Control,{as:"textarea",rows:12,placeholder:g,required:!0,onChange:e=>x(e.target.value),value:d,"aria-label":"import-text"})})]}),(0,s.jsxs)(m.Z.Footer,{children:[(0,s.jsx)(j.Z,{variant:"secondary",onClick:c,children:"Close"}),(0,s.jsx)(j.Z,{variant:"primary",onClick:C,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}function eL(){let e=(0,eu.l)(),t=(0,eu.QA)(),n=(0,x.Sb)(),r=(0,u.CG)(ep.WP),l=(0,u.CG)(F.zO),a=(0,u.TL)(),[c,o]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),f=()=>o(!1),g=()=>o(!0),[p,b]=(0,i.useState)(""),[y,C]=eu.hi.endpoints.queryImportSite.useLazyQuery(),v=(0,i.useCallback)(async()=>{let t=p.trim();if(t.length>0){h(!0);try{var n,s;let t=await y(p),i=(0,_.ts)(null!==(n=t.data)&&void 0!==n?n:"",null!==(s=e.data)&&void 0!==s?s:{},r);a((0,F.r7)({members:(0,_.wt)(i,l)})),f()}catch(e){a((0,K.sT)(["url-import-error",{name:"URL Import Error",message:"An unexpected error occurred while processing your decklist: ".concat(e.message)}]))}finally{h(!1)}}},[a,p,e.data,l,y,r]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(H.Z.Item,{onClick:g,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"link-45deg"})," URL"]}),(0,s.jsxs)(m.Z,{show:d||c,onHide:f,onExited:()=>b(""),children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — URL"})}),(0,s.jsxs)(m.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into ",n,":",(0,s.jsx)("br",{}),null!=t.data?(0,s.jsx)("ul",{children:t.data.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(G.$,{}),(0,s.jsx)("br",{})]}),(0,s.jsx)(ec.Z.Group,{className:"mb-3",children:(0,s.jsx)(ec.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>b(e.target.value.trim()),value:p,disabled:d||null==t.data,"aria-label":"import-url"})})]}),(0,s.jsxs)(m.Z.Footer,{children:[(0,s.jsx)(j.Z,{variant:"secondary",onClick:f,children:"Close"}),(0,s.jsx)(j.Z,{variant:"primary",onClick:async()=>{await v()},disabled:d||t.isFetching,style:{width:"4.75em"},children:d?(0,s.jsx)(G.$,{size:1.5}):"Submit"})]})]})]})}function eB(){let e=(0,u.TL)(),[t,n]=(0,i.useState)(!1),r=()=>n(!1),l=()=>n(!0),a=(0,u.CG)(F.sZ),c=(0,u.CG)(F.zO),[o,d]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),g=t=>{var n,s,l,i,d,u,m;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let j=new DOMParser,f=j.parseFromString(t,"application/xml"),g=f.getElementsByTagName("order")[0],p=g.getElementsByTagName("details")[0],b=null===(n=p.getElementsByTagName("stock")[0])||void 0===n?void 0:n.textContent,y=(null===(s=p.getElementsByTagName("foil")[0])||void 0===s?void 0:s.textContent)==="true",C=g.getElementsByTagName("fronts")[0],v=g.getElementsByTagName("backs")[0],Z=C.getElementsByTagName("card"),k=null!=v?v.getElementsByTagName("card"):void 0,w=null!==(i=null===(l=g.getElementsByTagName("cardback")[0])||void 0===l?void 0:l.textContent)&&void 0!==i?i:a,N=0,I=Array.from({length:h.Wn-c},()=>({front:null,back:null}));if(null!=k)for(let e of k){let t=null===(d=e.getElementsByTagName("slots")[0])||void 0===d?void 0:d.textContent;if(null==t)continue;let n=(0,_.XV)(null!==(u=e.getElementsByTagName("query")[0].textContent)&&void 0!==u?u:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;I[t].back={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},N=Math.max(N,t)})}for(let e of Z){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,_.XV)(null!==(m=e.getElementsByTagName("query")[0].textContent)&&void 0!==m?m:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;I[t].front={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==I[t].back&&(I[t].back={query:{query:null,card_type:h.dt},selectedImage:w,selected:!1}),N=Math.max(N,t)})}e((0,F.r7)({members:I.slice(0,N+1)})),o&&null!=w&&e((0,F.mp)({selectedImage:w})),x&&null!=b&&h.Nu.includes(b)&&null!=y&&(e((0,er.HU)(b)),e((0,er.Mc)(y))),r()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(H.Z.Item,{onClick:l,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"file-code"})," XML"]}),(0,s.jsxs)(m.Z,{show:t,onHide:r,"data-testid":"import-xml",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — XML"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,s.jsxs)("p",{children:["The ",h.vV," website can generate an XML file representing your project, and the ",h.vV," desktop tool which auto-fills your order into"," ",(0,s.jsx)("a",{href:h.vs,target:"_blank",children:h.Fo})," ","expects a file in this format."]}),(0,s.jsx)(C.ZP,{onClick:()=>d(!o),on:"Use XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:o}),(0,s.jsx)("div",{className:"pt-3",children:(0,s.jsx)(C.ZP,{onClick:()=>f(!x),on:"Use XML Finish Settings",onClassName:"flex-centre",off:"Retain Selected Finish Settings",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:x})}),(0,s.jsx)("hr",{}),(0,s.jsx)(eg,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:g,label:"import-xml"})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:r,children:"Close"})})]})]})}function eG(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(H.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(H.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,s.jsx)(k.V9,{bootstrapIconName:"plus-circle"})," Add Cards"]})}),(0,s.jsxs)(H.Z.Menu,{children:[(0,s.jsx)(eP,{}),(0,s.jsx)(eB,{}),(0,s.jsx)(eT,{}),(0,s.jsx)(eL,{})]})]})})}var eE=n(2238);function ez(e){var t;let{slots:n}=e,r=(0,u.TL)(),[l,a]=(0,i.useState)(!1),c=()=>a(!0),o=()=>a(!1),d=e=>{r((0,F.ND)({selectedImage:e,slots:n})),o()},h=(0,u.CG)(e=>(0,F.CH)(e,n)),x=null!==(t=(0,u.CG)(e=>e.cardbacks.cardbacks))&&void 0!==t?t:[],m=(0,u.CG)(e=>(0,P.ci)(e,h,n[0][0],x));return(0,s.jsxs)(s.Fragment,{children:[null!=m&&m.length>1&&(0,s.jsxs)(H.Z.Item,{className:"text-decoration-none",onClick:c,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"image"})," Change Version"]}),null!=m&&(0,s.jsx)(S,{testId:"bulk-grid-selector",imageIdentifiers:m,show:l,handleClose:o,onClick:d})]})}function eO(e){let{slots:t}=e,n=(0,u.TL)(),r=()=>{n((0,T.PP)([t,"changeQuery"]))};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(H.Z.Item,{className:"text-decoration-none",onClick:r,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"arrow-repeat"})," Change Query"]})})}function eq(e){let{slots:t}=e,n=(0,u.TL)(),r=()=>n((0,F.g5)({slots:t}));return(0,s.jsxs)(H.Z.Item,{onClick:r,className:"text-decoration-none",children:[(0,s.jsx)(k.V9,{bootstrapIconName:"slash-circle"})," Clear Query"]})}function eD(e){let{slots:t}=e,n=(0,u.TL)(),r=t.map(e=>{let[t,n]=e;return n}),l=()=>n((0,F.uA)({slots:r}));return(0,s.jsxs)(H.Z.Item,{onClick:l,className:"text-decoration-none",children:[(0,s.jsx)(k.V9,{bootstrapIconName:"x-circle"})," Delete Slots"]})}function eM(){let e=(0,u.CG)(F.NV),t=(0,u.TL)(),n=()=>t((0,F.fP)({selectedStatus:!1,slots:e}));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(W.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,s.jsxs)(y.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,s.jsx)(j.Z,{onClick:n,className:"ms-auto","data-testid":"clear-selection",children:(0,s.jsx)("i",{className:"bi bi-x-lg"})}),e.length>0&&(0,s.jsxs)(H.Z,{children:[(0,s.jsx)(H.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,s.jsxs)(H.Z.Menu,{children:[(0,s.jsx)(ez,{slots:e}),(0,s.jsx)(eO,{slots:e}),(0,s.jsx)(H.Z.Divider,{}),(0,s.jsx)(eq,{slots:e}),(0,s.jsx)(eD,{slots:e})]})]})]})})})}function eA(){let e=(0,u.CG)(w.ZR),t=(0,u.TL)();return(0,s.jsx)(C.ZP,{onClick:()=>t((0,w.$3)()),on:"Show Fronts",onClassName:"flex-centre",off:"Show Backs",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:e})}function eV(){let e=(0,a.Z)(["\n  font-size: 1.25rem;\n"]);return eV=function(){return e},e}function eH(){let e=(0,eE.UAParser)();return"mobile"===e.device.type?(0,s.jsxs)(W.Z,{variant:"primary",children:["It seems like you're on a mobile device! The ",h.vV," executable that fills your order into MPC requires a desktop computer."]}):(0,s.jsx)(s.Fragment,{})}function eR(){let e=(0,u.CG)(F.zO),t=(0,u.CG)(F.p4);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Edit MPC Project"}),(0,s.jsx)(eH,{}),(0,s.jsx)(eM,{}),e>0&&(0,s.jsxs)(W.Z,{variant:"secondary",children:["Your project contains ",(0,s.jsx)("b",{children:e})," card",1!==e&&"s",", belongs in the MPC bracket of up to"," ",(0,s.jsx)("b",{children:(0,f.wk)(e)})," cards, and is"," ",(0,s.jsx)("b",{children:(0,f.K)(t,0)})," in total.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),e>=h.Wn&&(0,s.jsx)(W.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,s.jsx)(eA,{})]})]})}d.ZP.i.withConfig({componentId:"sc-cc3ad37b-0"})(eV());var eU=n(7202);function e_(e){let{filterSettings:t,setFilterSettings:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,s.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,s.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,s.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,s.jsx)("b",{children:"look the same"}),".",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsxs)(o.Z,{children:[(0,s.jsxs)(c.Z,{xs:6,children:[(0,s.jsxs)(ec.Z.Label,{children:["Minimum: ",(0,s.jsxs)("b",{children:[t.minimumDPI," DPI"]})]}),(0,s.jsx)(ec.Z.Range,{defaultValue:t.minimumDPI,min:h.sL,max:h.gx,step:h.Ox,onChange:e=>{n({...t,minimumDPI:parseInt(e.target.value)})}})]}),(0,s.jsxs)(c.Z,{xs:6,children:[(0,s.jsxs)(ec.Z.Label,{children:["Maximum: ",(0,s.jsxs)("b",{children:[t.maximumDPI," DPI"]})]}),(0,s.jsx)(ec.Z.Range,{defaultValue:t.maximumDPI,min:h.sL,max:h.gx,step:h.Ox,onChange:e=>{n({...t,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,s.jsxs)(ec.Z.Label,{children:["File size: Up to ",(0,s.jsxs)("b",{children:[t.maximumSize," MB"]})]}),(0,s.jsx)(ec.Z.Range,{defaultValue:t.maximumSize,min:0,max:h.bD,step:h.B9,onChange:e=>{n({...t,maximumSize:parseInt(e.target.value)})}})]})}function eQ(e){let{searchTypeSettings:t,setSearchTypeSettings:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(C.ZP,{onClick:()=>n({...t,fuzzySearch:!t.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:t.fuzzySearch}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(C.ZP,{onClick:()=>n({...t,filterCardbacks:!t.filterCardbacks}),on:"Filters Apply to Cardbacks",onClassName:"flex-centre",off:"Include All Cardbacks",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:h.B4+"px",active:t.filterCardbacks})]})}var eX=n(8627);function eW(){let e=(0,a.Z)(["\n  font-size: 1em;\n  cursor: pointer;\n"]);return eW=function(){return e},e}let e$=d.ZP.i.withConfig({componentId:"sc-be9c55d8-0"})(eW());function eJ(e){let{sourceSettings:t,setSourceSettings:n}=e,r=(0,u.CG)(Z.TK),l=(0,i.useCallback)((e,s)=>{var r;let l=[...null!==(r=t.sources)&&void 0!==r?r:[]],[a]=l.splice(e,1);l.splice(s,0,a),n({sources:l})},[t.sources,n]),a=e=>{null!=e.destination&&l(e.source.index,e.destination.index)},c=(0,i.useCallback)(e=>{var s;let r=[...null!==(s=t.sources)&&void 0!==s?s:[]];r[e]=[r[e][0],!r[e][1]],n({sources:r})},[t.sources,n]),o=(0,i.useCallback)(()=>{var e;let s=null!==(e=t.sources)&&void 0!==e?e:[],r=!s.some(e=>e[1]),l=s.map(e=>[e[0],r]);n({sources:l})},[t.sources,n]),d=(0,s.jsx)(G.$,{});if(null!=r){var x,m;let e=(null!==(x=t.sources)&&void 0!==x?x:[]).map((e,n)=>(0,s.jsx)(eX._l,{draggableId:e[0].toString(),index:n,children:(a,i)=>(0,s.jsxs)("tr",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,children:[(0,s.jsx)("td",{style:{verticalAlign:"middle",width:"30%"},children:(0,s.jsx)(C.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:h.B4+"px",active:e[1],onClick:()=>c(n)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,s.jsx)("td",{style:{verticalAlign:"middle",width:"50%"},children:null!=r[e[0]].external_link?(0,s.jsx)("a",{href:null!==(m=r[e[0]].external_link)&&void 0!==m?m:void 0,target:"_blank",children:r[e[0]].name}):(0,s.jsx)("a",{children:r[e[0]].name})},"".concat(e[0],"-name-column")),(0,s.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,s.jsx)("div",{children:(0,s.jsx)(e$,{className:"bi bi-chevron-double-up",onClick:()=>{l(n,0)}},"".concat(e[0],"-up-button"))}),(0,s.jsx)("div",{children:(0,s.jsx)(e$,{className:"bi bi-chevron-double-down",onClick:()=>{var e;l(n,(null!==(e=t.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,s.jsx)("td",{style:{verticalAlign:"middle",width:"15%",textAlign:"center"},children:(0,s.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));d=(0,s.jsx)(eX.Z5,{onDragEnd:a,children:(0,s.jsx)(eX.bK,{droppableId:"source-order",children:(t,n)=>(0,s.jsx)("div",{style:{height:59*e.length+h.B4+"px"},children:(0,s.jsxs)(eh.Z,{ref:t.innerRef,style:{tableLayout:"auto"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{style:{height:h.B4+"px"},onClick:o,children:[(0,s.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,s.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,s.jsx)("th",{}),(0,s.jsx)("th",{})]})}),(0,s.jsxs)("tbody",{children:[e,t.placeholder]})]})})})})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,s.jsxs)("li",{children:["Use the ",(0,s.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]}),(0,s.jsxs)("li",{children:["Click the ",(0,s.jsx)("b",{children:"table header"})," to enable or disable all sources."]})]}),d]})}function eK(){let e=(0,u.TL)(),[t,n]=(0,i.useState)(!1),r=(0,u.CG)(ep.xN),[l,a]=(0,i.useState)(r.searchTypeSettings),[c,o]=(0,i.useState)(r.sourceSettings),[d,h]=(0,i.useState)(r.filterSettings),x=(0,u.CG)(Z.TK);(0,i.useEffect)(()=>{if(null!=x){let t=(0,eU.cI)(x);e((0,ep.Fg)(t.searchTypeSettings)),e((0,ep.Ph)(t.sourceSettings)),e((0,ep._E)(t.filterSettings))}},[e,x]);let f=()=>n(!1),g=(0,i.useCallback)(()=>{a(r.searchTypeSettings),h(r.filterSettings),o(r.sourceSettings),n(!0)},[r]),p=()=>{(0,eU.Wm)({searchTypeSettings:l,sourceSettings:c,filterSettings:d}),e((0,ep.Fg)(l)),e((0,ep.Ph)(c)),e((0,ep._E)(d)),f()};return(0,s.jsxs)("div",{className:"d-grid gap-0",children:[(0,s.jsxs)(j.Z,{variant:"primary",onClick:g,children:[(0,s.jsx)(k.V9,{bootstrapIconName:"gear"}),"Search Settings"]}),(0,s.jsxs)(m.Z,{show:t,onHide:p,"data-testid":"search-settings",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Search Settings"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsx)(eQ,{searchTypeSettings:l,setSearchTypeSettings:a}),(0,s.jsx)("hr",{}),(0,s.jsx)(e_,{filterSettings:d,setFilterSettings:h}),(0,s.jsx)("hr",{}),(0,s.jsx)(eJ,{sourceSettings:c,setSourceSettings:o})]}),(0,s.jsxs)(m.Z.Footer,{children:[(0,s.jsx)(j.Z,{variant:"secondary",onClick:f,children:"Close Without Saving"}),(0,s.jsx)(j.Z,{variant:"primary",onClick:p,children:"Save Changes"})]})]})]})}var eY=n(5617);function e0(){let e=(0,a.Z)(["\n  position: relative;\n  height: calc(\n    100vh - ","px\n  ); // for compatibility with older browsers\n  height: calc(100dvh - ","px); // handles the ios address bar\n  overflow-y: scroll;\n  overscroll-behavior: none;\n  scrollbar-width: thin;\n"]);return e0=function(){return e},e}let e1=(0,d.ZP)(c.Z).withConfig({componentId:"sc-a5fd0540-0"})(e0(),h.tm,h.tm);var e2=function(){let e=(0,x.NM)(),t=(0,u.CG)(x.If),n=(0,u.TL)(),r=(0,u.CG)(F.sZ);return(0,i.useEffect)(()=>{e&&(0,Z.kJ)(n)},[n,t]),(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)(o.Z,{className:"g-0",children:[(0,s.jsx)(e1,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",children:(0,s.jsx)(M,{})}),(0,s.jsxs)(e1,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",children:[(0,s.jsx)(eR,{}),(0,s.jsx)(o.Z,{className:"g-0 pb-3",children:(0,s.jsx)(eo,{})}),(0,s.jsx)(o.Z,{className:"g-0",children:(0,s.jsx)(eK,{})}),(0,s.jsxs)(o.Z,{className:"g-0 py-3",children:[(0,s.jsx)(c.Z,{lg:6,md:12,sm:12,xs:12,children:(0,s.jsx)(eG,{})}),(0,s.jsx)(c.Z,{lg:6,md:12,sm:12,xs:12,children:(0,s.jsx)(ei,{})})]}),(0,s.jsx)(c.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,s.jsx)(V,{selectedImage:r})})]})]}):(0,s.jsx)(eY.O,{})})},e5=n(4279);function e6(){let e=(0,x.NM)();return e?(0,s.jsx)(e2,{}):(0,s.jsx)(eY.O,{})}function e4(){return(0,s.jsxs)(e5.XR,{gutter:0,children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Edit MPC Project"})," ",(0,s.jsx)("meta",{name:"description",content:"".concat(h.vV,"&apos;'s rich project editor.")})]}),(0,s.jsx)(e6,{})]})}n(1351)}},function(e){e.O(0,[62,196,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);