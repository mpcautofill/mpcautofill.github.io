(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(3037)}])},5617:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var s=n(7297),l=n(5893),r=n(9521),i=n(1677);function a(){let e=(0,s.Z)(["\n  position: absolute;\n  top: 50vh;\n  left: 50vw;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]);return a=function(){return e},e}function c(){let e=(0,s.Z)(["\n  font-size: 1.25em;\n"]);return c=function(){return e},e}let o=r.ZP.div.withConfig({componentId:"sc-88697281-0"})(a()),d=r.ZP.p.withConfig({componentId:"sc-88697281-1"})(c());function u(){return(0,l.jsxs)(o,{children:[(0,l.jsxs)(d,{children:["You haven't configured a server for ",i.vV," to communicate with just yet."]}),(0,l.jsxs)(d,{children:["Click the ",(0,l.jsx)("b",{children:"Configure Server"})," button in the top-right to get started!"]})]})}},3037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eR}});var s,l,r=n(5893),i=n(9008),a=n.n(i),c=n(7297),o=n(7294),d=n(1555),u=n(4051),h=n(2664),x=n(9521),m=n(1677),j=n(8737),g=n(6212),f=n(8789),p=n(7104),v=n(8208),b=n(4291),y=n(6518),Z=n(478),C=n(3389),k=n(5384);function I(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,sourceKeyToName:s}=e;return(0,r.jsx)(u.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(t).map((e,t)=>{let[s,l]=e;return(0,r.jsx)(r.Fragment,{children:l.flatMap(e=>{let[t,s]=e;return(0,r.jsx)(b.Ev,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(s+1),cardOnClick:()=>n(t),noResultsFound:!1},"gridSelector-".concat(t))})})})})}function S(e){var t,n;let{cardIdentifiersAndOptionNumbersBySource:s,selectImage:l,sourceKeyToName:i}=e,a=(0,h.I0)(),c=(0,h.v9)(e=>e.viewSettings.sourcesVisible);return(0,r.jsx)(r.Fragment,{children:Object.entries(s).map((e,s)=>{let[o,d]=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"sticky-top",onClick:()=>a((0,k.O6)(o)),style:{backgroundColor:"#4E5D6B",zIndex:s+100},children:[(0,r.jsx)("hr",{},"".concat(o,"-top-hr")),(0,r.jsxs)(Z.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,r.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:i[o]},"".concat(o,"-header-title")),(0,r.jsxs)("h6",{className:"text-primary prevent-select",children:[d.length," version",1!=d.length&&"s"]}),(0,r.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(t=c[o])||void 0===t||t?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(o,"-collapse-header")},"".concat(o,"-arrow"))]},"".concat(o,"-header-inner"))]},"".concat(o,"-header")),(0,r.jsx)(y.Z,{in:null===(n=c[o])||void 0===n||n,"data-testid":"".concat(o,"-collapse"),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{},"".concat(o,"-bottom-hr")),(0,r.jsx)(u.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:d.map(e=>{let[t,n]=e;return(0,r.jsx)(b.Ev,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:()=>l(t),noResultsFound:!1},"gridSelector-".concat(t))})},"".concat(o,"-row"))]})})]})})})}function w(e){var t,n;let{testId:s,imageIdentifiers:l,show:i,handleClose:a,onClick:c}=e,x=(0,h.I0)(),j=(0,h.v9)(e=>e.cardDocuments.cardDocuments),f=(0,h.v9)(e=>e.viewSettings.facetBySource),v=(0,o.useCallback)(e=>{c(e),a()},[c,a]),b=(0,h.v9)(e=>Object.fromEntries(Object.keys(null!==(t=e.sourceDocuments.sourceDocuments)&&void 0!==t?t:{}).map(t=>[e.sourceDocuments.sourceDocuments[t].key,e.sourceDocuments.sourceDocuments[t].name]))),y=Object.keys(b),Z=(0,h.v9)(e=>Object.values(null!==(n=e.viewSettings.sourcesVisible)&&void 0!==n?n:{}).includes(!1)),w=(0,o.useMemo)(()=>l.reduce((e,t,n)=>{let s=j[t];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([t,n])),e},{}),[j,l]);return(0,r.jsxs)(g.Z,{show:i,onHide:a,size:"lg","data-testid":s,children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Select Version"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(d.Z,{md:8,sm:6,children:(0,r.jsx)(C.ZP,{onClick:()=>x((0,k.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:f})}),f&&(0,r.jsx)(d.Z,{md:4,sm:6,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(p.Z,{onClick:()=>x(Z?(0,k.X8)():(0,k.tC)(y)),children:[(0,r.jsx)("i",{className:"bi bi-arrows-".concat(Z?"expand":"collapse"),style:{paddingRight:"0.5em"}})," ",Z?"Expand":"Collapse"," All"]})})})]}),(0,r.jsx)("br",{}),f?(0,r.jsx)(S,{cardIdentifiersAndOptionNumbersBySource:w,selectImage:v,sourceKeyToName:b}):(0,r.jsx)(I,{cardIdentifiersAndOptionNumbersBySource:w,selectImage:v,sourceKeyToName:b})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(p.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}var N=n(9539);let F=(0,o.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:s,show:l,handleClose:i}=e,a=(0,h.I0)();return(0,r.jsx)(w,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:s,show:l,handleClose:i,onClick:function(e){a((0,N.qP)({face:t,slot:n,selectedImage:e}))}})}),T=(0,o.memo)(function(e){var t,n,s,l;let{searchQuery:i,face:a,slot:c,handleShowDetailedView:d}=e,[u,x]=(0,o.useState)(!1),j=()=>x(!1),g=()=>x(!0),f=(0,h.I0)(),y=null!==(t=(0,h.v9)(e=>e.cardbacks.cardbacks))&&void 0!==t?t:[],Z=(0,h.v9)(e=>e.project.cardback),C=(0,h.v9)(e=>(null==i?void 0:i.query)!=null?(null!==(n=e.searchResults.searchResults[i.query])&&void 0!==n?n:{})[i.card_type]:a===m.eJ?y:[]),k=(0,h.v9)(e=>(null!==(s=e.project.members[c])&&void 0!==s?s:{})[a]),I=null==k?void 0:k.selectedImage,S=()=>{null!=I&&d(I)};(0,o.useEffect)(()=>{if(null!=C){let e=I;null==e||C.includes(e)||(e=void 0),C.length>0&&null==e&&(null!=i?e=C[0]:a===m.eJ&&null!=Z&&(e=Z)),f((0,N.qP)({face:a,slot:c,selectedImage:e}))}},[C,Z]);let w=null!=C?C:[],T=null!=I?w.indexOf(I):void 0,P=null!=T?w[(0,v.N0)(T+1,w.length)]:void 0,B=null!=T?w[(0,v.N0)(T-1,w.length)]:void 0,D=()=>{f((0,N.NO)({slot:c}))},q=e=>{2==e.detail?f((0,N.HS)({slot:c,face:a})):f((0,N.O$)({slot:c,face:a}))};function E(e){null!=T&&f((0,N.qP)({face:a,slot:c,selectedImage:w[(0,v.N0)(T+e,w.length)]}))}let O=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"card-select",onClick:q,"aria-label":"select-".concat(a).concat(c),children:(0,r.jsx)("i",{className:"bi bi".concat(null!==(l=null==k?void 0:k.selected)&&void 0!==l&&l?"-check":"","-square")})}),(0,r.jsx)("button",{className:"remove",children:(0,r.jsx)("i",{className:"bi bi-x-circle",onClick:D,"aria-label":"remove-".concat(a).concat(c)})})]}),z=(0,r.jsxs)(r.Fragment,{children:[1===w.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",w.length]}),w.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:g,children:[(null!=T?T:0)+1," / ",w.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Z,{variant:"outline-primary",className:"prev",onClick:()=>E(-1),children:"❮"}),(0,r.jsx)(p.Z,{variant:"outline-primary",className:"next",onClick:()=>E(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{style:{contentVisibility:"auto"},"data-testid":"".concat(a,"-slot").concat(c),children:[(0,r.jsx)(b.Ev,{imageIdentifier:I,previousImageIdentifier:P,nextImageIdentifier:B,cardHeaderTitle:"Slot ".concat(c+1),cardFooter:z,cardHeaderButtons:O,imageOnClick:S,searchQuery:i,noResultsFound:null!=C&&0===C.length}),w.length>1&&(0,r.jsx)(F,{face:a,slot:c,searchResultsForQuery:w,show:u,handleClose:j})]})});var P=n(7088),B=n(5713);function D(){let e=(0,c.Z)(["\n  position: absolute;\n  border: 1px darkgray solid;\n  border-radius: 10px;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 50px 0 black inset;\n"]);return D=function(){return e},e}function q(){let e=(0,c.Z)(["\n  position: relative;\n  font-size: 1.25em;\n  text-align: center;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 4px 15px #000000;\n  max-width: 90%;\n"]);return q=function(){return e},e}let E=x.ZP.div.withConfig({componentId:"sc-25a11253-0"})(D()),O=x.ZP.div.withConfig({componentId:"sc-25a11253-1"})(q());function z(){return(0,r.jsx)(E,{children:(0,r.jsxs)(O,{children:[(0,r.jsx)("p",{children:"Your project is empty at the moment."}),(0,r.jsxs)("p",{children:["Use the ",(0,r.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function M(){let e=(0,h.I0)(),[t,n]=(0,o.useState)(null),[s,l]=(0,o.useState)(!1),i=()=>l(!1),a=(0,o.useCallback)(e=>{n(e),l(!0)},[]),c="idle"===(0,h.v9)(e=>e.searchResults.status),d=(0,h.v9)(N.LI),x=[],j=[],p=(0,h.v9)(N.wH),v=(0,h.v9)(e=>e.searchSettings),b=(0,o.useMemo)(()=>JSON.stringify(v),[v]),y=JSON.stringify(v.sourceSettings.sources),Z=(0,o.useMemo)(()=>{let e=Array.from(d);return e.sort(),JSON.stringify(e)},[p]);for(let[t,n]of((0,o.useEffect)(()=>{null!=v.sourceSettings.sources&&e((0,P.U9)())},[Z,y]),(0,o.useEffect)(()=>{null!=v.sourceSettings.sources&&(e((0,B.Ug)()),e((0,P.U9)()))},[b]),p.entries())){var C,k;x.push((0,r.jsx)(T,{searchQuery:null===(C=n.front)||void 0===C?void 0:C.query,face:m.i6,slot:t,handleShowDetailedView:a},"".concat(m.i6,"-slot").concat(t))),j.push((0,r.jsx)(T,{searchQuery:null===(k=n.back)||void 0===k?void 0:k.query,face:m.eJ,slot:t,handleShowDetailedView:a},"".concat(m.eJ,"-slot").concat(t)))}let I=(0,h.v9)(e=>e.viewSettings.frontsVisible);return(0,r.jsxs)(r.Fragment,{children:[0==p.length&&(0,r.jsx)(z,{}),(0,r.jsx)(u.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:I?"":"none"},children:x}),(0,r.jsx)(u.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:I?"none":""},children:j}),(0,r.jsxs)(g.Z,{show:!c,children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Loading..."})}),(0,r.jsx)(g.Z.Body,{children:"TODO"})]}),null!=t&&(0,r.jsx)(f.t,{imageIdentifier:t,show:s,handleClose:i})]})}let R=(0,o.memo)(function(e){let{searchResults:t,show:n,handleClose:s}=e,l=(0,h.v9)(e=>e.project.cardback),i=(0,h.I0)();return(0,r.jsx)(w,{testId:"cardback-grid-selector",imageIdentifiers:t,show:n,handleClose:s,onClick:function(e){null!=l&&(i((0,N.Tx)({currentImage:l,selectedImage:e,face:m.eJ})),i((0,N.mp)({selectedImage:e})))}})});function A(e){let{selectedImage:t}=e,n=(0,h.I0)(),[s,l]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1),c=()=>l(!1),d=()=>l(!0),u=()=>a(!1),x=()=>a(!0),j=(0,h.v9)(e=>e.cardbacks.cardbacks);(0,o.useEffect)(()=>{j.length>0&&null==t&&n((0,N.mp)({selectedImage:j[0]}))},[j]);let g=null!=t?j.indexOf(t):void 0,y=null!=g?j[(0,v.N0)(g+1,j.length)]:void 0,Z=null!=g?j[(0,v.N0)(g-1,j.length)]:void 0;function C(e){if(null!=t&&null!=g){let s=j[(0,v.N0)(g+e,j.length)];n((0,N.Tx)({currentImage:t,selectedImage:s,face:m.eJ})),n((0,N.mp)({selectedImage:s}))}}let k=(0,r.jsxs)(r.Fragment,{children:[1===j.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",j.length]}),j.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:x,children:[(null!=g?g:0)+1," / ",j.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Z,{variant:"outline-primary",className:"prev",onClick:()=>C(-1),children:"❮"}),(0,r.jsx)(p.Z,{variant:"outline-primary",className:"next",onClick:()=>C(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{"data-testid":"common-cardback",children:[(0,r.jsx)(b.Ev,{imageIdentifier:t,previousImageIdentifier:y,nextImageIdentifier:Z,cardHeaderTitle:"Cardback",cardFooter:k,imageOnClick:d,noResultsFound:!1}),(0,r.jsx)(R,{searchResults:j,show:i,handleClose:u}),null!=t&&(0,r.jsx)(f.t,{imageIdentifier:t,show:s,handleClose:c})]})}var _=n(1205),V=n(7125),H=n(5147),Q=n(2283),L=n(2512);function U(){let e=(0,c.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return U=function(){return e},e}let X=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",J=x.ZP.div.withConfig({componentId:"sc-d1c6a457-0"})(U(),e=>X(e));function W(e){let{mimeTypes:t,fileUploadCallback:n,label:s}=e,l=(0,o.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=()=>console.log("file reading was aborted"),t.onerror=()=>console.log("file reading has failed"),t.onload=()=>{n(t.result)},t.readAsText(e)})},[n]),{getRootProps:i,getInputProps:a,isFocused:c,isDragAccept:d,isDragReject:u}=(0,L.uI)({onDrop:l,accept:t,maxFiles:1});return(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)(J,{...i({isFocused:c,isDragAccept:d,isDragReject:u}),"aria-label":null!=s?s:"dropzone",children:[(0,r.jsx)("input",{...a()}),"Drag and drop a file here, or click to select a file."]})})}var K=n(4641);function Y(){let e=(0,c.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return Y=function(){return e},e}function $(){let e=(0,c.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return $=function(){return e},e}function G(){let e=(0,c.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return G=function(){return e},e}let ee=(0,x.ZP)(H.Z).withConfig({componentId:"sc-b75c0195-0"})(Y()),et=x.ZP.th.withConfig({componentId:"sc-b75c0195-1"})($()),en=x.ZP.td.withConfig({componentId:"sc-b75c0195-2"})(G());function es(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ee,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(et,{children:"Quantity"}),(0,r.jsx)(et,{children:"Front"}),(0,r.jsx)(et,{children:"Front ID"}),(0,r.jsx)(et,{children:"Back"}),(0,r.jsx)(et,{children:"Back ID"})]}),(0,r.jsx)("tbody",{children:[,,,].fill((0,r.jsx)("tr",{children:[,,,,,].fill((0,r.jsx)(en,{}))}))})]}),"Where the columns follow these rules:",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Quantity"}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card front. ",(0,r.jsx)("b",{children:"Cannot be blank."})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card back. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function el(){return(0,r.jsxs)(ee,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(et,{children:"Quantity"}),(0,r.jsx)(et,{children:"Front"}),(0,r.jsx)(et,{children:"Front ID"}),(0,r.jsx)(et,{children:"Back"}),(0,r.jsx)(et,{children:"Back ID"})]}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"2"})}),(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"island"})}),(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"1HsvTYs1..."})}),(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"forest"})}),(0,r.jsx)(en,{})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"3"})}),(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"t:goblin"})}),(0,r.jsx)(en,{}),(0,r.jsx)(en,{}),(0,r.jsx)(en,{children:(0,r.jsx)("code",{children:"1JtXL6Ca..."})})]})]})]})}function er(){let e=(0,h.I0)(),t=(0,h.v9)(j.If),n=(0,Q.l)(void 0,{skip:null==t}),[s,l]=(0,o.useState)(!1),i=()=>l(!1),a=()=>l(!0),c=(0,h.v9)(N.zO),d=t=>{var s;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let l="quantity",r="frontQuery",a="frontSelectedImage",o="backQuery",d="backSelectedImage",u=(0,V.Q)(t,{header:{Quantity:l,Front:r,"Front ID":a,Back:o,"Back ID":d}}),h=e=>{var t,n,s,i,c;let u="".concat(null!==(t=e[l])&&void 0!==t?t:""," ").concat(null!==(n=e[r])&&void 0!==n?n:"");return(null!==(s=e[a])&&void 0!==s?s:"").length>0&&(u+="".concat(m.A0).concat(e[a])),(null!==(i=e[o])&&void 0!==i?i:"").length>0&&(u+=" ".concat(m.M0," ").concat(e[o]),(null!==(c=e[d])&&void 0!==c?c:"").length>0&&(u+="".concat(m.A0).concat(e[d]))),u},x=(0,K.l_)(u.map(h),null!==(s=n.data)&&void 0!==s?s:{});e((0,N.r7)({members:(0,K.wt)(x,c)})),i()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.Z.Item,{onClick:a,children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-spreadsheet",style:{paddingRight:"0.5em"}})," ","CSV"]}),(0,r.jsxs)(g.Z,{show:s,onHide:i,"data-testid":"import-csv",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — CSV"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,r.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,r.jsx)(es,{}),"For example:",(0,r.jsx)(el,{}),(0,r.jsx)("hr",{}),(0,r.jsx)(W,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:d,label:"import-csv"})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(p.Z,{variant:"secondary",onClick:i,children:"Close"})})]})]})}(s=l||(l={})).quantity="Quantity",s.frontQuery="Front",s.frontSelectedImage="Front ID",s.backQuery="Back",s.backSelectedImage="Back ID";var ei=n(2914);function ea(){let e=(0,h.v9)(j.If),t=(0,Q.cf)(void 0,{skip:null==e}),n=(0,Q.l)(void 0,{skip:null==e}),s=(0,h.I0)(),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=()=>i(!0),[d,u]=(0,o.useState)(""),[x,f]=(0,o.useState)(""),v=(0,h.v9)(N.zO),b=e=>{let t=[];for(let n of[m.Zb,m.WU,m.dt])null!=e[n]&&t.push(e[n].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(m.P$[n]).concat((0,K.GL)(e.name))).join("\n"));return t.join("\n\n")};(0,o.useEffect)(()=>{void 0!=t.data&&f(b(t.data))},[t.data]);let y=()=>{var e;let t=(0,K.ts)(d,null!==(e=n.data)&&void 0!==e?e:{});s((0,N.r7)({members:(0,K.wt)(t,v)})),a()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.Z.Item,{onClick:c,children:[(0,r.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Text"]}),(0,r.jsxs)(g.Z,{show:l,onHide:a,onExited:()=>u(""),"data-testid":"import-text",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — Text"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,r.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,r.jsxs)("p",{children:["Specify both front and back queries by separating them with"," ",(0,r.jsx)("code",{children:m.M0})," — for example,"," ",(0,r.jsxs)("code",{children:["4x goblin ",m.M0," ",m.P$[m.WU],"elf"]}),"."]}),(0,r.jsxs)("p",{children:["You may optionally specify the image ID to select with"," ",(0,r.jsx)("code",{children:m.A0})," — for example,"," ",(0,r.jsxs)("code",{children:["brainstorm",m.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]})]}),(0,r.jsx)("p",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back for you."}),(0,r.jsx)(ei.Z.Group,{className:"mb-3",children:(0,r.jsx)(ei.Z.Control,{as:"textarea",rows:12,placeholder:x,required:!0,onChange:e=>u(e.target.value),value:d,"aria-label":"import-text"})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(p.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(p.Z,{variant:"primary",onClick:y,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}var ec=n(5305);function eo(){var e,t;let n=(0,h.v9)(j.If),s=(0,Q.l)(void 0,{skip:null==n}),l=(0,Q.QA)(void 0,{skip:null==n}),i=(0,Q.zr)(void 0,{skip:null==n}),a=(0,h.v9)(N.zO),c=(0,h.I0)(),[d,u]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!1),v=()=>u(!1),b=()=>u(!0),[y,Z]=(0,o.useState)(""),[C,k]=Q.gk.endpoints.queryImportSite.useLazyQuery(),I=(0,o.useCallback)(async()=>{let e=y.trim();if(e.length>0){var t,n;f(!0);let e=await C(y),l=(0,K.ts)(null!==(t=e.data)&&void 0!==t?t:"",null!==(n=s.data)&&void 0!==n?n:{});c((0,N.r7)({members:(0,K.wt)(l,a)})),v(),f(!1)}},[y]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.Z.Item,{onClick:b,children:[(0,r.jsx)("i",{className:"bi bi-link-45deg",style:{paddingRight:"0.5em"}})," ","URL"]}),(0,r.jsxs)(g.Z,{show:d,onHide:v,onExited:()=>Z(""),children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — URL"})}),(0,r.jsxs)(g.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into"," ",null!==(t=null===(e=i.data)||void 0===e?void 0:e.name)&&void 0!==t?t:m.vV,":",(0,r.jsx)("br",{}),null!=l.data?(0,r.jsx)("ul",{children:l.data.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(ec.$,{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(ei.Z.Group,{className:"mb-3",children:(0,r.jsx)(ei.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>Z(e.target.value.trim()),value:y,disabled:x||null==l.data})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(p.Z,{variant:"secondary",onClick:v,children:"Close"}),(0,r.jsx)(p.Z,{variant:"primary",onClick:async()=>{await I()},disabled:x||l.isFetching,children:"Submit"})]})]})]})}function ed(){let e=(0,h.I0)(),[t,n]=(0,o.useState)(!1),s=()=>n(!1),l=()=>n(!0),i=(0,h.v9)(N.sZ),a=(0,h.v9)(N.zO),[c,d]=(0,o.useState)(!1),u=t=>{var n,l,r,o,d;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let u=new DOMParser,h=u.parseFromString(t,"application/xml"),x=h.getElementsByTagName("order")[0],j=x.getElementsByTagName("fronts")[0],g=x.getElementsByTagName("backs")[0],f=j.getElementsByTagName("card"),p=null!=g?g.getElementsByTagName("card"):void 0,v=null!==(l=null===(n=x.getElementsByTagName("cardback")[0])||void 0===n?void 0:n.textContent)&&void 0!==l?l:i,b=0,y=Array.from({length:m.Wn-a},()=>({front:null,back:null}));if(null!=p)for(let e of p){let t=null===(r=e.getElementsByTagName("slots")[0])||void 0===r?void 0:r.textContent;if(null==t)continue;let n=(0,K.XV)(null!==(o=e.getElementsByTagName("query")[0].textContent)&&void 0!==o?o:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;y[t].back={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},b=Math.max(b,t)})}for(let e of f){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,K.XV)(null!==(d=e.getElementsByTagName("query")[0].textContent)&&void 0!==d?d:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;y[t].front={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==y[t].back&&null!=v&&(y[t].back={query:{query:null,card_type:m.dt},selectedImage:v,selected:!1}),b=Math.max(b,t)})}e((0,N.r7)({members:y.slice(0,b+1)})),c&&null!=v&&e((0,N.mp)({selectedImage:v})),s()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.Z.Item,{onClick:l,children:[(0,r.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," ","XML"]}),(0,r.jsxs)(g.Z,{show:t,onHide:s,"data-testid":"import-xml",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — XML"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,r.jsxs)("p",{children:["The ",m.vV," website can generate an XML file representing your project, and the ",m.vV," desktop tool which auto-fills your order into"," ",(0,r.jsx)("a",{href:m.vs,target:"_blank",children:m.Fo})," ","expects a file in this format."]}),(0,r.jsx)(C.ZP,{onClick:()=>d(!c),on:"Update Project with XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:c}),(0,r.jsx)("hr",{}),(0,r.jsx)(W,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:u,label:"import-xml"})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(p.Z,{variant:"secondary",onClick:s,children:"Close"})})]})]})}function eu(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(_.Z,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(_.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("i",{className:"bi bi-plus-circle",style:{paddingRight:"0.5em"}})," ","Add Cards"]})}),(0,r.jsxs)(_.Z.Menu,{children:[(0,r.jsx)(ea,{}),(0,r.jsx)(ed,{}),(0,r.jsx)(er,{}),(0,r.jsx)(eo,{})]})]})})}var eh=n(8102),ex=n(8375),em=n(6728),ej=n(3489),eg=n(2238);function ef(e){var t,n,s,l,i,a;let{slots:c}=e,d=(0,h.I0)(),[u,x]=(0,o.useState)(!1),j=()=>x(!1),g=()=>x(!0),f=e=>{d((0,N.ND)({selectedImage:e,slots:c})),j()},p=(0,h.v9)(e=>c.length>0&&null!=c[0]?e.project.members[c[0][1]][c[0][0]].query:null),v=(0,h.v9)(e=>c.every(l=>{var r,i,a,c,o,d;let[u,h]=l;return(null==p?void 0:p.query)==null&&(null===(r=(null!==(t=e.project.members[h])&&void 0!==t?t:{})[u])||void 0===r?void 0:null===(i=r.query)||void 0===i?void 0:i.query)==null||null!=p&&(null===(a=(null!==(n=e.project.members[h])&&void 0!==n?n:{})[u])||void 0===a?void 0:null===(c=a.query)||void 0===c?void 0:c.query)==p.query&&(null===(o=(null!==(s=e.project.members[h])&&void 0!==s?s:{})[u])||void 0===o?void 0:null===(d=o.query)||void 0===d?void 0:d.card_type)==p.card_type})),b=null!==(l=(0,h.v9)(e=>e.cardbacks.cardbacks))&&void 0!==l?l:[],y=(0,h.v9)(e=>(null==p?void 0:p.query)!=null?null!==(a=(null!==(i=e.searchResults.searchResults[p.query])&&void 0!==i?i:{})[p.card_type])&&void 0!==a?a:[]:c.length>0&&c[0][0]===m.eJ?b:[]);return(0,r.jsxs)(r.Fragment,{children:[y.length>1&&v&&(0,r.jsxs)(_.Z.Item,{className:"text-decoration-none",onClick:g,children:[(0,r.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," ","Change Version"]}),(0,r.jsx)(w,{testId:"bulk-grid-selector",imageIdentifiers:y,show:u,handleClose:j,onClick:f})]})}function ep(e){var t;let{slots:n}=e,s=(0,h.I0)(),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=()=>i(!0),[d,u]=(0,o.useState)(""),x=e=>{e.preventDefault(),s((0,N.qe)({query:d,slots:n})),a()},f=(0,h.v9)(j.If),v=(0,Q.cf)(void 0,{skip:null==f}),b=null!=v.data&&null!=(null!==(t=v.data)&&void 0!==t?t:{})[m.Zb][0]?v.data[m.Zb][0].name:"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.Z.Item,{className:"text-decoration-none",onClick:c,children:[(0,r.jsx)("i",{className:"bi bi-arrow-repeat",style:{paddingRight:"0.5em"}})," ","Change Query"]}),(0,r.jsxs)(g.Z,{show:l,onHide:a,onExited:()=>u(""),children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Change Query"})}),(0,r.jsxs)(g.Z.Body,{children:["Type in a query to update the selected images with and hit"," ",(0,r.jsx)("b",{children:"Submit"}),".",(0,r.jsx)("hr",{}),(0,r.jsx)(ei.Z,{onSubmit:x,id:"changeSelectedImageQueriesForm",children:(0,r.jsx)(ei.Z.Group,{className:"mb-3",children:(0,r.jsx)(ei.Z.Control,{type:"text",placeholder:b,onChange:e=>u(e.target.value),value:d,"aria-label":"change-selected-image-queries-text"})})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(p.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(p.Z,{type:"submit",form:"changeSelectedImageQueriesForm",variant:"primary","aria-label":"change-selected-image-queries-submit",children:"Submit"})]})]})]})}function ev(e){let{slots:t}=e,n=(0,h.I0)(),s=t.map(e=>{let[t,n]=e;return n}),l=()=>n((0,N.uA)({slots:s}));return(0,r.jsxs)(_.Z.Item,{onClick:l,className:"text-decoration-none",children:[(0,r.jsx)("i",{className:"bi bi-x-circle",style:{paddingRight:"0.5em"}})," ","Delete Slots"]})}function eb(){let e=(0,h.v9)(N.NV),t=(0,h.I0)(),n=()=>t((0,N.fP)({selectedStatus:!1,slots:e}));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ex.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,r.jsxs)(Z.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,r.jsx)(p.Z,{onClick:n,className:"ms-auto","data-testid":"clear-selection",children:(0,r.jsx)("i",{className:"bi bi-x-lg"})}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(_.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,r.jsxs)(_.Z.Menu,{children:[(0,r.jsx)(ef,{slots:e}),(0,r.jsx)(ep,{slots:e}),(0,r.jsx)(ev,{slots:e})]})]})]})})})}function ey(){let e=(0,c.Z)(["\n  font-size: 1.25rem;\n"]);return ey=function(){return e},e}function eZ(){let e=(0,eg.UAParser)();return"mobile"===e.device.type?(0,r.jsxs)(ex.Z,{variant:"primary",children:["It seems like you're on a mobile device! The ",m.vV," executable that fills your order into MPC requires a desktop computer."]}):(0,r.jsx)(r.Fragment,{})}let eC=x.ZP.i.withConfig({componentId:"sc-83113317-0"})(ey());function ek(){let e=(0,h.oR)(),t=(0,h.v9)(N.zO),n=(0,h.v9)(N.p4),s=()=>{let t=(0,N.eY)(e.getState());(0,eh.saveAs)(new Blob([t],{type:"text/xml;charset=utf-8"}),"cards.xml")},l=()=>{let t=(0,N.Ed)(e.getState());(0,eh.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"decklist.txt")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Edit MPC Project"}),(0,r.jsx)(eZ,{}),(0,r.jsx)(eb,{}),t>0&&(0,r.jsxs)(ex.Z,{variant:"secondary",children:["Your project contains ",(0,r.jsx)("b",{children:t})," card",1!==t&&"s",", belongs in the MPC bracket of up to"," ",(0,r.jsx)("b",{children:(0,v.wk)(t)})," cards, and is"," ",(0,r.jsx)("b",{children:(0,v.K)(n,0)})," in total.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),t>=m.Wn&&(0,r.jsx)(ex.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Save Project"}),children:(0,r.jsx)(p.Z,{variant:"outline-light",children:(0,r.jsx)(eC,{className:"bi bi-device-ssd"})})})})}),(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Download XML"}),children:(0,r.jsx)(p.Z,{variant:"outline-light",onClick:s,"data-testid":"download-xml",children:(0,r.jsx)(eC,{className:"bi bi-file-earmark-arrow-down"})})})})}),(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Download Decklist"}),children:(0,r.jsx)(p.Z,{variant:"outline-light",onClick:l,"data-testid":"download-decklist",children:(0,r.jsx)(eC,{className:"bi bi-file-text"})})})})}),(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Download Images"}),children:(0,r.jsx)(p.Z,{variant:"outline-light",children:(0,r.jsx)(eC,{className:"bi bi-images"})})})})})]})]})]})}var eI=n(5582),eS=n(975);function ew(e){let{filterSettings:t,setFilterSettings:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,r.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,r.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,r.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,r.jsx)("b",{children:"look the same"}),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)(u.Z,{children:[(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(ei.Z.Label,{children:["Minimum: ",(0,r.jsxs)("b",{children:[t.minimumDPI," DPI"]})]}),(0,r.jsx)(ei.Z.Range,{defaultValue:t.minimumDPI,min:m.sL,max:m.gx,step:m.Ox,onChange:e=>{n({...t,minimumDPI:parseInt(e.target.value)})}})]}),(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(ei.Z.Label,{children:["Maximum: ",(0,r.jsxs)("b",{children:[t.maximumDPI," DPI"]})]}),(0,r.jsx)(ei.Z.Range,{defaultValue:t.maximumDPI,min:m.sL,max:m.gx,step:m.Ox,onChange:e=>{n({...t,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,r.jsxs)(ei.Z.Label,{children:["File size: Up to ",(0,r.jsxs)("b",{children:[t.maximumSize," MB"]})]}),(0,r.jsx)(ei.Z.Range,{defaultValue:t.maximumSize,min:0,max:m.bD,step:m.B9,onChange:e=>{n({...t,maximumSize:parseInt(e.target.value)})}})]})}var eN=n(5749);function eF(e){let{searchTypeSettings:t,setSearchTypeSettings:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(C.ZP,{onClick:()=>n({...t,fuzzySearch:!t.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:t.fuzzySearch})]})}var eT=n(8627);function eP(e){let{sourceSettings:t,setSourceSettings:n}=e,s=(0,h.v9)(eI.TK),l=(0,o.useCallback)((e,s)=>{var l;let r=[...null!==(l=t.sources)&&void 0!==l?l:[]],[i]=r.splice(e,1);r.splice(s,0,i),n({sources:r})},[t.sources,n]),i=e=>{null!=e.destination&&l(e.source.index,e.destination.index)},a=(0,o.useCallback)(e=>{var s;let l=[...null!==(s=t.sources)&&void 0!==s?s:[]];l[e]=[l[e][0],!l[e][1]],n({sources:l})},[t.sources,n]),c=(0,o.useCallback)(()=>{var e;let s=null!==(e=t.sources)&&void 0!==e?e:[],l=!s.some(e=>e[1]),r=s.map(e=>[e[0],l]);n({sources:r})},[t.sources,n]),d=(0,r.jsx)(ec.$,{});if(null!=s){var u;let e=(null!==(u=t.sources)&&void 0!==u?u:[]).map((e,n)=>(0,r.jsx)(eT._l,{draggableId:e[0].toString(),index:n,children:(i,c)=>(0,r.jsxs)("tr",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,children:[(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"20%"},children:(0,r.jsx)(C.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:m.B4+"px",active:e[1],onClick:()=>a(n)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"40%"},children:null!=s[e[0]].external_link?(0,r.jsx)("a",{href:s[e[0]].external_link,target:"_blank",children:s[e[0]].name}):(0,r.jsx)("a",{children:s[e[0]].name})},"".concat(e[0],"-name-column")),(0,r.jsx)("td",{className:"prevent-select",style:{verticalAlign:"middle",width:"30%"},children:s[e[0]].source_type},"".concat(e[0],"-type-column")),(0,r.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-up",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{l(n,0)}},"".concat(e[0],"-up-button"))}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-down",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{var e;l(n,(null!==(e=t.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:(0,r.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));d=(0,r.jsx)(eT.Z5,{onDragEnd:i,children:(0,r.jsx)(eT.bK,{droppableId:"source-order",children:(t,n)=>(0,r.jsx)("div",{style:{height:59*e.length+m.B4+"px"},children:(0,r.jsxs)(H.Z,{ref:t.innerRef,style:{tableLayout:"auto"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{height:m.B4+"px"},onClick:c,children:[(0,r.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Type"}),(0,r.jsx)("th",{}),(0,r.jsx)("th",{})]})}),(0,r.jsxs)("tbody",{children:[e,t.placeholder]})]})})})})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,r.jsxs)("li",{children:["Use the ",(0,r.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]}),(0,r.jsxs)("li",{children:["Click the ",(0,r.jsx)("b",{children:"table header"})," to enable or disable all sources."]})]}),d]})}function eB(){let e=(0,h.I0)(),[t,n]=(0,o.useState)(!1),s=(0,h.v9)(eN.xN),[l,i]=(0,o.useState)(s.searchTypeSettings),[a,c]=(0,o.useState)(s.sourceSettings),[d,u]=(0,o.useState)(s.filterSettings),x=(0,h.v9)(eI.TK);(0,o.useEffect)(()=>{if(null!=x){let t=(0,eS.cI)(x);e((0,eN.Fg)(t.searchTypeSettings)),e((0,eN.Ph)(t.sourceSettings)),e((0,eN._E)(t.filterSettings))}},[e,x]);let m=()=>n(!1),j=(0,o.useCallback)(()=>{i(s.searchTypeSettings),u(s.filterSettings),c(s.sourceSettings),n(!0)},[s]),f=()=>{(0,eS.Wm)({searchTypeSettings:l,sourceSettings:a,filterSettings:d}),e((0,eN.Fg)(l)),e((0,eN.Ph)(a)),e((0,eN._E)(d)),m()};return(0,r.jsxs)("div",{className:"d-grid gap-0",children:[(0,r.jsxs)(p.Z,{variant:"primary",onClick:j,children:[(0,r.jsx)("i",{className:"bi bi-gear",style:{paddingRight:"0.5em"}}),"Search Settings"]}),(0,r.jsxs)(g.Z,{show:t,onHide:f,"data-testid":"search-settings",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Search Settings"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsx)(eF,{searchTypeSettings:l,setSearchTypeSettings:i}),(0,r.jsx)("hr",{}),(0,r.jsx)(ew,{filterSettings:d,setFilterSettings:u}),(0,r.jsx)("hr",{}),(0,r.jsx)(eP,{sourceSettings:a,setSourceSettings:c})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(p.Z,{variant:"secondary",onClick:m,children:"Close Without Saving"}),(0,r.jsx)(p.Z,{variant:"primary",onClick:f,children:"Save Changes"})]})]})]})}var eD=n(5617);function eq(){let e=(0,h.v9)(N.aG),t=(0,h.v9)(e=>e.viewSettings.frontsVisible),n=(0,h.I0)();return e?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(C.ZP,{onClick:()=>n((0,k.$3)()),on:"Switch to Backs",onClassName:"flex-centre",off:"Switch to Fronts",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:t})}function eE(){let e=(0,c.Z)(["\n  position: relative;\n  height: calc(\n    100vh - ","px\n  ); // for compatibility with older browsers\n  height: calc(100dvh - ","px); // handles the ios address bar\n  overflow-y: scroll;\n  overscroll-behavior: none;\n"]);return eE=function(){return e},e}let eO=(0,x.ZP)(d.Z).withConfig({componentId:"sc-880abee4-0"})(eE(),m.tm,m.tm);var ez=function(){var e;let t=(0,h.v9)(j.If),n=(0,h.I0)(),s=null!==(e=(0,h.v9)(e=>e.project.cardback))&&void 0!==e?e:void 0;return(0,o.useEffect)(()=>{n((0,eI.$)())},[n]),(0,r.jsx)(r.Fragment,{children:null!=t?(0,r.jsxs)(u.Z,{className:"g-0",children:[(0,r.jsx)(eO,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",children:(0,r.jsx)(M,{})}),(0,r.jsxs)(eO,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",children:[(0,r.jsx)(ek,{}),(0,r.jsx)(u.Z,{className:"g-0",children:(0,r.jsx)(eq,{})}),(0,r.jsxs)(u.Z,{className:"g-0 py-3",children:[(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(eB,{})}),(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(eu,{})})]}),(0,r.jsx)(d.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,r.jsx)(A,{selectedImage:s})})]})]}):(0,r.jsx)(eD.O,{})})},eM=n(9547);function eR(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Edit MPC Project"})," ",(0,r.jsx)("meta",{name:"description",content:"Edit MPC Project"})]}),(0,r.jsx)(eM.Z,{gutter:0,children:(0,r.jsx)(ez,{})})]})}n(1351)}},function(e){e.O(0,[62,868,32,547,789,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);