try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dd7214d6-eff9-4222-9ce3-5a81b53e120d",e._sentryDebugIdIdentifier="sentry-dbid-dd7214d6-eff9-4222-9ce3-5a81b53e120d")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(6781)}])},6781:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return to}});var s=n(5893),r=n(9008),l=n.n(r),i=n(9984),a=n(139),o=n(7294),c=n(8070),d=n(9101),u=n(2435),h=n(1027),x=n(6960),m=n(7340),j=n(6829),f=n(1296),g=n(4101),p=n(949),b=n(88),v=n(2941),y=n(8043),C=n(6419),w=n(4605),I=n(9887);function Z(e){let{items:t,collapseFrom:n="end",minVisibleItems:r=0,tagName:l="div",className:i="",alwaysRenderOverflow:a=!1,overflowRenderer:c,itemRenderer:d}=e,[u,h]=o.useState({visible:t,overflow:[],lastOverflowCount:0,overflowDirection:"none",opacity:0}),x=o.useRef(null);(0,v.Z)(()=>{j(!1)},[u]),(0,y.Z)(()=>{j(!1)}),(0,C.Z)(()=>{h(()=>({overflowDirection:"none",lastOverflowCount:0,overflow:[],visible:t,opacity:0}))},[t]);let m=0!==u.overflow.length||a?c(u.overflow):null,j=(0,o.useCallback)(t=>{x.current&&(t?h(t=>({overflowDirection:"grow",lastOverflowCount:"none"===t.overflowDirection?t.overflow.length:t.lastOverflowCount,overflow:[],visible:e.items,opacity:0})):x.current.getBoundingClientRect().width<.9?h(e=>{if(e.visible.length<=r)return e;let t="start"===n,s=e.visible.slice(),l=t?s.shift():s.pop();if(!l)return e;let i=t?[...e.overflow,l]:[l,...e.overflow];return{...e,direction:"none"===e.overflowDirection?"shrink":e.overflowDirection,overflow:i,visible:s,opacity:0}}):h(e=>({...e,overflowDirection:"none",opacity:1})))},[n,r,e.items]),[f,{width:g}]=(0,w.Z)(),p=(0,I.Z)(g);return(0,o.useEffect)(()=>{p&&j(g>p)},[g,p]),(0,s.jsxs)(l,{ref:f,className:i,style:{display:"flex",flexWrap:"nowrap",minWidth:0,opacity:u.opacity},children:["start"===n?m:null,u.visible.map(d),"end"===n?m:null,(0,s.jsx)("div",{style:{flexShrink:1,width:1},ref:x})]})}var k=n(3330),N=n(6720),S=n(7137),T=n(7346),F=n(1540);function G(e){let{children:t,expanded:n,onClick:r,zIndex:l,title:i,subtitle:a,sticky:o=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:o?"sticky-top":"",onClick:r,style:{backgroundColor:"#4E5D6B",zIndex:l+100},children:[(0,s.jsx)("hr",{className:"mt-0"}),(0,s.jsxs)(g.Z,{direction:"horizontal",gap:2,className:"d-flex ps-3 pe-3",children:[i,a&&(0,s.jsx)("h6",{className:"text-primary prevent-select",children:a}),(0,s.jsx)("button",{className:"ms-auto bg-transparent border-0",children:(0,s.jsx)("h4",{className:"bi bi-chevron-left rotate-".concat(n?"":"neg","90"),style:{transition:"all 0.25s 0s"}})})]}),(0,s.jsx)("hr",{className:"mb-0"})]}),(0,s.jsx)("div",{className:"py-2"}),(0,s.jsx)(F.Z,{in:n,children:(0,s.jsx)("div",{children:t})})]})}var L=n(3389);let D=e=>{let{initialVisible:t=!1,defaultHeight:n=300,visibleOffset:r=1e3,stayRendered:l=!1,root:i=null,rootElement:a="div",rootElementClass:c="",placeholderElement:d="div",placeholderElementClass:u="",children:h}=e,[x,m]=(0,o.useState)(t),j=(0,o.useRef)(t),f=(0,o.useRef)(null),g=(0,o.useRef)(null),[p,b]=(0,o.useState)(n);(0,o.useEffect)(()=>{if(g.current){let e=g.current,t=new ResizeObserver(e=>{let t=e[0];b(e=>e===n&&(null==t?void 0:t.contentRect.height)!==0||(null==t?void 0:t.contentRect.height)>e?null==t?void 0:t.contentRect.height:e)});return t.observe(e),()=>{e&&t.unobserve(e)}}return()=>{}},[g,b,n]),(0,o.useEffect)(()=>{if(f.current){let e=f.current,t=new IntersectionObserver(e=>{window.requestIdleCallback?window.requestIdleCallback(()=>m(e[0].isIntersecting),{timeout:600}):m(e[0].isIntersecting)},{root:i,rootMargin:"".concat(r,"px 0px ").concat(r,"px 0px")});return t.observe(e),()=>{e&&t.unobserve(e)}}return()=>{}},[]),(0,o.useEffect)(()=>{x&&(j.current=!0)},[x]);let v=(0,o.useMemo)(()=>({height:"".concat(p,"px")}),[p]),y=(0,o.useMemo)(()=>"renderIfVisible ".concat(c),[c]),C=(0,o.useMemo)(()=>"renderIfVisible-placeholder ".concat(u),[u]);return o.createElement(a,{ref:f,className:y,style:v},(0,s.jsx)("div",{ref:g,children:x||l&&j.current?(0,s.jsx)(s.Fragment,{children:h}):o.createElement(d,{className:C})}))};var E=n(502),q=n(3825),B=n(8739),V=n(4706);function O(e){let{identifier:t,index:n,selectImage:r,selectedImage:l}=e;return(0,s.jsx)(E.LL,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:r&&(()=>r(t)),noResultsFound:!1,highlight:t===l},"gridSelector-".concat(t))}function R(e){let{children:t}=e;return(0,s.jsx)(d.Z,{className:"g-0 px-3",xxl:6,xl:6,lg:4,md:3,sm:2,xs:2,children:t})}function z(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,selectedImage:r,sourceNamesByKey:l}=e;return(0,s.jsx)(R,{children:Object.entries(t).map((e,t)=>{let[l,i]=e;return(0,s.jsx)(s.Fragment,{children:i.flatMap(e=>{let[t,l]=e;return(0,s.jsx)(D,{initialVisible:l<20,visibleOffset:500,stayRendered:!0,children:(0,s.jsx)(O,{identifier:t,index:l,selectImage:n,selectedImage:r},"gridSelector-".concat(t,"-card"))},"gridSelector-".concat(t,"-wrapper"))})})})})}function P(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,selectedImage:r,sourceNamesByKey:l}=e,i=(0,u.TL)(),a=(0,u.CG)(V.Hm);return(0,s.jsx)(s.Fragment,{children:Object.entries(t).map((e,t)=>{var o,c;let[d,u]=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G,{expanded:null===(o=a[d])||void 0===o||o,onClick:()=>i((0,V.O6)(d)),zIndex:t,title:(0,s.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:null!==(c=l[d])&&void 0!==c?c:d}),subtitle:"".concat(u.length," version").concat(1!=u.length?"s":""),sticky:!0,children:(0,s.jsx)(R,{children:u.map(e=>{let[t,l]=e;return(0,s.jsx)(D,{initialVisible:l<20,stayRendered:!0,children:(0,s.jsx)(O,{identifier:t,index:l,selectImage:n,selectedImage:r})},"gridSelector-".concat(t,"-wrapper"))})},"".concat(d,"-row"))},d),(0,s.jsx)("div",{className:"py-2"})]})})})}function H(e){let{headerText:t,imageIdentifiers:n,selectedImage:r,handleClick:l}=e,a=(0,u.TL)(),h=(0,u.CG)(V.Mj),x=(0,u.CG)(B.sn),m=Object.keys(x),j=(0,u.CG)(V.Ne),f=(0,u.CG)(e=>(0,q.Ez)(e,n)),p=(0,o.useMemo)(()=>n.reduce((e,t,n)=>{let s=f[t];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([t,n])),e},{}),[f,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"px-3 pb-3",children:(0,s.jsxs)(d.Z,{children:[(0,s.jsx)("h4",{children:t}),(0,s.jsx)(c.Z,{md:8,sm:6,children:(0,s.jsxs)(g.Z,{direction:"horizontal",gap:2,children:[(0,s.jsx)("span",{className:"me-auto",children:"Show\xa0All\xa0Cards..."}),(0,s.jsx)(L.ZP,{onClick:()=>a((0,V.Mo)()),on:"Grouped By Source",onClassName:"flex-centre",off:"Grouped Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:h})]})}),h&&(0,s.jsx)(c.Z,{md:4,sm:6,children:(0,s.jsx)("div",{className:"d-grid g-0",children:(0,s.jsxs)(N.Z,{onClick:()=>a(j?(0,V.X8)():(0,V.tC)(m)),children:[(0,s.jsx)(b.V,{bootstrapIconName:"arrows-".concat(j?"expand":"collapse")})," ",j?"Expand":"Collapse"," All"]})})})]})}),h?(0,s.jsx)(P,{cardIdentifiersAndOptionNumbersBySource:p,selectImage:l,selectedImage:r,sourceNamesByKey:x}):(0,s.jsx)(z,{cardIdentifiersAndOptionNumbersBySource:p,selectImage:l,selectedImage:r,sourceNamesByKey:x})]})}function M(e){let{title:t="Select Version",testId:n,imageIdentifiers:r,selectedImage:l,show:i,handleClose:a,onClick:h}=e,x=(0,u.TL)(),m=(0,u.CG)(V.H_),[j,f]=(0,o.useState)(void 0),[g,p]=(0,o.useState)(""),b=(0,o.useRef)(null),v=(0,o.useCallback)(e=>{h(e),a()},[h,a]),y=(null!=j?j:0)>0&&(null!=j?j:0)<r.length+1||""!==g&&r.includes(g);return(0,s.jsxs)(T.Z,{scrollable:!0,show:i,onEntered:()=>{b.current&&b.current.focus()},onHide:a,size:"xl","data-testid":n,children:[(0,s.jsx)(T.Z.Header,{closeButton:!0,children:(0,s.jsx)(T.Z.Title,{children:t})}),(0,s.jsxs)(T.Z.Body,{className:"d-grid p-0",children:[(0,s.jsx)(G,{expanded:m,onClick:()=>x((0,V.e0)()),zIndex:0,title:(0,s.jsx)("h4",{children:"Jump to Version"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(S.Z,{className:"px-3",id:"jumpToVersionForm",onSubmit:e=>{e.preventDefault(),v(j?r[j-1]:g)},children:[(0,s.jsxs)(d.Z,{className:"g-0",children:[(0,s.jsxs)(c.Z,{lg:3,md:5,children:[(0,s.jsxs)(S.Z.Label,{children:["Specify Option Number, ",(0,s.jsx)("b",{children:"or..."})]}),(0,s.jsx)(S.Z.Control,{ref:b,type:"number",pattern:"[0-9]*",placeholder:"1",value:j,onChange:e=>f(e.target.value?parseInt(e.target.value):void 0),disabled:!!g})]}),(0,s.jsxs)(c.Z,{lg:9,md:7,children:[(0,s.jsx)(S.Z.Label,{children:"Specify ID"}),(0,s.jsx)(S.Z.Control,{type:"text",placeholder:r[0],value:g,onChange:e=>p(e.target.value),disabled:!!j})]})]}),(0,s.jsx)("div",{className:"d-grid gap-0 pt-3",children:(0,s.jsx)(N.Z,{variant:"primary",form:"jumpToVersionForm",type:"submit","aria-label":"jump-to-version-submit",disabled:!y,children:"Select This Version"})})]}),(0,s.jsx)("hr",{})]})}),(0,s.jsx)(H,{headerText:"Browse Versions",imageIdentifiers:r,handleClick:v,selectedImage:l})]}),(0,s.jsx)(T.Z.Footer,{children:(0,s.jsx)(N.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}var _=n(685),A=n(5303),U=n(6171),W=n(470);function X(){let e=(0,m._)(["\n  font-size: 0.9em;\n  user-select: none;\n  -webkit-user-select: none;\n  white-space: nowrap;\n"]);return X=function(){return e},e}function Q(){let e=(0,m._)(["\n  &:hover {\n    background-color: ",";\n  }\n  border-radius: 4px;\n  transition: background-color 0.1s ease-in-out;\n  cursor: pointer;\n"]);return Q=function(){return e},e}function $(){let e=(0,m._)(["\n  position: relative;\n  top: calc(\n    50% - 20px\n  ); // can't use transform: translate(0, -50%) because it messes with the dropdown\n"]);return $=function(){return e},e}let K=j.Z.p(X()),J=(0,j.Z)(K)(Q(),e=>(null==e?void 0:e.danger)?"rgba(255, 50, 50, 30%)":"rgba(100, 100, 100, 30%)");function Y(e){let{children:t,onClick:n,inDropdown:r,danger:l=!1}=e;return r?(0,s.jsx)(f.Z.Item,{onClick:n,children:t}):(0,s.jsx)(J,{onClick:n,className:"px-2 py-1 text-decoration-none",danger:l,children:t})}function ee(e){let{slot:t,inDropdown:n}=e,r=(0,u.TL)();return(0,s.jsxs)(Y,{onClick:()=>r((0,A.HS)({slot:t[1],face:t[0]})),inDropdown:n,children:[(0,s.jsx)(b.V,{bootstrapIconName:"arrows-angle-expand"})," Select Similar"]})}function et(e){let{inDropdown:t}=e,n=(0,u.TL)(),r=(0,u.CG)(A.uq);return(0,s.jsxs)(Y,{onClick:()=>n((0,A.fP)({selectedStatus:!0,slots:r})),inDropdown:t,children:[(0,s.jsx)(b.V,{bootstrapIconName:"arrows-fullscreen"})," Select All"]})}function en(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)(),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=(0,u.CG)(e=>(0,A.CH)(e,t)),d=(0,u.CG)(e=>t.length>0?(0,U.ci)(e,null==c?void 0:c.query,null==c?void 0:c.cardType,t[0][0]):void 0);return t.length>0?(0,s.jsxs)(s.Fragment,{children:[null!=d&&d.length>1&&(0,s.jsxs)(Y,{onClick:()=>i(!0),inDropdown:n,children:[(0,s.jsx)(b.V,{bootstrapIconName:"image"})," Change Version"]}),null!=d&&(0,s.jsx)(M,{testId:"bulk-grid-selector",imageIdentifiers:d,show:l,handleClose:a,onClick:e=>{r((0,A.lE)({selectedImage:e,slots:t,deselect:!0})),a()}})]}):null}function es(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)();return(0,s.jsxs)(Y,{onClick:()=>{r((0,_.Rd)({slots:t,query:null}))},inDropdown:n,children:[(0,s.jsx)(b.V,{bootstrapIconName:"arrow-repeat"})," Change Query"]})}function er(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)();return(0,s.jsxs)(Y,{onClick:()=>r((0,A.It)({slots:t})),inDropdown:n,children:[(0,s.jsx)(b.V,{bootstrapIconName:"slash-circle"})," Clear Query"]})}function el(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)(),l=(0,q.zK)(),i=(0,k.j)(),a=(0,u.CG)(e=>(0,A.Tb)(e,t));return(0,s.jsxs)(Y,{onClick:()=>{let e=0;a.forEach(t=>{l[t]&&l[t].sourceType===p.PO.GoogleDrive&&(i(l[t]),e++)}),r((0,A.fP)({selectedStatus:!1,slots:t})),r((0,W.sc)([Math.random().toString(),{name:"Enqueued Downloads",message:"Enqueued ".concat(e," image download").concat(1!=e?"s":"","!"),level:"info"}]))},inDropdown:n,children:[(0,s.jsx)(b.V,{bootstrapIconName:"cloud-arrow-down"})," Download Images"]})}function ei(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)(),l=t.map(e=>{let[t,n]=e;return n});return(0,s.jsxs)(Y,{onClick:()=>r((0,A.Pm)({slots:l})),inDropdown:n,danger:!0,children:[(0,s.jsx)(b.V,{bootstrapIconName:"x-circle"})," Delete Cards"]})}let ea=(0,j.Z)(g.Z)($());function eo(){let e=(0,u.CG)(A.NV),t=(0,u.CG)(A.aG),n=(0,u.CG)(t=>(0,A.lO)(t,e)),r=(0,u.TL)(),l=(t,n)=>{switch(t){case"selectSimilar":return(0,s.jsx)(ee,{slot:e[0],inDropdown:n},t);case"selectAll":return(0,s.jsx)(et,{inDropdown:n},t);case"changeSelectedImageSelectedImages":return(0,s.jsx)(en,{slots:e,inDropdown:n},t);case"changeSelectedImageQueries":return(0,s.jsx)(es,{slots:e,inDropdown:n},t);case"clearSelectedImageQueries":return(0,s.jsx)(er,{slots:e,inDropdown:n},t);case"downloadSelectedImages":return(0,s.jsx)(el,{slots:e,inDropdown:n},t);case"deleteSelectedImages":return(0,s.jsx)(ei,{slots:e,inDropdown:n},t)}},i=[...e.length>0?["changeSelectedImageSelectedImages","changeSelectedImageQueries"]:[],...e.length>0&&n?["downloadSelectedImages"]:[],...e.length>0&&!t?["deleteSelectedImages"]:[],...1===e.length?["selectSimilar"]:[],...t?[]:["selectAll"]];return(0,s.jsxs)(ea,{direction:"horizontal",className:"px-2",gap:0,children:[(0,s.jsxs)(K,{className:"px-2",children:[(0,s.jsx)("b",{children:e.length})," card",1!=e.length&&"s"," selected."]}),e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y,{onClick:()=>r((0,A.fP)({selectedStatus:!1,slots:e})),inDropdown:!1,children:(0,s.jsx)("i",{className:"bi bi-x-lg"})}),(0,s.jsx)(K,{children:"│"})]}),(0,s.jsx)("div",{className:"ms-auto"}),(0,s.jsx)(Z,{items:i,itemRenderer:(e,t)=>l(e,!1),overflowRenderer:e=>(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(f.Z.Toggle,{style:{height:"29.6px"},variant:"secondary","data-testid":"more-select-options",children:(0,s.jsx)("i",{className:"bi bi-three-dots"})}),(0,s.jsx)(f.Z.Menu,{children:e.map(e=>l(e,!0))})]}),minVisibleItems:0,collapseFrom:"end"})]})}var ec=n(8583),ed=n(9724);function eu(e){let{searchResults:t,selectedImageIndex:n,selected:r,setSelectedImageFromIdentifier:l,handleShowGridSelector:i}=e,a=e=>{void 0!==n&&l(t[(0,ed.N0)(n+e,t.length)])};return(0,s.jsxs)(s.Fragment,{children:[1===t.length&&(0,s.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",t.length]}),t.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(N.Z,{variant:r?"info":"outline-info",className:"mpccard-counter-btn",onClick:i,children:[(null!=n?n:0)+1," / ",t.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(N.Z,{variant:r?"info":"outline-info",className:"prev",onClick:()=>a(-1),children:"❮"}),(0,s.jsx)(N.Z,{variant:r?"info":"outline-info",className:"next",onClick:()=>a(1),children:"❯"})]})]})]})}let eh=(0,o.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:r,selectedImage:l,show:i,handleClose:a,setSelectedImageFromIdentifier:o}=e;return(0,s.jsx)(M,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:r,selectedImage:l,show:i,handleClose:a,onClick:o})}),ex=(0,o.memo)(function(e){var t,n,r;let{searchQuery:l,face:i,slot:a}=e,c=(0,u.TL)(),d=(0,u.CG)(e=>(0,U.ci)(e,null==l?void 0:l.query,null==l?void 0:l.cardType,i)),h=(0,u.CG)(e=>(0,A.AN)(e,i,a)),x=null==h?void 0:h.selectedImage,m=(0,u.CG)(A.NV),j=(0,u.CG)(e=>(0,A.CH)(e,m)),f=m.length>1&&(null==h?void 0:h.selected)&&null!=j&&j.query===(null==l?void 0:l.query)&&j.cardType===(null==l?void 0:l.cardType)?m:[[i,a]],[g,p]=(0,o.useState)(!1),b=e=>{c((0,A.lE)({slots:f,selectedImage:e,deselect:!0}))},v=null!=d?d:[],y=null!=x?v.indexOf(x):void 0,C=null!=y?v[(0,ed.N0)(y+1,v.length)]:void 0,w=null!=y?v[(0,ed.N0)(y-1,v.length)]:void 0,I="Slot ".concat(a+1),Z=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"card-select",onClick:e=>{2===e.detail?c((0,A.HS)({slot:a,face:i})):e.shiftKey?c((0,A.hb)({slot:a,face:i})):c((0,A.O$)({slot:a,face:i}))},"aria-label":"select-".concat(i).concat(a),children:(0,s.jsx)("i",{className:"bi bi".concat(null!==(t=null==h?void 0:h.selected)&&void 0!==t&&t?"-check":"","-square"),"aria-label":"".concat(i).concat(a,"-").concat(null!==(n=null==h?void 0:h.selected)&&void 0!==n&&n?"":"un","checked")})}),(0,s.jsx)("button",{className:"remove",children:(0,s.jsx)("i",{className:"bi bi-x-circle",onClick:()=>{c((0,A.Pm)({slots:[a]}))},"aria-label":"remove-".concat(i).concat(a)})})]}),k=(0,s.jsx)(eu,{searchResults:v,selectedImageIndex:y,selected:null!==(r=null==h?void 0:h.selected)&&void 0!==r&&r,setSelectedImageFromIdentifier:b,handleShowGridSelector:()=>p(!0)});return(0,s.jsxs)("div",{"data-testid":"".concat(i,"-slot").concat(a),children:[(0,s.jsx)(E.LL,{imageIdentifier:x,previousImageIdentifier:C,nextImageIdentifier:w,cardHeaderTitle:I,cardFooter:k,cardHeaderButtons:Z,searchQuery:l,nameOnClick:()=>{var e;c((0,_.Rd)({slots:[[i,a]],query:null!==(e=null==l?void 0:l.query)&&void 0!==e?e:null}))},noResultsFound:null!=d&&0===d.length}),v.length>1&&g&&(0,s.jsx)(eh,{face:i,slot:a,searchResultsForQuery:v,selectedImage:x,show:g,handleClose:()=>p(!1),setSelectedImageFromIdentifier:b})]})});function em(){let e=(0,m._)(["\n  position: absolute;\n  border: 1px darkgray solid;\n  border-radius: 10px;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 50px 0 black inset;\n"]);return em=function(){return e},e}function ej(){let e=(0,m._)(["\n  position: relative;\n  font-size: 1.25em;\n  text-align: center;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 4px 15px #000000;\n  max-width: 90%;\n"]);return ej=function(){return e},e}let ef=j.Z.div(em()),eg=j.Z.div(ej());function ep(){return(0,s.jsx)(ef,{children:(0,s.jsxs)(eg,{children:[(0,s.jsx)("p",{children:"Your project is empty at the moment."}),(0,s.jsxs)("p",{children:["Use the ",(0,s.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function eb(){let e=(0,u.CG)(e=>"loading"===e.searchResults.status),t=(0,u.CG)(A.aG),n=(0,u.CG)(V.ZR),r=(0,u.CG)(A.wH),l=[],a=[];for(let[e,t]of r.entries()){var o,c;l.push((0,s.jsx)(ex,{searchQuery:null===(o=t.front)||void 0===o?void 0:o.query,face:i.i6,slot:e},"".concat(i.i6,"-slot").concat(e))),a.push((0,s.jsx)(ex,{searchQuery:null===(c=t.back)||void 0===c?void 0:c.query,face:i.eJ,slot:e},"".concat(i.eJ,"-slot").concat(e)))}return(0,s.jsxs)(s.Fragment,{children:[0==r.length&&(0,s.jsx)(ep,{}),(0,s.jsx)(d.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"":"none"},children:l}),(0,s.jsx)(d.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"none":""},children:a}),(0,s.jsxs)(T.Z,{scrollable:!0,show:e&&!t,centered:!0,children:[(0,s.jsx)(T.Z.Header,{children:(0,s.jsx)(T.Z.Title,{style:{textAlign:"center",userSelect:"none"},className:"w-100",children:"Loading your cards..."})}),(0,s.jsx)(T.Z.Body,{children:(0,s.jsx)(ec.$,{})})]})]})}var ev=n(5102);let ey=(0,o.memo)(function(e){let{searchResults:t,show:n,handleClose:r}=e,l=(0,u.TL)(),a=(0,u.CG)(A.sZ);return(0,s.jsx)(M,{title:"Select Cardback",testId:"cardback-grid-selector",imageIdentifiers:t,selectedImage:a,show:n,handleClose:r,onClick:e=>{null!=a&&(l((0,A.Tx)({currentImage:a,selectedImage:e,face:i.eJ})),l((0,A.mp)({selectedImage:e})))}})});function eC(e){let{selectedImage:t}=e,n=(0,u.TL)(),r=(0,u.CG)(ev.yU),[l,a]=(0,o.useState)(!1),c=null!=t?r.indexOf(t):void 0,d=null!=c?r[(0,ed.N0)(c+1,r.length)]:void 0,h=null!=c?r[(0,ed.N0)(c-1,r.length)]:void 0,x=(0,s.jsx)(eu,{searchResults:r,selectedImageIndex:c,selected:!1,setSelectedImageFromIdentifier:e=>{null!=t&&null!=c&&(n((0,A.Tx)({currentImage:t,selectedImage:e,face:i.eJ})),n((0,A.mp)({selectedImage:e})))},handleShowGridSelector:()=>a(!0)});return(0,s.jsxs)("div",{"data-testid":"common-cardback",children:[(0,s.jsx)(E.LL,{imageIdentifier:t,previousImageIdentifier:d,nextImageIdentifier:h,cardHeaderTitle:"Cardback",cardFooter:x,noResultsFound:0===r.length}),l&&(0,s.jsx)(ey,{searchResults:r,show:l,handleClose:()=>a(!1)})]})}var ew=n(8112),eI=n(5723),eZ=n(1523);let ek=e=>(function(e){let t=e.reduce((e,t)=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=0),e[t]++,e),{});return Object.keys(t).sort().map(e=>"".concat(t[e],"x ").concat(e))})((function(e,t){function n(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(t,e.selectedImage)&&t[e.selectedImage].cardType===i.Zb?(0,ew.GL)(t[e.selectedImage].name):null}return e.map(e=>[n(e[i.i6]),n(e[i.eJ])])})((0,A.wH)(e),e.cardDocuments.cardDocuments).map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]).concat(i.M0).concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0)).join("\n");async function eN(e,t){let n=ek(e);return await (0,eI.Sv)(new Blob([n],{type:"text/plain;charset=utf-8"}),void 0,"decklist.txt",t),!0}function eS(){let e=(0,u.CG)(A.aG),t=function(){let e=(0,u.qr)(),t=(0,eI.Z9)(),{localFilesService:n}=(0,eZ.d)();return()=>Promise.resolve(t("text","decklist.txt",()=>eN(e.getState(),n)))}();return(0,s.jsxs)(f.Z.Item,{disabled:e,onClick:t,"data-testid":"export-decklist-button",children:[(0,s.jsx)(b.V,{bootstrapIconName:"card-text"})," Decklist"]})}function eT(){let e=(0,u.TL)(),t=(0,u.CG)(A.IH),n=(0,k.j)(),r=(0,q.zK)(),l=async()=>{let t=Object.values(r).filter(e=>e.sourceType===p.PO.GoogleDrive);t.map(n);let s=t.length;e((0,W.sc)([Math.random().toString(),{name:"Enqueued Downloads",message:"Enqueued ".concat(s," image download").concat(1!=s?"s":"","!"),level:"info"}]))};return(0,s.jsxs)(f.Z.Item,{disabled:!t,onClick:l,children:[(0,s.jsx)(b.V,{bootstrapIconName:"image"})," Card Images"]})}var eF=n(1793);function eG(){let e=(0,eF.Z)(),t=(0,u.CG)(A.aG);return(0,s.jsxs)(f.Z.Item,{disabled:t,onClick:e,"data-testid":"export-xml-button",children:[(0,s.jsx)(b.V,{bootstrapIconName:"file-code"})," XML"]})}function eL(){return(0,s.jsxs)(f.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(f.Z.Toggle,{variant:"secondary",id:"dropdown-basic",children:[(0,s.jsx)(b.V,{bootstrapIconName:"cloud-arrow-down"})," Download"]})}),(0,s.jsxs)(f.Z.Menu,{children:[(0,s.jsx)(eG,{}),(0,s.jsx)(eT,{}),(0,s.jsx)(eS,{})]})]})}var eD=n(367),eE=n(8256);function eq(){let e=(0,u.TL)(),t=(0,u.CG)(eE.GG),n=!i.lq[t.cardstock];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{lg:8,md:12,sm:12,xs:12,children:(0,s.jsx)(S.Z.Group,{children:(0,s.jsx)(S.Z.Select,{value:t.cardstock,style:{height:i.B4+"px"},onChange:t=>e((0,eE.HU)(t.target.value)),children:i.Nu.map(e=>(0,s.jsx)("option",{children:e},e))})})}),(0,s.jsx)(c.Z,{lg:4,md:12,sm:12,xs:12,children:(0,s.jsx)(L.ZP,{onClick:()=>e((0,eE.uR)()),on:"Foil",onClassName:"flex-centre",off:"Non-Foil",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:t.foil,disabled:n})})]})}var eB=n(8074);function eV(){let e=(0,m._)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return eV=function(){return e},e}let eO=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",eR=j.Z.div(eV(),e=>eO(e));function ez(e){let{mimeTypes:t,fileUploadCallback:n,label:r,disabled:l}=e,i=(0,u.TL)(),a=(0,o.useCallback)(()=>i((0,W.sc)(["dropzone-onabort",{name:"File upload error",message:"File reading was stopped.",level:"error"}])),[i]),c=(0,o.useCallback)(()=>i((0,W.sc)(["dropzone-onerror",{name:"File upload error",message:"An error occurred while reading the file.",level:"error"}])),[i]),d=(0,o.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=a,t.onerror=c,t.onload=()=>{n(t.result)},t.readAsText(e)})},[n,a,c]),{getRootProps:h,getInputProps:x,isFocused:m,isDragAccept:j,isDragReject:f}=(0,eB.uI)({onDrop:d,accept:t,maxFiles:1,disabled:l});return(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)(eR,{...h({isFocused:m,isDragAccept:j,isDragReject:f}),"aria-label":null!=r?r:"dropzone",children:[(0,s.jsx)("input",{...x()}),"Drag and drop a file here, or click to select a file."]})})}var eP=n(7482),eH=n(7709),eM=n(570);function e_(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP.j,{headers:Object.values(i.bm),data:[,,,].fill([,,,,,].fill(null)),bordered:!0,uniformWidth:!0}),"Where the columns follow these rules:",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.quantity}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.frontQuery}),": Search query for card front."," ",(0,s.jsx)("b",{children:"Cannot be blank."})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.frontSelectedImage}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.backQuery}),": Search query for card back. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.backSelectedImage}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function eA(){return(0,s.jsx)(eP.j,{headers:Object.values(i.bm),data:[[(0,s.jsx)("code",{children:"2"},"row-1-quantity"),(0,s.jsx)("code",{children:"island"},"row-1-front-query"),(0,s.jsx)("code",{children:"1HsvTYs..."},"row-1-front-id"),(0,s.jsx)("code",{children:"forest"},"row-1-back-query"),null],[(0,s.jsx)("code",{children:"3"},"row-2-quantity"),(0,s.jsx)("code",{children:"t:goblin"},"row-2-front-query"),null,null,(0,s.jsx)("code",{children:"1JtXL6C..."},"row-2-back-id")]],bordered:!0})}function eU(){let e=(0,u.TL)(),t=(0,eH.l)(),n=(0,u.CG)(eM.WP),r=(0,u.CG)(A.zO),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=t.isFetching;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.Z.Item,{onClick:()=>i(!0),children:[(0,s.jsx)(b.V,{bootstrapIconName:"file-earmark-spreadsheet"})," CSV"]}),(0,s.jsxs)(T.Z,{scrollable:!0,show:l,onHide:a,"data-testid":"import-csv",children:[(0,s.jsx)(T.Z.Header,{closeButton:!0,children:(0,s.jsx)(T.Z.Title,{children:"Add Cards — CSV"})}),(0,s.jsxs)(T.Z.Body,{children:[(0,s.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,s.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,s.jsx)(e_,{}),"For example:",(0,s.jsx)(eA,{}),(0,s.jsx)("hr",{}),(0,s.jsx)(ez,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:s=>{var l;if("string"!=typeof s){e((0,W.sc)(["invalid-csv-contents",{name:"Invalid CSV file",message:"The contents of the uploaded file did not match the expected text format.",level:"error"}]));return}let i=(0,ew.mR)(s),o=(0,ew.l_)(i,null!==(l=t.data)&&void 0!==l?l:{},n);e((0,A.r7)({members:(0,ew.wt)(o,r)})),a()},label:"import-csv",disabled:c})]}),(0,s.jsx)(T.Z.Footer,{children:(0,s.jsx)(N.Z,{variant:"secondary",onClick:a,children:"Close"})})]})]})}var eW=n(1480);function eX(){let e=(0,u.TL)(),t=(0,eH.cf)(),n=(0,eH.l)(),r=(0,u.CG)(eM.WP),l=(0,u.CG)(A.zO),[a,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(""),x=(0,o.useRef)(null),m=()=>c(!1),j=n.isFetching,g=null!=t.data?(0,ew.z8)(t.data):"";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.Z.Item,{onClick:()=>c(!0),children:[(0,s.jsx)(b.V,{bootstrapIconName:"card-text"})," Text"]}),(0,s.jsxs)(T.Z,{scrollable:!0,show:a,onEntered:()=>{x.current&&x.current.focus()},onHide:m,"data-testid":"import-text",children:[(0,s.jsx)(T.Z.Header,{closeButton:!0,children:(0,s.jsx)(T.Z.Title,{children:"Add Cards — Text"})}),(0,s.jsxs)(T.Z.Body,{children:[(0,s.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,s.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,s.jsx)(eW.Z,{children:(0,s.jsxs)(eW.Z.Item,{eventKey:"0",children:[(0,s.jsx)(eW.Z.Header,{children:"Syntax Guide"}),(0,s.jsx)(eW.Z.Body,{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["There are three types of images in ",i.vV," —"," ",i.Zb.toLowerCase(),"s, ",i.dt.toLowerCase(),"s, and"," ",i.WU.toLowerCase(),"s. If you search for a card, the search results ",(0,s.jsx)("b",{children:"won't contain cardbacks or tokens"}),"."]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:[(0,ed.LF)(i.Zb),"s"]})," are searched for by default."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[i.WU.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:i.P$[i.WU]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[i.P$[i.WU],"your"," ",i.WU.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[i.dt.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:i.P$[i.dt]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[i.P$[i.dt],"your"," ",i.dt.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["You may optionally specify the image ID to select by typing your search query, ",(0,s.jsx)("code",{children:i.A0}),", then the image ID — for example,"," ",(0,s.jsxs)("code",{children:["your ",i.Zb.toLowerCase()," name",i.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]}),"."]}),(0,s.jsxs)("li",{children:["You may specify queries for both the front and the back by separating them with ",(0,s.jsx)("code",{children:i.M0})," — for example,"," ",(0,s.jsxs)("code",{children:["4x goblin ",i.M0," ",i.P$[i.WU],"elf"]}),"."]}),(0,s.jsx)("li",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back card for you."})]})})]})}),(0,s.jsx)("br",{}),(0,s.jsx)(S.Z,{id:"importTextForm",onSubmit:t=>{var s;t.preventDefault();let i=(0,ew.ts)(d,null!==(s=n.data)&&void 0!==s?s:{},r);e((0,A.r7)({members:(0,ew.wt)(i,l)})),h(""),m()},children:(0,s.jsx)(S.Z.Group,{className:"mb-3",children:(0,s.jsx)(S.Z.Control,{ref:x,as:"textarea",onKeyDown:e=>{var t;e.ctrlKey&&"Enter"===e.code&&(null===(t=x.current)||void 0===t?void 0:t.form)&&x.current.form.requestSubmit()},rows:12,placeholder:g,required:!0,onChange:e=>h(e.target.value),value:d,"aria-label":"import-text"})})}),(0,s.jsx)("p",{className:"text-sm-end my-0",children:(0,s.jsx)("i",{children:"Hint: Submit with Control+Enter."})})]}),(0,s.jsxs)(T.Z.Footer,{children:[(0,s.jsx)(N.Z,{variant:"secondary","aria-label":"import-text-close",onClick:m,children:"Close"}),(0,s.jsx)(N.Z,{variant:"primary",form:"importTextForm",type:"submit","aria-label":"import-text-submit",disabled:j,children:"Submit"})]})]})]})}var eQ=n(755);function e$(){var e;let t=(0,u.TL)(),n=(0,eH.l)(),r=(0,eH.QA)(),[l,i]=eH.hi.endpoints.queryImportSite.useLazyQuery(),a=(0,eQ.Sb)(),c=(0,u.CG)(eM.WP),d=(0,u.CG)(A.zO),[h,x]=(0,o.useState)(""),[m,j]=(0,o.useState)(!1),[g,p]=(0,o.useState)(!1),v=(0,o.useRef)(null),y=()=>j(!1),C=(0,o.useCallback)(async e=>{if(e.preventDefault(),h.trim().length>0){p(!0);try{var s,r;let e=await l(h),i=(0,ew.ts)(null!==(s=e.data)&&void 0!==s?s:"",null!==(r=n.data)&&void 0!==r?r:{},c);t((0,A.r7)({members:(0,ew.wt)(i,d)})),y()}catch(e){t((0,W.sc)(["url-import-error",{name:"URL Import Error",message:"An unexpected error occurred while processing your decklist: ".concat(e.message),level:"error"}]))}finally{p(!1)}}},[t,h,n.data,d,l,c]),w=g||r.isFetching||n.isFetching;return r.isFetching||0!==(null!==(e=r.data)&&void 0!==e?e:[]).length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z.Item,{onClick:()=>j(!0),disabled:r.isFetching,children:r.isFetching?(0,s.jsx)(ec.$,{size:1.5}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.V,{bootstrapIconName:"link-45deg"})," URL"]})}),(0,s.jsxs)(T.Z,{scrollable:!0,show:g||m,onEntered:()=>{v.current&&v.current.focus()},onHide:y,onExited:()=>x(""),children:[(0,s.jsx)(T.Z.Header,{closeButton:!0,children:(0,s.jsx)(T.Z.Title,{children:"Add Cards — URL"})}),(0,s.jsxs)(T.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into ",a,":",(0,s.jsx)("br",{}),null!=r.data?(0,s.jsx)("ul",{children:r.data.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(ec.$,{}),(0,s.jsx)("br",{})]}),(0,s.jsx)(S.Z,{id:"importURLForm",onSubmit:C,children:(0,s.jsx)(S.Z.Group,{className:"mb-3",children:(0,s.jsx)(S.Z.Control,{ref:v,type:"url",required:!0,placeholder:"https://",onChange:e=>x(e.target.value.trim()),value:h,disabled:g||null==r.data,"aria-label":"import-url"})})})]}),(0,s.jsxs)(T.Z.Footer,{children:[(0,s.jsx)(N.Z,{variant:"secondary",onClick:y,children:"Close"}),(0,s.jsx)(N.Z,{type:"submit",form:"importURLForm",variant:"primary",disabled:w,style:{width:"4.75em"},children:g?(0,s.jsx)(ec.$,{size:1.5}):"Submit"})]})]})]}):null}var eK=n(5273);function eJ(){let e=(0,u.TL)(),t=(0,u.CG)(A.sZ),n=(0,u.CG)(A.zO),[r,l]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1),x=()=>l(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.Z.Item,{onClick:()=>l(!0),children:[(0,s.jsx)(b.V,{bootstrapIconName:"file-code"})," XML"]}),(0,s.jsxs)(T.Z,{scrollable:!0,show:r,onHide:x,"data-testid":"import-xml",children:[(0,s.jsx)(T.Z.Header,{closeButton:!0,children:(0,s.jsx)(T.Z.Title,{children:"Add Cards — XML"})}),(0,s.jsxs)(T.Z.Body,{children:[(0,s.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,s.jsxs)("p",{children:["The ",i.vV," website can generate an XML file representing your project, and the ",i.vV," desktop tool which auto-fills your order into ",(0,s.jsx)(eK.d,{})," expects a file in this format."]}),(0,s.jsx)("div",{className:"px-0",children:(0,s.jsx)(L.ZP,{onClick:()=>c(!a),on:"Use XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:a})}),(0,s.jsx)("div",{className:"pt-3",children:(0,s.jsx)(L.ZP,{onClick:()=>h(!d),on:"Use XML Finish Settings",onClassName:"flex-centre",off:"Retain Selected Finish Settings",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:d})}),(0,s.jsx)("hr",{}),(0,s.jsx)(ez,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:s=>{var r,l,o,c,u,h,m;if("string"!=typeof s){alert("invalid CSV file uploaded");return}let j=new DOMParser().parseFromString(s,"application/xml").getElementsByTagName("order")[0],f=j.getElementsByTagName("details")[0],g=null===(r=f.getElementsByTagName("stock")[0])||void 0===r?void 0:r.textContent,p=(null===(l=f.getElementsByTagName("foil")[0])||void 0===l?void 0:l.textContent)==="true",b=j.getElementsByTagName("fronts")[0],v=j.getElementsByTagName("backs")[0],y=b.getElementsByTagName("card"),C=null!=v?v.getElementsByTagName("card"):void 0,w=null!==(c=null===(o=j.getElementsByTagName("cardback")[0])||void 0===o?void 0:o.textContent)&&void 0!==c?c:t,I=0,Z=Array.from({length:i.Wn-n},()=>({front:null,back:null}));if(null!=C)for(let e of C){let t=null===(u=e.getElementsByTagName("slots")[0])||void 0===u?void 0:u.textContent;if(null==t)continue;let n=(0,ew.XV)(null!==(h=e.getElementsByTagName("query")[0].textContent)&&void 0!==h?h:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;Z[t].back={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},I=Math.max(I,t)})}for(let e of y){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,ew.XV)(null!==(m=e.getElementsByTagName("query")[0].textContent)&&void 0!==m?m:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;Z[t].front={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==Z[t].back&&(Z[t].back={query:{query:null,cardType:i.dt},selectedImage:w,selected:!1}),I=Math.max(I,t)})}e((0,A.r7)({members:Z.slice(0,I+1)})),a&&null!=w&&e((0,A.mp)({selectedImage:w})),d&&null!=g&&i.Nu.includes(g)&&null!=p&&(e((0,eE.HU)(g)),e((0,eE.Mc)(p))),x()},label:"import-xml",disabled:!1})]}),(0,s.jsx)(T.Z.Footer,{children:(0,s.jsx)(N.Z,{variant:"secondary",onClick:x,children:"Close"})})]})]})}function eY(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(f.Z.Toggle,{variant:"outline-success",id:"dropdown-basic",children:[(0,s.jsx)(b.V,{bootstrapIconName:"plus-circle"})," Add Cards"]})}),(0,s.jsxs)(f.Z.Menu,{children:[(0,s.jsx)(eX,{}),(0,s.jsx)(eJ,{}),(0,s.jsx)(eU,{}),(0,s.jsx)(e$,{})]})]})})}var e0=n(5575),e1=n(6506),e2=n(9983),e3=n(9830);function e4(){let e=(0,u.TL)(),[t,n]=(0,o.useState)(!1),r=(0,u.CG)(eQ.Sj),l=(0,u.CG)(eM.xN),[i,a]=(0,o.useState)(l.searchTypeSettings),[c,d]=(0,o.useState)(l.sourceSettings),[h,x]=(0,o.useState)(l.filterSettings),m=()=>n(!1),j=(0,o.useCallback)(()=>{a(l.searchTypeSettings),x(l.filterSettings),d(l.sourceSettings),n(!0)},[l]),f=()=>{(0,e0.Wm)({searchTypeSettings:i,sourceSettings:c,filterSettings:h}),e((0,eM.Fg)(i)),e((0,eM.Ph)(c)),e((0,eM._E)(h)),m()};return(0,s.jsxs)("div",{className:"d-grid gap-0",children:[(0,s.jsxs)(N.Z,{variant:"primary",onClick:j,children:[(0,s.jsx)(b.V,{bootstrapIconName:"gear"}),"Search Settings"]}),(0,s.jsxs)(T.Z,{scrollable:!0,show:t,onHide:f,"data-testid":"search-settings",children:[(0,s.jsx)(T.Z.Header,{closeButton:!0,children:(0,s.jsx)(T.Z.Title,{children:"Search Settings"})}),(0,s.jsxs)(T.Z.Body,{children:[(0,s.jsx)(e2.I,{searchTypeSettings:i,setSearchTypeSettings:a}),(0,s.jsx)("hr",{}),(0,s.jsx)(e1.f,{filterSettings:h,setFilterSettings:x}),r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{}),(0,s.jsx)(e3.Q,{sourceSettings:c,setSourceSettings:d})]})]}),(0,s.jsxs)(T.Z.Footer,{children:[(0,s.jsx)(N.Z,{variant:"secondary",onClick:m,children:"Close Without Saving"}),(0,s.jsx)(N.Z,{variant:"primary",onClick:f,children:"Save Changes"})]})]})]})}function e5(e){let{children:t,variant:n,...r}=e;return(0,s.jsx)("div",{className:"bg-".concat(n," rounded-lg mt-2"),...r,children:(0,s.jsx)("div",{className:"p-3",children:t})})}var e7=n(9170);function e8(){let e=(0,u.TL)(),t=(0,u.CG)(e7.Cn),n=(0,u.CG)(e7.Jh);return n>0&&t.some(e=>(null==e?void 0:e.front)!=null||(null==e?void 0:e.back)!=null)?(0,s.jsxs)(e5,{variant:"primary",children:[(0,s.jsxs)("p",{children:["Your project specified ",(0,s.jsx)("b",{children:n})," card version",1!=n?"s":""," which couldn't be found."]}),(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsx)(N.Z,{variant:"warning",onClick:()=>e((0,_.K4)("invalidIdentifiers")),children:"Review Invalid Cards"})})]}):null}var e6=n(2238);function e9(){return"mobile"===(0,e6.UAParser)().device.type?(0,s.jsxs)(e5,{variant:"primary",children:["It seems like you're on a mobile device! The ",i.vV," executable that auto-fills your order requires a desktop computer."]}):null}var te=n(525);function tt(){let e=(0,u.CG)(V.ZR),t=(0,u.TL)();return(0,s.jsx)(L.ZP,{onClick:()=>t((0,V.$3)()),on:"Switch to Backs",onClassName:"flex-centre",off:"Switch to Fronts",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:e})}function tn(){let e=(0,u.CG)(A.zO),t=(0,u.CG)(A.p4);return e>0?(0,s.jsxs)(e5,{variant:"secondary",children:[(0,s.jsxs)("p",{children:["Your project contains ",(0,s.jsx)("b",{children:e})," card",1!==e&&"s",", belongs in the bracket of up to"," ",(0,s.jsx)("b",{children:(0,ed.wk)(e)})," cards, and is"," ",(0,s.jsx)("b",{children:(0,ed.K)(t,0)})," in total."]}),e>=i.Wn&&(0,s.jsx)(te.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,s.jsx)(tt,{})]}):null}function ts(){return(0,u.CG)(e=>"loading"===e.cardDocuments.status)?(0,s.jsx)(e5,{variant:"primary",children:(0,s.jsxs)(g.Z,{direction:"horizontal",gap:2,className:"d-flex px-2",children:[(0,s.jsxs)("div",{className:"me-auto",children:[(0,s.jsx)("h5",{children:"Loading Card Data..."}),"Some search results may appear incomplete until this is finished."]}),(0,s.jsx)(ec.$,{size:2.5})]})}):null}function tr(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e9,{}),(0,s.jsx)(ts,{}),(0,s.jsx)(e8,{}),(0,s.jsx)(tn,{})]})}var tl=function(){let e=(0,u.CG)(A.sZ),t=(0,u.CG)(A.aG);return(0,o.useEffect)(()=>{let e=e=>{if(!t)return e.preventDefault(),!1};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t]),(0,s.jsxs)(d.Z,{className:"g-0",children:[(0,s.jsx)(x.V,{className:"g-0",children:(0,s.jsx)(eo,{})}),(0,s.jsx)(h.O,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",heightDelta:i.rE,children:(0,s.jsx)(eb,{})}),(0,s.jsxs)(h.O,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",heightDelta:i.rE,children:[(0,s.jsx)(tr,{}),(0,s.jsx)(d.Z,{className:"g-0 pt-2",children:(0,s.jsx)(eq,{})}),(0,s.jsx)(d.Z,{className:"g-0 pt-2",children:(0,s.jsx)(e4,{})}),(0,s.jsxs)(d.Z,{className:"g-0 pt-2",children:[(0,s.jsx)(c.Z,{lg:7,md:12,sm:12,xs:12,children:(0,s.jsx)(eY,{})}),(0,s.jsx)(c.Z,{lg:5,md:12,sm:12,xs:12,children:(0,s.jsx)(eL,{})}),(0,s.jsx)(eD.y,{})]}),(0,s.jsx)(c.Z,{className:"g-0 pt-2",lg:{span:8,offset:2},md:12,children:(0,s.jsx)(eC,{selectedImage:e})})]})]})},ti=n(1031);function ta(){return(0,eQ.Cn)()?(0,s.jsx)(tl,{}):(0,s.jsx)(a.O,{requirement:"any"})}function to(){return(0,s.jsxs)(ti.XR,{gutter:0,children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Edit MPC Project"})," ",(0,s.jsx)("meta",{name:"description",content:"".concat(i.vV,"&apos;'s rich project editor.")})]}),(0,s.jsx)(ta,{})]})}n(7121)}},function(e){e.O(0,[62,490,204,712,888,774,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);