(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(4817)}])},5617:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var l=n(7297),s=n(5893),r=n(9521),i=n(1677);function a(){let e=(0,l.Z)(["\n  position: absolute;\n  top: 50vh;\n  left: 50vw;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]);return a=function(){return e},e}function c(){let e=(0,l.Z)(["\n  font-size: 1.25em;\n"]);return c=function(){return e},e}let o=r.ZP.div.withConfig({componentId:"sc-88697281-0"})(a()),d=r.ZP.p.withConfig({componentId:"sc-88697281-1"})(c());function u(){return(0,s.jsxs)(o,{children:[(0,s.jsxs)(d,{children:["You haven't configured a server for ",i.vV," to communicate with just yet."]}),(0,s.jsxs)(d,{children:["Click the ",(0,s.jsx)("b",{children:"Configure Server"})," button in the top-right to get started!"]})]})}},4817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e$}});var l,s,r=n(5893),i=n(9008),a=n.n(i),c=n(7297),o=n(7294),d=n(1555),u=n(4051),h=n(2664),x=n(9521),m=n(1677),j=n(8737),g=n(6212),p=n(8789),f=n(7104),v=n(8208),b=n(4291),y=n(6518),C=n(478),Z=n(3389),k=n(5384);function w(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,sourceKeyToName:l}=e;return(0,r.jsx)(u.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(t).map((e,t)=>{let[l,s]=e;return(0,r.jsx)(r.Fragment,{children:s.flatMap(e=>{let[t,l]=e;return(0,r.jsx)(b.Ev,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(l+1),cardOnClick:()=>n(t),noResultsFound:!1},"gridSelector-".concat(t))})})})})}function I(e){var t,n;let{cardIdentifiersAndOptionNumbersBySource:l,selectImage:s,sourceKeyToName:i}=e,a=(0,h.I0)(),c=(0,h.v9)(e=>e.viewSettings.sourcesVisible);return(0,r.jsx)(r.Fragment,{children:Object.entries(l).map((e,l)=>{let[o,d]=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"sticky-top",onClick:()=>a((0,k.O6)(o)),style:{backgroundColor:"#4E5D6B",zIndex:l+100},children:[(0,r.jsx)("hr",{},"".concat(o,"-top-hr")),(0,r.jsxs)(C.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,r.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:i[o]},"".concat(o,"-header-title")),(0,r.jsxs)("h6",{className:"text-primary prevent-select",children:[d.length," version",1!=d.length&&"s"]}),(0,r.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(t=c[o])||void 0===t||t?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(o,"-collapse-header")},"".concat(o,"-arrow"))]},"".concat(o,"-header-inner"))]},"".concat(o,"-header")),(0,r.jsx)(y.Z,{in:null===(n=c[o])||void 0===n||n,"data-testid":"".concat(o,"-collapse"),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{},"".concat(o,"-bottom-hr")),(0,r.jsx)(u.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:d.map(e=>{let[t,n]=e;return(0,r.jsx)(b.Ev,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:()=>s(t),noResultsFound:!1},"gridSelector-".concat(t))})},"".concat(o,"-row"))]})})]})})})}function S(e){var t,n;let{testId:l,imageIdentifiers:s,show:i,handleClose:a,onClick:c}=e,x=(0,h.I0)(),j=(0,h.v9)(e=>e.cardDocuments.cardDocuments),p=(0,h.v9)(e=>e.viewSettings.facetBySource),v=(0,o.useCallback)(e=>{c(e),a()},[c,a]),b=(0,h.v9)(e=>Object.fromEntries(Object.keys(null!==(t=e.sourceDocuments.sourceDocuments)&&void 0!==t?t:{}).map(t=>[e.sourceDocuments.sourceDocuments[t].key,e.sourceDocuments.sourceDocuments[t].name]))),y=Object.keys(b),C=(0,h.v9)(e=>Object.values(null!==(n=e.viewSettings.sourcesVisible)&&void 0!==n?n:{}).includes(!1)),S=(0,o.useMemo)(()=>s.reduce((e,t,n)=>{let l=j[t];return null!=l&&(Object.prototype.hasOwnProperty.call(e,l.source)||(e[l.source]=[]),e[l.source].push([t,n])),e},{}),[j,s]);return(0,r.jsxs)(g.Z,{show:i,onHide:a,size:"lg","data-testid":l,children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Select Version"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(d.Z,{md:8,sm:6,children:(0,r.jsx)(Z.ZP,{onClick:()=>x((0,k.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:p})}),p&&(0,r.jsx)(d.Z,{md:4,sm:6,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(f.Z,{onClick:()=>x(C?(0,k.X8)():(0,k.tC)(y)),children:[(0,r.jsx)("i",{className:"bi bi-arrows-".concat(C?"expand":"collapse"),style:{paddingRight:"0.5em"}})," ",C?"Expand":"Collapse"," All"]})})})]}),(0,r.jsx)("br",{}),p?(0,r.jsx)(I,{cardIdentifiersAndOptionNumbersBySource:S,selectImage:v,sourceKeyToName:b}):(0,r.jsx)(w,{cardIdentifiersAndOptionNumbersBySource:S,selectImage:v,sourceKeyToName:b})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}var N=n(1230);let F=(0,o.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:l,show:s,handleClose:i}=e,a=(0,h.I0)();return(0,r.jsx)(S,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:l,show:s,handleClose:i,onClick:function(e){a((0,N.qP)({face:t,slot:n,selectedImage:e}))}})}),T=(0,o.memo)(function(e){var t,n,l,s;let{searchQuery:i,face:a,slot:c,handleShowDetailedView:d}=e,[u,x]=(0,o.useState)(!1),j=()=>x(!1),g=()=>x(!0),p=(0,h.I0)(),y=null!==(t=(0,h.v9)(e=>e.cardbacks.cardbacks))&&void 0!==t?t:[],C=(0,h.v9)(e=>e.project.cardback),Z=(0,h.v9)(e=>(null==i?void 0:i.query)!=null?(null!==(n=e.searchResults.searchResults[i.query])&&void 0!==n?n:{})[i.card_type]:a===m.eJ?y:[]),k=(0,h.v9)(e=>(null!==(l=e.project.members[c])&&void 0!==l?l:{})[a]),w=null==k?void 0:k.selectedImage,I=()=>{null!=w&&d(w)};(0,o.useEffect)(()=>{if(null!=Z){let e=w;null==e||Z.includes(e)||(e=void 0),Z.length>0&&null==e&&(null!=i?e=Z[0]:a===m.eJ&&null!=C&&(e=C)),p((0,N.qP)({face:a,slot:c,selectedImage:e}))}},[Z,C]);let S=null!=Z?Z:[],T=null!=w?S.indexOf(w):void 0,B=null!=T?S[(0,v.N0)(T+1,S.length)]:void 0,P=null!=T?S[(0,v.N0)(T-1,S.length)]:void 0,E=()=>{p((0,N.NO)({slot:c}))},D=e=>{2==e.detail?p((0,N.HS)({slot:c,face:a})):p((0,N.O$)({slot:c,face:a}))};function q(e){null!=T&&p((0,N.qP)({face:a,slot:c,selectedImage:S[(0,v.N0)(T+e,S.length)]}))}let O=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"card-select",onClick:D,"aria-label":"select-".concat(a).concat(c),children:(0,r.jsx)("i",{className:"bi bi".concat(null!==(s=null==k?void 0:k.selected)&&void 0!==s&&s?"-check":"","-square")})}),(0,r.jsx)("button",{className:"remove",children:(0,r.jsx)("i",{className:"bi bi-x-circle",onClick:E,"aria-label":"remove-".concat(a).concat(c)})})]}),z=(0,r.jsxs)(r.Fragment,{children:[1===S.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",S.length]}),S.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:g,children:[(null!=T?T:0)+1," / ",S.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{variant:"outline-primary",className:"prev",onClick:()=>q(-1),children:"❮"}),(0,r.jsx)(f.Z,{variant:"outline-primary",className:"next",onClick:()=>q(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{style:{contentVisibility:"auto"},"data-testid":"".concat(a,"-slot").concat(c),children:[(0,r.jsx)(b.Ev,{imageIdentifier:w,previousImageIdentifier:B,nextImageIdentifier:P,cardHeaderTitle:"Slot ".concat(c+1),cardFooter:z,cardHeaderButtons:O,imageOnClick:I,searchQuery:i,noResultsFound:null!=Z&&0===Z.length}),S.length>1&&u&&(0,r.jsx)(F,{face:a,slot:c,searchResultsForQuery:S,show:u,handleClose:j})]})});var B=n(7088),P=n(5713);function E(){let e=(0,c.Z)(["\n  position: absolute;\n  border: 1px darkgray solid;\n  border-radius: 10px;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 50px 0 black inset;\n"]);return E=function(){return e},e}function D(){let e=(0,c.Z)(["\n  position: relative;\n  font-size: 1.25em;\n  text-align: center;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 4px 15px #000000;\n  max-width: 90%;\n"]);return D=function(){return e},e}let q=x.ZP.div.withConfig({componentId:"sc-25a11253-0"})(E()),O=x.ZP.div.withConfig({componentId:"sc-25a11253-1"})(D());function z(){return(0,r.jsx)(q,{children:(0,r.jsxs)(O,{children:[(0,r.jsx)("p",{children:"Your project is empty at the moment."}),(0,r.jsxs)("p",{children:["Use the ",(0,r.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function R(){let e=(0,h.I0)(),[t,n]=(0,o.useState)(null),[l,s]=(0,o.useState)(!1),i=()=>s(!1),a=(0,o.useCallback)(e=>{n(e),s(!0)},[]),c="idle"===(0,h.v9)(e=>e.searchResults.status),d=(0,h.v9)(N.LI),x=[],j=[],f=(0,h.v9)(N.wH),v=(0,h.v9)(e=>e.searchSettings),b=(0,o.useMemo)(()=>JSON.stringify(v),[v]),y=JSON.stringify(v.sourceSettings.sources),C=(0,o.useMemo)(()=>{let e=Array.from(d);return e.sort(),JSON.stringify(e)},[f]);for(let[t,n]of((0,o.useEffect)(()=>{null!=v.sourceSettings.sources&&e((0,B.U9)())},[C,y]),(0,o.useEffect)(()=>{null!=v.sourceSettings.sources&&(e((0,P.Ug)()),e((0,B.U9)()))},[b]),f.entries())){var Z,k;x.push((0,r.jsx)(T,{searchQuery:null===(Z=n.front)||void 0===Z?void 0:Z.query,face:m.i6,slot:t,handleShowDetailedView:a},"".concat(m.i6,"-slot").concat(t))),j.push((0,r.jsx)(T,{searchQuery:null===(k=n.back)||void 0===k?void 0:k.query,face:m.eJ,slot:t,handleShowDetailedView:a},"".concat(m.eJ,"-slot").concat(t)))}let w=(0,h.v9)(e=>e.viewSettings.frontsVisible);return(0,r.jsxs)(r.Fragment,{children:[0==f.length&&(0,r.jsx)(z,{}),(0,r.jsx)(u.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:w?"":"none"},children:x}),(0,r.jsx)(u.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:w?"none":""},children:j}),(0,r.jsxs)(g.Z,{show:!c,children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Loading..."})}),(0,r.jsx)(g.Z.Body,{children:"TODO"})]}),null!=t&&(0,r.jsx)(p.t,{imageIdentifier:t,show:l,handleClose:i})]})}let M=(0,o.memo)(function(e){let{searchResults:t,show:n,handleClose:l}=e,s=(0,h.v9)(e=>e.project.cardback),i=(0,h.I0)();return(0,r.jsx)(S,{testId:"cardback-grid-selector",imageIdentifiers:t,show:n,handleClose:l,onClick:function(e){null!=s&&(i((0,N.Tx)({currentImage:s,selectedImage:e,face:m.eJ})),i((0,N.mp)({selectedImage:e})))}})});function A(e){let{selectedImage:t}=e,n=(0,h.I0)(),[l,s]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1),c=()=>s(!1),d=()=>s(!0),u=()=>a(!1),x=()=>a(!0),j=(0,h.v9)(e=>e.cardbacks.cardbacks);(0,o.useEffect)(()=>{j.length>0&&null==t&&n((0,N.mp)({selectedImage:j[0]}))},[j]);let g=null!=t?j.indexOf(t):void 0,y=null!=g?j[(0,v.N0)(g+1,j.length)]:void 0,C=null!=g?j[(0,v.N0)(g-1,j.length)]:void 0;function Z(e){if(null!=t&&null!=g){let l=j[(0,v.N0)(g+e,j.length)];n((0,N.Tx)({currentImage:t,selectedImage:l,face:m.eJ})),n((0,N.mp)({selectedImage:l}))}}let k=(0,r.jsxs)(r.Fragment,{children:[1===j.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",j.length]}),j.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:x,children:[(null!=g?g:0)+1," / ",j.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{variant:"outline-primary",className:"prev",onClick:()=>Z(-1),children:"❮"}),(0,r.jsx)(f.Z,{variant:"outline-primary",className:"next",onClick:()=>Z(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{"data-testid":"common-cardback",children:[(0,r.jsx)(b.Ev,{imageIdentifier:t,previousImageIdentifier:y,nextImageIdentifier:C,cardHeaderTitle:"Cardback",cardFooter:k,imageOnClick:d,noResultsFound:!1}),i&&(0,r.jsx)(M,{searchResults:j,show:i,handleClose:u}),null!=t&&l&&(0,r.jsx)(p.t,{imageIdentifier:t,show:l,handleClose:c})]})}var H=n(8986),_=n(8102),V=n(4641);let L=e=>(function(e,t){let n=function(e,t){function n(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(t,e.selectedImage)&&t[e.selectedImage].card_type===m.Zb?(0,V.GL)(t[e.selectedImage].name):null}return e.map(e=>[n(e[m.i6]),n(e[m.eJ])])}(e,t),l=n.map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]," ").concat(m.M0," ").concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0);return(function(e){let t=e.reduce((e,t)=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=0),e[t]++,e),{});return Object.keys(t).sort().map(e=>"".concat(t[e],"x ").concat(e))})(l).join("\n")})((0,N.wH)(e),e.cardDocuments.cardDocuments);function Q(){let e=(0,h.oR)(),t=()=>{let t=L(e.getState());(0,_.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"decklist.txt")};return(0,r.jsxs)(H.Z.Item,{onClick:t,"data-testid":"export-decklist-button",children:[(0,r.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Decklist"]})}var U=n(8375),X=n(1479),J=n(7932),G=n(5305);function $(){let e=(0,c.Z)(["\n  --bs-progress-bg: #424e5c;\n"]);return $=function(){return e},e}let K=(0,x.ZP)(X.Z).withConfig({componentId:"sc-72993f09-0"})($());function W(){let[e,t]=(0,o.useState)(!1),l=()=>t(!1),s=()=>t(!0),[i,a]=(0,o.useState)(!1),c=Array.from((0,h.v9)(N.pl)),d=(0,h.v9)(e=>Object.fromEntries(c.map(t=>[t,e.cardDocuments.cardDocuments[t]]))),[u,x]=(0,o.useState)(0),j=100*u/c.length,p=(0,o.useRef)(null),v=async()=>{null!=p.current&&(await p.current.terminate(!0),a(!1))},b=async()=>{if(a(!0),x(0),p.current=(0,J.Kg)(()=>(0,J.Cs)(new J.Cc(n.tu(new URL(n.p+n.u(667),n.b)))),5),null!=p.current){let e=Array.from(c),t=0;e.map(e=>{null!=p.current&&p.current.queue(async n=>{let l=d[e];if(null!=l){let t=await n(e);(0,_.saveAs)((0,V.jg)(t),"".concat(l.name," (").concat(l.identifier,").").concat(l.extension))}x(++t)})}),await p.current.settled(),await p.current.terminate(),a(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:s,children:[(0,r.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," Card Images"]}),(0,r.jsxs)(g.Z,{show:e,onHide:l,"data-testid":"export-images",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Download — Card Images"})}),(0,r.jsxs)(g.Z.Body,{children:[i&&(0,r.jsx)("p",{children:"Your images should be downloading now. This might take a while! Please don't close the page until the process is complete."}),!i&&0==c.length&&(0,r.jsx)("p",{children:"You'll be able to download the card images in your project here once you've added some cards."}),!i&&c.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["Click the button below to begin. This will download the"," ",(0,r.jsx)("b",{children:c.length})," unique image",1!=c.length&&"s"," in your project."]}),(0,r.jsx)("p",{children:"This feature may not work as expected on mobile devices."}),(0,r.jsxs)(U.Z,{variant:"info",children:["If you're planning on using the ",m.vV," desktop tool to auto-fill your project, you don't need to download images here. The desktop tool will download your images for you."]})]}),(i||u==c.length&&u>0)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K,{striped:!0,animated:!0,now:j,label:"".concat(u," / ").concat(c.length),variant:"success"}),(0,r.jsx)("br",{})]}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(f.Z,{variant:"danger",onClick:v,children:"Terminate"})}),(0,r.jsx)("br",{})]}),(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(f.Z,{variant:"primary",onClick:b,disabled:i||0==c.length,children:i?(0,r.jsx)(G.$,{size:1.5}):"Download Images"})})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})}var Y=n(3518),ee=n.n(Y),et=n(5688);let en=e=>(function(e,t,n,l,s){let r=function(e,t){let n={front:{},back:{}};for(let[l,s]of e.entries())for(let e of[m.i6,m.eJ]){let r=s[e];if(null!=r){let s=r.selectedImage;null!=s&&s!==t&&(null==n[e][s]?n[e][s]=new Set([l]):n[e][s].add(l))}}return n}(e,n),i=document.implementation.createDocument("","",null),a=i.createElement("order"),c=i.createElement("details"),o=i.createElement("quantity");o.appendChild(i.createTextNode(l.toString())),c.appendChild(o);let d=i.createElement("bracket");d.appendChild(i.createTextNode((0,v.wk)(l).toString())),c.appendChild(d);let u=i.createElement("stock");u.appendChild(i.createTextNode(s.cardstock)),c.appendChild(u);let h=i.createElement("foil");for(let e of(h.appendChild(i.createTextNode(s.foil?"true":"false")),c.appendChild(h),a.append(c),[m.i6,m.eJ]))if(Object.keys(r[e]).length>0){let l=i.createElement("".concat(e,"s"));for(let[s,a]of Object.entries(r[e])){let r=function(e,t,n,l){let s=e[n];if(null==s)return null;let r=t.createElement("card"),i=t.createElement("id");i.appendChild(t.createTextNode(n)),r.appendChild(i);let a=t.createElement("slots");a.appendChild(t.createTextNode(Array.from(l).sort((e,t)=>e-t).toString())),r.appendChild(a);let c=t.createElement("name");c.appendChild(t.createTextNode("".concat(s.name,".").concat(s.extension))),r.append(c);let o=t.createElement("query");return o.appendChild(t.createTextNode(m.P$[s.card_type]+s.searchq)),r.append(o),r}(t,i,s,a),c=s===n&&e===m.eJ;null==r||c||l.appendChild(r)}l.children.length>0&&a.appendChild(l)}let x=i.createElement("cardback");null!=n&&x.appendChild(i.createTextNode(n)),a.appendChild(x),i.appendChild(a);let j=new XMLSerializer,g=j.serializeToString(i);return ee()(g,{collapseContent:!0})})((0,N.wH)(e),e.cardDocuments.cardDocuments,e.project.cardback,(0,N.zO)(e),(0,et.GG)(e));function el(){let e=(0,h.oR)(),t=()=>{let t=en(e.getState());(0,_.saveAs)(new Blob([t],{type:"text/xml;charset=utf-8"}),"cards.xml")};return(0,r.jsxs)(H.Z.Item,{onClick:t,"data-testid":"export-xml-button",children:[(0,r.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," XML"]})}function es(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(H.Z,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(H.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("i",{className:"bi bi-cloud-arrow-down",style:{paddingRight:"0.5em"}})," ","Download"]})}),(0,r.jsxs)(H.Z.Menu,{children:[(0,r.jsx)(Q,{}),(0,r.jsx)(el,{}),(0,r.jsx)(W,{})]})]})})}var er=n(7346);function ei(){let e=(0,h.v9)(et.GG),t=(0,h.I0)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{lg:8,md:12,sm:12,xs:12,children:(0,r.jsx)(er.Z.Group,{children:(0,r.jsx)(er.Z.Select,{value:e.cardstock,style:{height:m.B4+"px"},onChange:e=>t((0,et.HU)(e.target.value)),children:m.Nu.map(e=>(0,r.jsx)("option",{children:e},e))})})}),(0,r.jsx)(d.Z,{lg:4,md:12,sm:12,xs:12,children:(0,r.jsx)(Z.ZP,{onClick:()=>t((0,et.uR)()),on:"Foil",onClassName:"flex-centre",off:"Non-Foil",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:e.foil,disabled:!m.lq[e.cardstock]})})]})}var ea=n(7125),ec=n(5147),eo=n(2283),ed=n(2512);function eu(){let e=(0,c.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return eu=function(){return e},e}let eh=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",ex=x.ZP.div.withConfig({componentId:"sc-d1c6a457-0"})(eu(),e=>eh(e));function em(e){let{mimeTypes:t,fileUploadCallback:n,label:l}=e,s=(0,o.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=()=>console.log("file reading was aborted"),t.onerror=()=>console.log("file reading has failed"),t.onload=()=>{n(t.result)},t.readAsText(e)})},[n]),{getRootProps:i,getInputProps:a,isFocused:c,isDragAccept:d,isDragReject:u}=(0,ed.uI)({onDrop:s,accept:t,maxFiles:1});return(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)(ex,{...i({isFocused:c,isDragAccept:d,isDragReject:u}),"aria-label":null!=l?l:"dropzone",children:[(0,r.jsx)("input",{...a()}),"Drag and drop a file here, or click to select a file."]})})}function ej(){let e=(0,c.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return ej=function(){return e},e}function eg(){let e=(0,c.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return eg=function(){return e},e}function ep(){let e=(0,c.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return ep=function(){return e},e}let ef=(0,x.ZP)(ec.Z).withConfig({componentId:"sc-b75c0195-0"})(ej()),ev=x.ZP.th.withConfig({componentId:"sc-b75c0195-1"})(eg()),eb=x.ZP.td.withConfig({componentId:"sc-b75c0195-2"})(ep());function ey(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ef,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(ev,{children:"Quantity"}),(0,r.jsx)(ev,{children:"Front"}),(0,r.jsx)(ev,{children:"Front ID"}),(0,r.jsx)(ev,{children:"Back"}),(0,r.jsx)(ev,{children:"Back ID"})]}),(0,r.jsx)("tbody",{children:[,,,].fill((0,r.jsx)("tr",{children:[,,,,,].fill((0,r.jsx)(eb,{}))}))})]}),"Where the columns follow these rules:",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Quantity"}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card front. ",(0,r.jsx)("b",{children:"Cannot be blank."})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card back. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function eC(){return(0,r.jsxs)(ef,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(ev,{children:"Quantity"}),(0,r.jsx)(ev,{children:"Front"}),(0,r.jsx)(ev,{children:"Front ID"}),(0,r.jsx)(ev,{children:"Back"}),(0,r.jsx)(ev,{children:"Back ID"})]}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"2"})}),(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"island"})}),(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"1HsvTYs1..."})}),(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"forest"})}),(0,r.jsx)(eb,{})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"3"})}),(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"t:goblin"})}),(0,r.jsx)(eb,{}),(0,r.jsx)(eb,{}),(0,r.jsx)(eb,{children:(0,r.jsx)("code",{children:"1JtXL6Ca..."})})]})]})]})}function eZ(){let e=(0,h.I0)(),t=(0,h.v9)(j.If),n=(0,eo.l)(void 0,{skip:null==t}),[l,s]=(0,o.useState)(!1),i=()=>s(!1),a=()=>s(!0),c=(0,h.v9)(N.zO),d=t=>{var l;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let s="quantity",r="frontQuery",a="frontSelectedImage",o="backQuery",d="backSelectedImage",u=(0,ea.Q)(t,{header:{Quantity:s,Front:r,"Front ID":a,Back:o,"Back ID":d}}),h=e=>{var t,n,l,i,c;let u="".concat(null!==(t=e[s])&&void 0!==t?t:""," ").concat(null!==(n=e[r])&&void 0!==n?n:"");return(null!==(l=e[a])&&void 0!==l?l:"").length>0&&(u+="".concat(m.A0).concat(e[a])),(null!==(i=e[o])&&void 0!==i?i:"").length>0&&(u+=" ".concat(m.M0," ").concat(e[o]),(null!==(c=e[d])&&void 0!==c?c:"").length>0&&(u+="".concat(m.A0).concat(e[d]))),u},x=(0,V.l_)(u.map(h),null!==(l=n.data)&&void 0!==l?l:{});e((0,N.r7)({members:(0,V.wt)(x,c)})),i()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:a,children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-spreadsheet",style:{paddingRight:"0.5em"}})," ","CSV"]}),(0,r.jsxs)(g.Z,{show:l,onHide:i,"data-testid":"import-csv",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — CSV"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,r.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,r.jsx)(ey,{}),"For example:",(0,r.jsx)(eC,{}),(0,r.jsx)("hr",{}),(0,r.jsx)(em,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:d,label:"import-csv"})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:i,children:"Close"})})]})]})}function ek(){let e=(0,h.v9)(j.If),t=(0,eo.cf)(void 0,{skip:null==e}),n=(0,eo.l)(void 0,{skip:null==e}),l=(0,h.I0)(),[s,i]=(0,o.useState)(!1),a=()=>i(!1),c=()=>i(!0),[d,u]=(0,o.useState)(""),[x,p]=(0,o.useState)(""),v=(0,h.v9)(N.zO),b=e=>{let t=[];for(let n of[m.Zb,m.WU,m.dt])null!=e[n]&&t.push(e[n].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(m.P$[n]).concat((0,V.GL)(e.name))).join("\n"));return t.join("\n\n")};(0,o.useEffect)(()=>{void 0!=t.data&&p(b(t.data))},[t.data]);let y=()=>{var e;let t=(0,V.ts)(d,null!==(e=n.data)&&void 0!==e?e:{});l((0,N.r7)({members:(0,V.wt)(t,v)})),a()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:c,children:[(0,r.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Text"]}),(0,r.jsxs)(g.Z,{show:s,onHide:a,onExited:()=>u(""),"data-testid":"import-text",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — Text"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,r.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,r.jsxs)("p",{children:["Specify both front and back queries by separating them with"," ",(0,r.jsx)("code",{children:m.M0})," — for example,"," ",(0,r.jsxs)("code",{children:["4x goblin ",m.M0," ",m.P$[m.WU],"elf"]}),"."]}),(0,r.jsxs)("p",{children:["You may optionally specify the image ID to select with"," ",(0,r.jsx)("code",{children:m.A0})," — for example,"," ",(0,r.jsxs)("code",{children:["brainstorm",m.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]})]}),(0,r.jsx)("p",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back for you."}),(0,r.jsx)(er.Z.Group,{className:"mb-3",children:(0,r.jsx)(er.Z.Control,{as:"textarea",rows:12,placeholder:x,required:!0,onChange:e=>u(e.target.value),value:d,"aria-label":"import-text"})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:y,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}function ew(){var e,t;let n=(0,h.v9)(j.If),l=(0,eo.l)(void 0,{skip:null==n}),s=(0,eo.QA)(void 0,{skip:null==n}),i=(0,eo.zr)(void 0,{skip:null==n}),a=(0,h.v9)(N.zO),c=(0,h.I0)(),[d,u]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),v=()=>u(!1),b=()=>u(!0),[y,C]=(0,o.useState)(""),[Z,k]=eo.gk.endpoints.queryImportSite.useLazyQuery(),w=(0,o.useCallback)(async()=>{let e=y.trim();if(e.length>0){var t,n;p(!0);let e=await Z(y),s=(0,V.ts)(null!==(t=e.data)&&void 0!==t?t:"",null!==(n=l.data)&&void 0!==n?n:{});c((0,N.r7)({members:(0,V.wt)(s,a)})),v(),p(!1)}},[y]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:b,children:[(0,r.jsx)("i",{className:"bi bi-link-45deg",style:{paddingRight:"0.5em"}})," ","URL"]}),(0,r.jsxs)(g.Z,{show:d,onHide:v,onExited:()=>C(""),children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — URL"})}),(0,r.jsxs)(g.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into"," ",null!==(t=null===(e=i.data)||void 0===e?void 0:e.name)&&void 0!==t?t:m.vV,":",(0,r.jsx)("br",{}),null!=s.data?(0,r.jsx)("ul",{children:s.data.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(G.$,{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(er.Z.Group,{className:"mb-3",children:(0,r.jsx)(er.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>C(e.target.value.trim()),value:y,disabled:x||null==s.data})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:v,children:"Close"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:async()=>{await w()},disabled:x||s.isFetching,children:"Submit"})]})]})]})}function eI(){let e=(0,h.I0)(),[t,n]=(0,o.useState)(!1),l=()=>n(!1),s=()=>n(!0),i=(0,h.v9)(N.sZ),a=(0,h.v9)(N.zO),[c,d]=(0,o.useState)(!1),[u,x]=(0,o.useState)(!1),j=t=>{var n,s,r,o,d,h,x;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let j=new DOMParser,g=j.parseFromString(t,"application/xml"),p=g.getElementsByTagName("order")[0],f=p.getElementsByTagName("details")[0],v=null===(n=f.getElementsByTagName("stock")[0])||void 0===n?void 0:n.textContent,b=(null===(s=f.getElementsByTagName("foil")[0])||void 0===s?void 0:s.textContent)==="true",y=p.getElementsByTagName("fronts")[0],C=p.getElementsByTagName("backs")[0],Z=y.getElementsByTagName("card"),k=null!=C?C.getElementsByTagName("card"):void 0,w=null!==(o=null===(r=p.getElementsByTagName("cardback")[0])||void 0===r?void 0:r.textContent)&&void 0!==o?o:i,I=0,S=Array.from({length:m.Wn-a},()=>({front:null,back:null}));if(null!=k)for(let e of k){let t=null===(d=e.getElementsByTagName("slots")[0])||void 0===d?void 0:d.textContent;if(null==t)continue;let n=(0,V.XV)(null!==(h=e.getElementsByTagName("query")[0].textContent)&&void 0!==h?h:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var l;S[t].back={query:n,selectedImage:null!==(l=e.getElementsByTagName("id")[0].textContent)&&void 0!==l?l:void 0,selected:!1},I=Math.max(I,t)})}for(let e of Z){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,V.XV)(null!==(x=e.getElementsByTagName("query")[0].textContent)&&void 0!==x?x:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var l;S[t].front={query:n,selectedImage:null!==(l=e.getElementsByTagName("id")[0].textContent)&&void 0!==l?l:void 0,selected:!1},null==S[t].back&&null!=w&&(S[t].back={query:{query:null,card_type:m.dt},selectedImage:w,selected:!1}),I=Math.max(I,t)})}e((0,N.r7)({members:S.slice(0,I+1)})),c&&null!=w&&e((0,N.mp)({selectedImage:w})),u&&null!=v&&m.Nu.includes(v)&&null!=b&&(e((0,et.HU)(v)),e((0,et.Mc)(b))),l()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:s,children:[(0,r.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," ","XML"]}),(0,r.jsxs)(g.Z,{show:t,onHide:l,"data-testid":"import-xml",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — XML"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,r.jsxs)("p",{children:["The ",m.vV," website can generate an XML file representing your project, and the ",m.vV," desktop tool which auto-fills your order into"," ",(0,r.jsx)("a",{href:m.vs,target:"_blank",children:m.Fo})," ","expects a file in this format."]}),(0,r.jsx)(Z.ZP,{onClick:()=>d(!c),on:"Use XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:c}),(0,r.jsx)("div",{className:"pt-3",children:(0,r.jsx)(Z.ZP,{onClick:()=>x(!u),on:"Use XML Finish Settings",onClassName:"flex-centre",off:"Retain Selected Finish Settings",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:u})}),(0,r.jsx)("hr",{}),(0,r.jsx)(em,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:j,label:"import-xml"})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})}function eS(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(H.Z,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(H.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("i",{className:"bi bi-plus-circle",style:{paddingRight:"0.5em"}})," ","Add Cards"]})}),(0,r.jsxs)(H.Z.Menu,{children:[(0,r.jsx)(ek,{}),(0,r.jsx)(eI,{}),(0,r.jsx)(eZ,{}),(0,r.jsx)(ew,{})]})]})})}(l=s||(s={})).quantity="Quantity",l.frontQuery="Front",l.frontSelectedImage="Front ID",l.backQuery="Back",l.backSelectedImage="Back ID";var eN=n(2238);function eF(e){var t,n,l,s,i,a;let{slots:c}=e,d=(0,h.I0)(),[u,x]=(0,o.useState)(!1),j=()=>x(!1),g=()=>x(!0),p=e=>{d((0,N.ND)({selectedImage:e,slots:c})),j()},f=(0,h.v9)(e=>c.length>0&&null!=c[0]?e.project.members[c[0][1]][c[0][0]].query:null),v=(0,h.v9)(e=>c.every(s=>{var r,i,a,c,o,d;let[u,h]=s;return(null==f?void 0:f.query)==null&&(null===(r=(null!==(t=e.project.members[h])&&void 0!==t?t:{})[u])||void 0===r?void 0:null===(i=r.query)||void 0===i?void 0:i.query)==null||null!=f&&(null===(a=(null!==(n=e.project.members[h])&&void 0!==n?n:{})[u])||void 0===a?void 0:null===(c=a.query)||void 0===c?void 0:c.query)==f.query&&(null===(o=(null!==(l=e.project.members[h])&&void 0!==l?l:{})[u])||void 0===o?void 0:null===(d=o.query)||void 0===d?void 0:d.card_type)==f.card_type})),b=null!==(s=(0,h.v9)(e=>e.cardbacks.cardbacks))&&void 0!==s?s:[],y=(0,h.v9)(e=>(null==f?void 0:f.query)!=null?null!==(a=(null!==(i=e.searchResults.searchResults[f.query])&&void 0!==i?i:{})[f.card_type])&&void 0!==a?a:[]:c.length>0&&c[0][0]===m.eJ?b:[]);return(0,r.jsxs)(r.Fragment,{children:[y.length>1&&v&&(0,r.jsxs)(H.Z.Item,{className:"text-decoration-none",onClick:g,children:[(0,r.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," ","Change Version"]}),(0,r.jsx)(S,{testId:"bulk-grid-selector",imageIdentifiers:y,show:u,handleClose:j,onClick:p})]})}function eT(e){var t;let{slots:n}=e,l=(0,h.I0)(),[s,i]=(0,o.useState)(!1),a=()=>i(!1),c=()=>i(!0),[d,u]=(0,o.useState)(""),x=e=>{e.preventDefault(),l((0,N.qe)({query:d,slots:n})),a()},p=(0,h.v9)(j.If),v=(0,eo.cf)(void 0,{skip:null==p}),b=null!=v.data&&null!=(null!==(t=v.data)&&void 0!==t?t:{})[m.Zb][0]?v.data[m.Zb][0].name:"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{className:"text-decoration-none",onClick:c,children:[(0,r.jsx)("i",{className:"bi bi-arrow-repeat",style:{paddingRight:"0.5em"}})," ","Change Query"]}),(0,r.jsxs)(g.Z,{show:s,onHide:a,onExited:()=>u(""),children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Change Query"})}),(0,r.jsxs)(g.Z.Body,{children:["Type in a query to update the selected images with and hit"," ",(0,r.jsx)("b",{children:"Submit"}),".",(0,r.jsx)("hr",{}),(0,r.jsx)(er.Z,{onSubmit:x,id:"changeSelectedImageQueriesForm",children:(0,r.jsx)(er.Z.Group,{className:"mb-3",children:(0,r.jsx)(er.Z.Control,{type:"text",placeholder:b,onChange:e=>u(e.target.value),value:d,"aria-label":"change-selected-image-queries-text"})})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(f.Z,{type:"submit",form:"changeSelectedImageQueriesForm",variant:"primary","aria-label":"change-selected-image-queries-submit",children:"Submit"})]})]})]})}function eB(e){let{slots:t}=e,n=(0,h.I0)(),l=t.map(e=>{let[t,n]=e;return n}),s=()=>n((0,N.uA)({slots:l}));return(0,r.jsxs)(H.Z.Item,{onClick:s,className:"text-decoration-none",children:[(0,r.jsx)("i",{className:"bi bi-x-circle",style:{paddingRight:"0.5em"}})," ","Delete Slots"]})}function eP(){let e=(0,h.v9)(N.NV),t=(0,h.I0)(),n=()=>t((0,N.fP)({selectedStatus:!1,slots:e}));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,r.jsxs)(C.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,r.jsx)(f.Z,{onClick:n,className:"ms-auto","data-testid":"clear-selection",children:(0,r.jsx)("i",{className:"bi bi-x-lg"})}),(0,r.jsxs)(H.Z,{children:[(0,r.jsx)(H.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,r.jsxs)(H.Z.Menu,{children:[(0,r.jsx)(eF,{slots:e}),(0,r.jsx)(eT,{slots:e}),(0,r.jsx)(eB,{slots:e})]})]})]})})})}function eE(){let e=(0,h.v9)(e=>e.viewSettings.frontsVisible),t=(0,h.I0)();return(0,r.jsx)(Z.ZP,{onClick:()=>t((0,k.$3)()),on:"Show Fronts",onClassName:"flex-centre",off:"Show Backs",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:e})}function eD(){let e=(0,c.Z)(["\n  font-size: 1.25rem;\n"]);return eD=function(){return e},e}function eq(){let e=(0,eN.UAParser)();return"mobile"===e.device.type?(0,r.jsxs)(U.Z,{variant:"primary",children:["It seems like you're on a mobile device! The ",m.vV," executable that fills your order into MPC requires a desktop computer."]}):(0,r.jsx)(r.Fragment,{})}function eO(){let e=(0,h.v9)(N.zO),t=(0,h.v9)(N.p4);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Edit MPC Project"}),(0,r.jsx)(eq,{}),(0,r.jsx)(eP,{}),e>0&&(0,r.jsxs)(U.Z,{variant:"secondary",children:["Your project contains ",(0,r.jsx)("b",{children:e})," card",1!==e&&"s",", belongs in the MPC bracket of up to"," ",(0,r.jsx)("b",{children:(0,v.wk)(e)})," cards, and is"," ",(0,r.jsx)("b",{children:(0,v.K)(t,0)})," in total.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),e>=m.Wn&&(0,r.jsx)(U.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,r.jsx)(eE,{})]})]})}x.ZP.i.withConfig({componentId:"sc-755eec93-0"})(eD());var ez=n(5582),eR=n(975);function eM(e){let{filterSettings:t,setFilterSettings:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,r.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,r.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,r.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,r.jsx)("b",{children:"look the same"}),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)(u.Z,{children:[(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(er.Z.Label,{children:["Minimum: ",(0,r.jsxs)("b",{children:[t.minimumDPI," DPI"]})]}),(0,r.jsx)(er.Z.Range,{defaultValue:t.minimumDPI,min:m.sL,max:m.gx,step:m.Ox,onChange:e=>{n({...t,minimumDPI:parseInt(e.target.value)})}})]}),(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(er.Z.Label,{children:["Maximum: ",(0,r.jsxs)("b",{children:[t.maximumDPI," DPI"]})]}),(0,r.jsx)(er.Z.Range,{defaultValue:t.maximumDPI,min:m.sL,max:m.gx,step:m.Ox,onChange:e=>{n({...t,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,r.jsxs)(er.Z.Label,{children:["File size: Up to ",(0,r.jsxs)("b",{children:[t.maximumSize," MB"]})]}),(0,r.jsx)(er.Z.Range,{defaultValue:t.maximumSize,min:0,max:m.bD,step:m.B9,onChange:e=>{n({...t,maximumSize:parseInt(e.target.value)})}})]})}var eA=n(5749);function eH(e){let{searchTypeSettings:t,setSearchTypeSettings:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(Z.ZP,{onClick:()=>n({...t,fuzzySearch:!t.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:t.fuzzySearch})]})}var e_=n(8627);function eV(e){let{sourceSettings:t,setSourceSettings:n}=e,l=(0,h.v9)(ez.TK),s=(0,o.useCallback)((e,l)=>{var s;let r=[...null!==(s=t.sources)&&void 0!==s?s:[]],[i]=r.splice(e,1);r.splice(l,0,i),n({sources:r})},[t.sources,n]),i=e=>{null!=e.destination&&s(e.source.index,e.destination.index)},a=(0,o.useCallback)(e=>{var l;let s=[...null!==(l=t.sources)&&void 0!==l?l:[]];s[e]=[s[e][0],!s[e][1]],n({sources:s})},[t.sources,n]),c=(0,o.useCallback)(()=>{var e;let l=null!==(e=t.sources)&&void 0!==e?e:[],s=!l.some(e=>e[1]),r=l.map(e=>[e[0],s]);n({sources:r})},[t.sources,n]),d=(0,r.jsx)(G.$,{});if(null!=l){var u;let e=(null!==(u=t.sources)&&void 0!==u?u:[]).map((e,n)=>(0,r.jsx)(e_._l,{draggableId:e[0].toString(),index:n,children:(i,c)=>(0,r.jsxs)("tr",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,children:[(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"20%"},children:(0,r.jsx)(Z.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:m.B4+"px",active:e[1],onClick:()=>a(n)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"40%"},children:null!=l[e[0]].external_link?(0,r.jsx)("a",{href:l[e[0]].external_link,target:"_blank",children:l[e[0]].name}):(0,r.jsx)("a",{children:l[e[0]].name})},"".concat(e[0],"-name-column")),(0,r.jsx)("td",{className:"prevent-select",style:{verticalAlign:"middle",width:"30%"},children:l[e[0]].source_type},"".concat(e[0],"-type-column")),(0,r.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-up",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{s(n,0)}},"".concat(e[0],"-up-button"))}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-down",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{var e;s(n,(null!==(e=t.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:(0,r.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));d=(0,r.jsx)(e_.Z5,{onDragEnd:i,children:(0,r.jsx)(e_.bK,{droppableId:"source-order",children:(t,n)=>(0,r.jsx)("div",{style:{height:59*e.length+m.B4+"px"},children:(0,r.jsxs)(ec.Z,{ref:t.innerRef,style:{tableLayout:"auto"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{height:m.B4+"px"},onClick:c,children:[(0,r.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Type"}),(0,r.jsx)("th",{}),(0,r.jsx)("th",{})]})}),(0,r.jsxs)("tbody",{children:[e,t.placeholder]})]})})})})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,r.jsxs)("li",{children:["Use the ",(0,r.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]}),(0,r.jsxs)("li",{children:["Click the ",(0,r.jsx)("b",{children:"table header"})," to enable or disable all sources."]})]}),d]})}function eL(){let e=(0,h.I0)(),[t,n]=(0,o.useState)(!1),l=(0,h.v9)(eA.xN),[s,i]=(0,o.useState)(l.searchTypeSettings),[a,c]=(0,o.useState)(l.sourceSettings),[d,u]=(0,o.useState)(l.filterSettings),x=(0,h.v9)(ez.TK);(0,o.useEffect)(()=>{if(null!=x){let t=(0,eR.cI)(x);e((0,eA.Fg)(t.searchTypeSettings)),e((0,eA.Ph)(t.sourceSettings)),e((0,eA._E)(t.filterSettings))}},[e,x]);let m=()=>n(!1),j=(0,o.useCallback)(()=>{i(l.searchTypeSettings),u(l.filterSettings),c(l.sourceSettings),n(!0)},[l]),p=()=>{(0,eR.Wm)({searchTypeSettings:s,sourceSettings:a,filterSettings:d}),e((0,eA.Fg)(s)),e((0,eA.Ph)(a)),e((0,eA._E)(d)),m()};return(0,r.jsxs)("div",{className:"d-grid gap-0",children:[(0,r.jsxs)(f.Z,{variant:"primary",onClick:j,children:[(0,r.jsx)("i",{className:"bi bi-gear",style:{paddingRight:"0.5em"}}),"Search Settings"]}),(0,r.jsxs)(g.Z,{show:t,onHide:p,"data-testid":"search-settings",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Search Settings"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsx)(eH,{searchTypeSettings:s,setSearchTypeSettings:i}),(0,r.jsx)("hr",{}),(0,r.jsx)(eM,{filterSettings:d,setFilterSettings:u}),(0,r.jsx)("hr",{}),(0,r.jsx)(eV,{sourceSettings:a,setSourceSettings:c})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:m,children:"Close Without Saving"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:p,children:"Save Changes"})]})]})]})}var eQ=n(5617);function eU(){let e=(0,c.Z)(["\n  position: relative;\n  height: calc(\n    100vh - ","px\n  ); // for compatibility with older browsers\n  height: calc(100dvh - ","px); // handles the ios address bar\n  overflow-y: scroll;\n  overscroll-behavior: none;\n"]);return eU=function(){return e},e}let eX=(0,x.ZP)(d.Z).withConfig({componentId:"sc-c3c162-0"})(eU(),m.tm,m.tm);var eJ=function(){var e;let t=(0,h.v9)(j.If),n=(0,h.I0)(),l=null!==(e=(0,h.v9)(e=>e.project.cardback))&&void 0!==e?e:void 0;return(0,o.useEffect)(()=>{n((0,ez.$)())},[n]),(0,r.jsx)(r.Fragment,{children:null!=t?(0,r.jsxs)(u.Z,{className:"g-0",children:[(0,r.jsx)(eX,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",children:(0,r.jsx)(R,{})}),(0,r.jsxs)(eX,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",children:[(0,r.jsx)(eO,{}),(0,r.jsx)(u.Z,{className:"g-0 pb-3",children:(0,r.jsx)(ei,{})}),(0,r.jsx)(u.Z,{className:"g-0",children:(0,r.jsx)(eL,{})}),(0,r.jsxs)(u.Z,{className:"g-0 py-3",children:[(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(eS,{})}),(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(es,{})})]}),(0,r.jsx)(d.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,r.jsx)(A,{selectedImage:l})})]})]}):(0,r.jsx)(eQ.O,{})})},eG=n(4353);function e$(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Edit MPC Project"})," ",(0,r.jsx)("meta",{name:"description",content:"Edit MPC Project"})]}),(0,r.jsx)(eG.Z,{gutter:0,children:(0,r.jsx)(eJ,{})})]})}n(1351)}},function(e){e.O(0,[62,51,151,353,789,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);