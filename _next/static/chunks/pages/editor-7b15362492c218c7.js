try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8c47017e-6d06-4d38-ac05-68e91f84f433",e._sentryDebugIdIdentifier="sentry-dbid-8c47017e-6d06-4d38-ac05-68e91f84f433")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(6781)}])},6781:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e9}});var s=n(5893),r=n(9008),l=n.n(r),i=n(9984),a=n(139),o=n(7294),c=n(8070),d=n(9101),u=n(2435),h=n(1027),x=n(6960),m=n(6355),j=n(4101),f=n(9521),g=n(88),p=n(2941),b=n(8043),v=n(6419),y=n(4605),C=n(9887);function w(e){let{items:t,collapseFrom:n="end",minVisibleItems:r=0,tagName:l="div",className:i="",alwaysRenderOverflow:a=!1,overflowRenderer:c,itemRenderer:d}=e,[u,h]=o.useState({visible:t,overflow:[],lastOverflowCount:0,overflowDirection:"none",opacity:0}),x=o.useRef(null);(0,p.Z)(()=>{j(!1)},[u]),(0,b.Z)(()=>{j(!1)}),(0,v.Z)(()=>{h(()=>({overflowDirection:"none",lastOverflowCount:0,overflow:[],visible:t,opacity:0}))},[t]);let m=0!==u.overflow.length||a?c(u.overflow):null,j=(0,o.useCallback)(t=>{x.current&&(t?h(t=>({overflowDirection:"grow",lastOverflowCount:"none"===t.overflowDirection?t.overflow.length:t.lastOverflowCount,overflow:[],visible:e.items,opacity:0})):x.current.getBoundingClientRect().width<.9?h(e=>{if(e.visible.length<=r)return e;let t="start"===n,s=e.visible.slice(),l=t?s.shift():s.pop();if(!l)return e;let i=t?[...e.overflow,l]:[l,...e.overflow];return{...e,direction:"none"===e.overflowDirection?"shrink":e.overflowDirection,overflow:i,visible:s,opacity:0}}):h(e=>({...e,overflowDirection:"none",opacity:1})))},[n,r,e.items]),[f,{width:g}]=(0,y.Z)(),w=(0,C.Z)(g);return(0,o.useEffect)(()=>{w&&j(g>w)},[g,w]),(0,s.jsxs)(l,{ref:f,className:i,style:{display:"flex",flexWrap:"nowrap",minWidth:0,opacity:u.opacity},children:["start"===n?m:null,u.visible.map(d),"end"===n?m:null,(0,s.jsx)("div",{style:{flexShrink:1,width:1},ref:x})]})}var I=n(3330),Z=n(6720),k=n(7137),N=n(8696),S=n(1540);function T(e){let{children:t,expanded:n,onClick:r,zIndex:l,title:i,subtitle:a,sticky:o=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:o?"sticky-top":"",onClick:r,style:{backgroundColor:"#4E5D6B",zIndex:l+100},children:[(0,s.jsx)("hr",{className:"mt-0"}),(0,s.jsxs)(j.Z,{direction:"horizontal",gap:2,className:"d-flex ps-3 pe-3",children:[i,a&&(0,s.jsx)("h6",{className:"text-primary prevent-select",children:a}),(0,s.jsx)("button",{className:"ms-auto bg-transparent border-0",children:(0,s.jsx)("h4",{className:"bi bi-chevron-left rotate-".concat(n?"":"neg","90"),style:{transition:"all 0.25s 0s"}})})]}),(0,s.jsx)("hr",{className:"mb-0"})]}),(0,s.jsx)("div",{className:"py-2"}),(0,s.jsx)(S.Z,{in:n,children:(0,s.jsx)("div",{children:t})})]})}var F=n(3389);let G=e=>{let{initialVisible:t=!1,defaultHeight:n=300,visibleOffset:r=1e3,stayRendered:l=!1,root:i=null,rootElement:a="div",rootElementClass:c="",placeholderElement:d="div",placeholderElementClass:u="",children:h}=e,[x,m]=(0,o.useState)(t),j=(0,o.useRef)(t),f=(0,o.useRef)(null),g=(0,o.useRef)(null),[p,b]=(0,o.useState)(n);(0,o.useEffect)(()=>{if(g.current){let e=g.current,t=new ResizeObserver(e=>{let t=e[0];b(e=>e===n&&(null==t?void 0:t.contentRect.height)!==0||(null==t?void 0:t.contentRect.height)>e?null==t?void 0:t.contentRect.height:e)});return t.observe(e),()=>{e&&t.unobserve(e)}}return()=>{}},[g,b,n]),(0,o.useEffect)(()=>{if(f.current){let e=f.current,t=new IntersectionObserver(e=>{window.requestIdleCallback?window.requestIdleCallback(()=>m(e[0].isIntersecting),{timeout:600}):m(e[0].isIntersecting)},{root:i,rootMargin:"".concat(r,"px 0px ").concat(r,"px 0px")});return t.observe(e),()=>{e&&t.unobserve(e)}}return()=>{}},[]),(0,o.useEffect)(()=>{x&&(j.current=!0)},[x]);let v=(0,o.useMemo)(()=>({height:"".concat(p,"px")}),[p]),y=(0,o.useMemo)(()=>"renderIfVisible ".concat(c),[c]),C=(0,o.useMemo)(()=>"renderIfVisible-placeholder ".concat(u),[u]);return o.createElement(a,{ref:f,className:y,style:v},(0,s.jsx)("div",{ref:g,children:x||l&&j.current?(0,s.jsx)(s.Fragment,{children:h}):o.createElement(d,{className:C})}))};var L=n(502),E=n(3825),D=n(8739),B=n(4706);function V(e){let{identifier:t,index:n,selectImage:r,selectedImage:l}=e;return(0,s.jsx)(L.LL,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:r&&(()=>r(t)),noResultsFound:!1,highlight:t===l},"gridSelector-".concat(t))}function q(e){let{children:t}=e;return(0,s.jsx)(d.Z,{className:"g-0 px-3",xxl:6,xl:6,lg:4,md:3,sm:2,xs:2,children:t})}function O(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,selectedImage:r,sourceNamesByKey:l}=e;return(0,s.jsx)(q,{children:Object.entries(t).map((e,t)=>{let[l,i]=e;return(0,s.jsx)(s.Fragment,{children:i.flatMap(e=>{let[t,l]=e;return(0,s.jsx)(G,{initialVisible:l<20,visibleOffset:500,stayRendered:!0,children:(0,s.jsx)(V,{identifier:t,index:l,selectImage:n,selectedImage:r},"gridSelector-".concat(t,"-card"))},"gridSelector-".concat(t,"-wrapper"))})})})})}function P(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,selectedImage:r,sourceNamesByKey:l}=e,i=(0,u.TL)(),a=(0,u.CG)(B.Hm);return(0,s.jsx)(s.Fragment,{children:Object.entries(t).map((e,t)=>{var o;let[c,d]=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{expanded:null===(o=a[c])||void 0===o||o,onClick:()=>i((0,B.O6)(c)),zIndex:t,title:(0,s.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:l[c]}),subtitle:"".concat(d.length," version").concat(1!=d.length?"s":""),sticky:!0,children:(0,s.jsx)(q,{children:d.map(e=>{let[t,l]=e;return(0,s.jsx)(G,{initialVisible:l<20,stayRendered:!0,children:(0,s.jsx)(V,{identifier:t,index:l,selectImage:n,selectedImage:r})},"gridSelector-".concat(t,"-wrapper"))})},"".concat(c,"-row"))},c),(0,s.jsx)("div",{className:"py-2"})]})})})}function R(e){let{headerText:t,imageIdentifiers:n,selectedImage:r,handleClick:l}=e,a=(0,u.TL)(),h=(0,u.CG)(B.Mj),x=(0,u.CG)(D.sn),m=Object.keys(x),f=(0,u.CG)(B.Ne),p=(0,u.CG)(e=>(0,E.Ez)(e,n)),b=(0,o.useMemo)(()=>n.reduce((e,t,n)=>{let s=p[t];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([t,n])),e},{}),[p,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"px-3 pb-3",children:(0,s.jsxs)(d.Z,{children:[(0,s.jsx)("h4",{children:t}),(0,s.jsx)(c.Z,{md:8,sm:6,children:(0,s.jsxs)(j.Z,{direction:"horizontal",gap:2,children:[(0,s.jsx)("span",{className:"me-auto",children:"Show\xa0All\xa0Cards..."}),(0,s.jsx)(F.ZP,{onClick:()=>a((0,B.Mo)()),on:"Grouped By Source",onClassName:"flex-centre",off:"Grouped Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:h})]})}),h&&(0,s.jsx)(c.Z,{md:4,sm:6,children:(0,s.jsx)("div",{className:"d-grid g-0",children:(0,s.jsxs)(Z.Z,{onClick:()=>a(f?(0,B.X8)():(0,B.tC)(m)),children:[(0,s.jsx)(g.V,{bootstrapIconName:"arrows-".concat(f?"expand":"collapse")})," ",f?"Expand":"Collapse"," All"]})})})]})}),h?(0,s.jsx)(P,{cardIdentifiersAndOptionNumbersBySource:b,selectImage:l,selectedImage:r,sourceNamesByKey:x}):(0,s.jsx)(O,{cardIdentifiersAndOptionNumbersBySource:b,selectImage:l,selectedImage:r,sourceNamesByKey:x})]})}function z(e){let{title:t="Select Version",testId:n,imageIdentifiers:r,selectedImage:l,show:i,handleClose:a,onClick:h}=e,x=(0,u.TL)(),m=(0,u.CG)(B.H_),[j,f]=(0,o.useState)(void 0),[g,p]=(0,o.useState)(""),b=(0,o.useRef)(null),v=(0,o.useCallback)(e=>{h(e),a()},[h,a]),y=(null!=j?j:0)>0&&(null!=j?j:0)<r.length+1||""!==g&&r.includes(g);return(0,s.jsxs)(N.Z,{scrollable:!0,show:i,onEntered:()=>{b.current&&b.current.focus()},onHide:a,size:"xl","data-testid":n,children:[(0,s.jsx)(N.Z.Header,{closeButton:!0,children:(0,s.jsx)(N.Z.Title,{children:t})}),(0,s.jsxs)(N.Z.Body,{className:"d-grid p-0",children:[(0,s.jsx)(T,{expanded:m,onClick:()=>x((0,B.e0)()),zIndex:0,title:(0,s.jsx)("h4",{children:"Jump to Version"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.Z,{className:"px-3",id:"jumpToVersionForm",onSubmit:e=>{e.preventDefault(),v(j?r[j-1]:g)},children:[(0,s.jsxs)(d.Z,{className:"g-0",children:[(0,s.jsxs)(c.Z,{lg:3,md:5,children:[(0,s.jsxs)(k.Z.Label,{children:["Specify Option Number, ",(0,s.jsx)("b",{children:"or..."})]}),(0,s.jsx)(k.Z.Control,{ref:b,type:"number",pattern:"[0-9]*",placeholder:"1",value:j,onChange:e=>f(e.target.value?parseInt(e.target.value):void 0),disabled:!!g})]}),(0,s.jsxs)(c.Z,{lg:9,md:7,children:[(0,s.jsx)(k.Z.Label,{children:"Specify ID"}),(0,s.jsx)(k.Z.Control,{type:"text",placeholder:r[0],value:g,onChange:e=>p(e.target.value),disabled:!!j})]})]}),(0,s.jsx)("div",{className:"d-grid gap-0 pt-3",children:(0,s.jsx)(Z.Z,{variant:"primary",form:"jumpToVersionForm",type:"submit","aria-label":"jump-to-version-submit",disabled:!y,children:"Select This Version"})})]}),(0,s.jsx)("hr",{})]})}),(0,s.jsx)(R,{headerText:"Browse Versions",imageIdentifiers:r,handleClick:v,selectedImage:l})]}),(0,s.jsx)(N.Z.Footer,{children:(0,s.jsx)(Z.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}var M=n(685),H=n(5303),A=n(6171),U=n(470);let _=f.ZP.p.withConfig({componentId:"sc-ca71f5d2-0"})(["font-size:0.9em;user-select:none;-webkit-user-select:none;white-space:nowrap;"]),W=(0,f.ZP)(_).withConfig({componentId:"sc-ca71f5d2-1"})(["&:hover{background-color:",";}border-radius:4px;transition:background-color 0.1s ease-in-out;cursor:pointer;"],e=>(null==e?void 0:e.danger)?"rgba(255, 50, 50, 30%)":"rgba(100, 100, 100, 30%)");function Q(e){let{children:t,onClick:n,inDropdown:r,danger:l=!1}=e;return r?(0,s.jsx)(m.Z.Item,{onClick:n,children:t}):(0,s.jsx)(W,{onClick:n,className:"px-2 py-1 text-decoration-none",danger:l,children:t})}function X(e){let{slot:t,inDropdown:n}=e,r=(0,u.TL)();return(0,s.jsxs)(Q,{onClick:()=>r((0,H.HS)({slot:t[1],face:t[0]})),inDropdown:n,children:[(0,s.jsx)(g.V,{bootstrapIconName:"arrows-angle-expand"})," Select Similar"]})}function $(e){let{inDropdown:t}=e,n=(0,u.TL)(),r=(0,u.CG)(H.uq);return(0,s.jsxs)(Q,{onClick:()=>n((0,H.fP)({selectedStatus:!0,slots:r})),inDropdown:t,children:[(0,s.jsx)(g.V,{bootstrapIconName:"arrows-fullscreen"})," Select All"]})}function K(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)(),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=(0,u.CG)(e=>(0,H.CH)(e,t)),d=(0,u.CG)(e=>t.length>0?(0,A.ci)(e,null==c?void 0:c.query,null==c?void 0:c.cardType,t[0][0]):void 0);return t.length>0?(0,s.jsxs)(s.Fragment,{children:[null!=d&&d.length>1&&(0,s.jsxs)(Q,{onClick:()=>i(!0),inDropdown:n,children:[(0,s.jsx)(g.V,{bootstrapIconName:"image"})," Change Version"]}),null!=d&&(0,s.jsx)(z,{testId:"bulk-grid-selector",imageIdentifiers:d,show:l,handleClose:a,onClick:e=>{r((0,H.lE)({selectedImage:e,slots:t,deselect:!0})),a()}})]}):null}function J(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)();return(0,s.jsxs)(Q,{onClick:()=>{r((0,M.PP)([t,"changeQuery"]))},inDropdown:n,children:[(0,s.jsx)(g.V,{bootstrapIconName:"arrow-repeat"})," Change Query"]})}function Y(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)();return(0,s.jsxs)(Q,{onClick:()=>r((0,H.It)({slots:t})),inDropdown:n,children:[(0,s.jsx)(g.V,{bootstrapIconName:"slash-circle"})," Clear Query"]})}function ee(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)(),l=(0,E.zK)(),i=(0,I.j)(),a=(0,u.CG)(e=>(0,H.Tb)(e,t));return(0,s.jsxs)(Q,{onClick:()=>{let e=0;a.forEach(t=>{l[t]&&(i(l[t]),e++)}),r((0,H.fP)({selectedStatus:!1,slots:t})),r((0,U.sc)([Math.random().toString(),{name:"Enqueued Downloads",message:"Enqueued ".concat(e," image download").concat(1!=e?"s":"","!"),level:"info"}]))},inDropdown:n,children:[(0,s.jsx)(g.V,{bootstrapIconName:"cloud-arrow-down"})," Download Images"]})}function et(e){let{slots:t,inDropdown:n}=e,r=(0,u.TL)(),l=t.map(e=>{let[t,n]=e;return n});return(0,s.jsxs)(Q,{onClick:()=>r((0,H.Pm)({slots:l})),inDropdown:n,danger:!0,children:[(0,s.jsx)(g.V,{bootstrapIconName:"x-circle"})," Delete Cards"]})}let en=(0,f.ZP)(j.Z).withConfig({componentId:"sc-ca71f5d2-2"})(["position:relative;top:calc( 50% - 20px );// can't use transform: translate(0, -50%) because it messes with the dropdown"]);function es(){let e=(0,u.CG)(H.NV),t=(0,u.CG)(H.aG),n=(0,u.TL)(),r=(t,n)=>{switch(t){case"selectSimilar":return(0,s.jsx)(X,{slot:e[0],inDropdown:n},t);case"selectAll":return(0,s.jsx)($,{inDropdown:n},t);case"changeSelectedImageSelectedImages":return(0,s.jsx)(K,{slots:e,inDropdown:n},t);case"changeSelectedImageQueries":return(0,s.jsx)(J,{slots:e,inDropdown:n},t);case"clearSelectedImageQueries":return(0,s.jsx)(Y,{slots:e,inDropdown:n},t);case"downloadSelectedImages":return(0,s.jsx)(ee,{slots:e,inDropdown:n},t);case"deleteSelectedImages":return(0,s.jsx)(et,{slots:e,inDropdown:n},t)}},l=[...e.length>0?["changeSelectedImageSelectedImages","changeSelectedImageQueries","downloadSelectedImages","deleteSelectedImages"]:[],...1===e.length?["selectSimilar"]:[],...t?[]:["selectAll"]];return(0,s.jsxs)(en,{direction:"horizontal",className:"px-2",gap:0,children:[(0,s.jsxs)(_,{className:"px-2",children:[(0,s.jsx)("b",{children:e.length})," card",1!=e.length&&"s"," selected."]}),e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q,{onClick:()=>n((0,H.fP)({selectedStatus:!1,slots:e})),inDropdown:!1,children:(0,s.jsx)("i",{className:"bi bi-x-lg"})}),(0,s.jsx)(_,{children:"│"})]}),(0,s.jsx)("div",{className:"ms-auto"}),(0,s.jsx)(w,{items:l,itemRenderer:(e,t)=>r(e,!1),overflowRenderer:e=>(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(m.Z.Toggle,{style:{height:"29.6px"},variant:"secondary","data-testid":"more-select-options",children:(0,s.jsx)("i",{className:"bi bi-three-dots"})}),(0,s.jsx)(m.Z.Menu,{children:e.map(e=>r(e,!0))})]}),minVisibleItems:0,collapseFrom:"end"})]})}var er=n(8583),el=n(9724);function ei(e){let{searchResults:t,selectedImageIndex:n,selected:r,setSelectedImageFromIdentifier:l,handleShowGridSelector:i}=e,a=e=>{void 0!==n&&l(t[(0,el.N0)(n+e,t.length)])};return(0,s.jsxs)(s.Fragment,{children:[1===t.length&&(0,s.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",t.length]}),t.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Z.Z,{variant:r?"info":"outline-info",className:"mpccard-counter-btn",onClick:i,children:[(null!=n?n:0)+1," / ",t.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(Z.Z,{variant:r?"info":"outline-info",className:"prev",onClick:()=>a(-1),children:"❮"}),(0,s.jsx)(Z.Z,{variant:r?"info":"outline-info",className:"next",onClick:()=>a(1),children:"❯"})]})]})]})}let ea=(0,o.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:r,selectedImage:l,show:i,handleClose:a,setSelectedImageFromIdentifier:o}=e;return(0,s.jsx)(z,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:r,selectedImage:l,show:i,handleClose:a,onClick:o})}),eo=(0,o.memo)(function(e){var t,n,r;let{searchQuery:l,face:i,slot:a}=e,c=(0,u.TL)(),d=(0,u.CG)(e=>(0,A.ci)(e,null==l?void 0:l.query,null==l?void 0:l.cardType,i)),h=(0,u.CG)(e=>(0,H.AN)(e,i,a)),x=null==h?void 0:h.selectedImage,m=(0,u.CG)(H.NV),j=(0,u.CG)(e=>(0,H.CH)(e,m)),f=m.length>1&&(null==h?void 0:h.selected)&&null!=j&&j.query===(null==l?void 0:l.query)&&j.cardType===(null==l?void 0:l.cardType)?m:[[i,a]],[g,p]=(0,o.useState)(!1),b=e=>{c((0,H.lE)({slots:f,selectedImage:e,deselect:!0}))},v=null!=d?d:[],y=null!=x?v.indexOf(x):void 0,C=null!=y?v[(0,el.N0)(y+1,v.length)]:void 0,w=null!=y?v[(0,el.N0)(y-1,v.length)]:void 0,I="Slot ".concat(a+1),Z=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"card-select",onClick:e=>{2===e.detail?c((0,H.HS)({slot:a,face:i})):e.shiftKey?c((0,H.hb)({slot:a,face:i})):c((0,H.O$)({slot:a,face:i}))},"aria-label":"select-".concat(i).concat(a),children:(0,s.jsx)("i",{className:"bi bi".concat(null!==(t=null==h?void 0:h.selected)&&void 0!==t&&t?"-check":"","-square"),"aria-label":"".concat(i).concat(a,"-").concat(null!==(n=null==h?void 0:h.selected)&&void 0!==n&&n?"":"un","checked")})}),(0,s.jsx)("button",{className:"remove",children:(0,s.jsx)("i",{className:"bi bi-x-circle",onClick:()=>{c((0,H.Pm)({slots:[a]}))},"aria-label":"remove-".concat(i).concat(a)})})]}),k=(0,s.jsx)(ei,{searchResults:v,selectedImageIndex:y,selected:null!==(r=null==h?void 0:h.selected)&&void 0!==r&&r,setSelectedImageFromIdentifier:b,handleShowGridSelector:()=>p(!0)});return(0,s.jsxs)("div",{"data-testid":"".concat(i,"-slot").concat(a),children:[(0,s.jsx)(L.LL,{imageIdentifier:x,previousImageIdentifier:C,nextImageIdentifier:w,cardHeaderTitle:I,cardFooter:k,cardHeaderButtons:Z,searchQuery:l,nameOnClick:()=>{c((0,M.PP)([[[i,a]],"changeQuery"]))},noResultsFound:null!=d&&0===d.length}),v.length>1&&g&&(0,s.jsx)(ea,{face:i,slot:a,searchResultsForQuery:v,selectedImage:x,show:g,handleClose:()=>p(!1),setSelectedImageFromIdentifier:b})]})}),ec=f.ZP.div.withConfig({componentId:"sc-4b8987ff-0"})(["position:absolute;border:1px darkgray solid;border-radius:10px;height:100%;width:100%;box-shadow:0 0 50px 0 black inset;"]),ed=f.ZP.div.withConfig({componentId:"sc-4b8987ff-1"})(["position:relative;font-size:1.25em;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);text-shadow:0 4px 15px #000000;max-width:90%;"]);function eu(){return(0,s.jsx)(ec,{children:(0,s.jsxs)(ed,{children:[(0,s.jsx)("p",{children:"Your project is empty at the moment."}),(0,s.jsxs)("p",{children:["Use the ",(0,s.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function eh(){let e=(0,u.CG)(e=>"loading"===e.searchResults.status),t=(0,u.CG)(H.aG),n=(0,u.CG)(B.ZR),r=(0,u.CG)(H.wH),l=[],a=[];for(let[e,t]of r.entries()){var o,c;l.push((0,s.jsx)(eo,{searchQuery:null===(o=t.front)||void 0===o?void 0:o.query,face:i.i6,slot:e},"".concat(i.i6,"-slot").concat(e))),a.push((0,s.jsx)(eo,{searchQuery:null===(c=t.back)||void 0===c?void 0:c.query,face:i.eJ,slot:e},"".concat(i.eJ,"-slot").concat(e)))}return(0,s.jsxs)(s.Fragment,{children:[0==r.length&&(0,s.jsx)(eu,{}),(0,s.jsx)(d.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"":"none"},children:l}),(0,s.jsx)(d.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"none":""},children:a}),(0,s.jsxs)(N.Z,{scrollable:!0,show:e&&!t,centered:!0,children:[(0,s.jsx)(N.Z.Header,{children:(0,s.jsx)(N.Z.Title,{style:{textAlign:"center",userSelect:"none"},className:"w-100",children:"Loading your cards..."})}),(0,s.jsx)(N.Z.Body,{children:(0,s.jsx)(er.$,{})})]})]})}var ex=n(5102);let em=(0,o.memo)(function(e){let{searchResults:t,show:n,handleClose:r}=e,l=(0,u.TL)(),a=(0,u.CG)(H.sZ);return(0,s.jsx)(z,{title:"Select Cardback",testId:"cardback-grid-selector",imageIdentifiers:t,selectedImage:a,show:n,handleClose:r,onClick:e=>{null!=a&&(l((0,H.Tx)({currentImage:a,selectedImage:e,face:i.eJ})),l((0,H.mp)({selectedImage:e})))}})});function ej(e){let{selectedImage:t}=e,n=(0,u.TL)(),r=(0,u.CG)(ex.yU),[l,a]=(0,o.useState)(!1),c=null!=t?r.indexOf(t):void 0,d=null!=c?r[(0,el.N0)(c+1,r.length)]:void 0,h=null!=c?r[(0,el.N0)(c-1,r.length)]:void 0,x=(0,s.jsx)(ei,{searchResults:r,selectedImageIndex:c,selected:!1,setSelectedImageFromIdentifier:e=>{null!=t&&null!=c&&(n((0,H.Tx)({currentImage:t,selectedImage:e,face:i.eJ})),n((0,H.mp)({selectedImage:e})))},handleShowGridSelector:()=>a(!0)});return(0,s.jsxs)("div",{"data-testid":"common-cardback",children:[(0,s.jsx)(L.LL,{imageIdentifier:t,previousImageIdentifier:d,nextImageIdentifier:h,cardHeaderTitle:"Cardback",cardFooter:x,noResultsFound:0===r.length}),l&&(0,s.jsx)(em,{searchResults:r,show:l,handleClose:()=>a(!1)})]})}var ef=n(3162),eg=n(7798),ep=n(5723);let eb=e=>(function(e){let t=e.reduce((e,t)=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=0),e[t]++,e),{});return Object.keys(t).sort().map(e=>"".concat(t[e],"x ").concat(e))})((function(e,t){function n(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(t,e.selectedImage)&&t[e.selectedImage].cardType===i.Zb?(0,eg.GL)(t[e.selectedImage].name):null}return e.map(e=>[n(e[i.i6]),n(e[i.eJ])])})((0,H.wH)(e),e.cardDocuments.cardDocuments).map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]," ").concat(i.M0," ").concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0)).join("\n");async function ev(e){let t=eb(e);return(0,ef.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"decklist.txt"),!0}function ey(){let e=(0,u.CG)(H.aG),t=function(){let e=(0,u.qr)(),t=(0,ep.Z9)();return()=>Promise.resolve(t("text","decklist.txt",()=>ev(e.getState())))}();return(0,s.jsxs)(m.Z.Item,{disabled:e,onClick:t,"data-testid":"export-decklist-button",children:[(0,s.jsx)(g.V,{bootstrapIconName:"card-text"})," Decklist"]})}function eC(){let e=(0,u.TL)(),t=(0,u.CG)(H.aG),n=(0,I.j)(),r=(0,E.zK)(),l=async()=>{Object.values(r).map(n);let t=Object.values(r).length;e((0,U.sc)([Math.random().toString(),{name:"Enqueued Downloads",message:"Enqueued ".concat(t," image download").concat(1!=t?"s":"","!"),level:"info"}]))};return(0,s.jsxs)(m.Z.Item,{disabled:t,onClick:l,children:[(0,s.jsx)(g.V,{bootstrapIconName:"image"})," Card Images"]})}var ew=n(1793);function eI(){let e=(0,ew.Z)(),t=(0,u.CG)(H.aG);return(0,s.jsxs)(m.Z.Item,{disabled:t,onClick:e,"data-testid":"export-xml-button",children:[(0,s.jsx)(g.V,{bootstrapIconName:"file-code"})," XML"]})}function eZ(){return(0,s.jsxs)(m.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(m.Z.Toggle,{variant:"secondary",id:"dropdown-basic",children:[(0,s.jsx)(g.V,{bootstrapIconName:"cloud-arrow-down"})," Download"]})}),(0,s.jsxs)(m.Z.Menu,{children:[(0,s.jsx)(eI,{}),(0,s.jsx)(eC,{}),(0,s.jsx)(ey,{})]})]})}var ek=n(9340),eN=n(8256);function eS(){let e=(0,u.TL)(),t=(0,u.CG)(eN.GG),n=!i.lq[t.cardstock];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{lg:8,md:12,sm:12,xs:12,children:(0,s.jsx)(k.Z.Group,{children:(0,s.jsx)(k.Z.Select,{value:t.cardstock,style:{height:i.B4+"px"},onChange:t=>e((0,eN.HU)(t.target.value)),children:i.Nu.map(e=>(0,s.jsx)("option",{children:e},e))})})}),(0,s.jsx)(c.Z,{lg:4,md:12,sm:12,xs:12,children:(0,s.jsx)(F.ZP,{onClick:()=>e((0,eN.uR)()),on:"Foil",onClassName:"flex-centre",off:"Non-Foil",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:t.foil,disabled:n})})]})}var eT=n(2512);let eF=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",eG=f.ZP.div.withConfig({componentId:"sc-d4951617-0"})(["flex:1;display:flex;flex-direction:column;align-items:center;padding:20px;border-width:2px;border-radius:2px;border-color:",";border-style:dashed;color:#bdbdbd;outline:none;transition:border 0.24s ease-in-out;cursor:pointer;"],e=>eF(e));function eL(e){let{mimeTypes:t,fileUploadCallback:n,label:r,disabled:l}=e,i=(0,u.TL)(),a=(0,o.useCallback)(()=>i((0,U.sc)(["dropzone-onabort",{name:"File upload error",message:"File reading was stopped.",level:"error"}])),[i]),c=(0,o.useCallback)(()=>i((0,U.sc)(["dropzone-onerror",{name:"File upload error",message:"An error occurred while reading the file.",level:"error"}])),[i]),d=(0,o.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=a,t.onerror=c,t.onload=()=>{n(t.result)},t.readAsText(e)})},[n,a,c]),{getRootProps:h,getInputProps:x,isFocused:m,isDragAccept:j,isDragReject:f}=(0,eT.uI)({onDrop:d,accept:t,maxFiles:1,disabled:l});return(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)(eG,{...h({isFocused:m,isDragAccept:j,isDragReject:f}),"aria-label":null!=r?r:"dropzone",children:[(0,s.jsx)("input",{...x()}),"Drag and drop a file here, or click to select a file."]})})}var eE=n(7482),eD=n(1099),eB=n(570);function eV(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eE.j,{headers:Object.values(i.bm),data:[,,,].fill([,,,,,].fill(null)),bordered:!0,uniformWidth:!0}),"Where the columns follow these rules:",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.quantity}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.frontQuery}),": Search query for card front."," ",(0,s.jsx)("b",{children:"Cannot be blank."})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.frontSelectedImage}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.backQuery}),": Search query for card back. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:i.bm.backSelectedImage}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function eq(){return(0,s.jsx)(eE.j,{headers:Object.values(i.bm),data:[[(0,s.jsx)("code",{children:"2"},"row-1-quantity"),(0,s.jsx)("code",{children:"island"},"row-1-front-query"),(0,s.jsx)("code",{children:"1HsvTYs..."},"row-1-front-id"),(0,s.jsx)("code",{children:"forest"},"row-1-back-query"),null],[(0,s.jsx)("code",{children:"3"},"row-2-quantity"),(0,s.jsx)("code",{children:"t:goblin"},"row-2-front-query"),null,null,(0,s.jsx)("code",{children:"1JtXL6C..."},"row-2-back-id")]],bordered:!0})}function eO(){let e=(0,u.TL)(),t=(0,eD.l)(),n=(0,u.CG)(eB.WP),r=(0,u.CG)(H.zO),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=t.isFetching;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.Z.Item,{onClick:()=>i(!0),children:[(0,s.jsx)(g.V,{bootstrapIconName:"file-earmark-spreadsheet"})," CSV"]}),(0,s.jsxs)(N.Z,{scrollable:!0,show:l,onHide:a,"data-testid":"import-csv",children:[(0,s.jsx)(N.Z.Header,{closeButton:!0,children:(0,s.jsx)(N.Z.Title,{children:"Add Cards — CSV"})}),(0,s.jsxs)(N.Z.Body,{children:[(0,s.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,s.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,s.jsx)(eV,{}),"For example:",(0,s.jsx)(eq,{}),(0,s.jsx)("hr",{}),(0,s.jsx)(eL,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:s=>{var l;if("string"!=typeof s){e((0,U.sc)(["invalid-csv-contents",{name:"Invalid CSV file",message:"The contents of the uploaded file did not match the expected text format.",level:"error"}]));return}let i=(0,eg.mR)(s),o=(0,eg.l_)(i,null!==(l=t.data)&&void 0!==l?l:{},n);e((0,H.r7)({members:(0,eg.wt)(o,r)})),a()},label:"import-csv",disabled:c})]}),(0,s.jsx)(N.Z.Footer,{children:(0,s.jsx)(Z.Z,{variant:"secondary",onClick:a,children:"Close"})})]})]})}var eP=n(1480);function eR(){let e=(0,u.TL)(),t=(0,eD.cf)(),n=(0,eD.l)(),r=(0,u.CG)(eB.WP),l=(0,u.CG)(H.zO),[a,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(""),x=(0,o.useRef)(null),j=()=>c(!1),f=n.isFetching,p=null!=t.data?(0,eg.z8)(t.data):"";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.Z.Item,{onClick:()=>c(!0),children:[(0,s.jsx)(g.V,{bootstrapIconName:"card-text"})," Text"]}),(0,s.jsxs)(N.Z,{scrollable:!0,show:a,onEntered:()=>{x.current&&x.current.focus()},onHide:j,"data-testid":"import-text",children:[(0,s.jsx)(N.Z.Header,{closeButton:!0,children:(0,s.jsx)(N.Z.Title,{children:"Add Cards — Text"})}),(0,s.jsxs)(N.Z.Body,{children:[(0,s.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,s.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,s.jsx)(eP.Z,{children:(0,s.jsxs)(eP.Z.Item,{eventKey:"0",children:[(0,s.jsx)(eP.Z.Header,{children:"Syntax Guide"}),(0,s.jsx)(eP.Z.Body,{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["There are three types of images in ",i.vV," —"," ",i.Zb.toLowerCase(),"s, ",i.dt.toLowerCase(),"s, and"," ",i.WU.toLowerCase(),"s. If you search for a card, the search results ",(0,s.jsx)("b",{children:"won't contain cardbacks or tokens"}),"."]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:[(0,el.LF)(i.Zb),"s"]})," are searched for by default."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[i.WU.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:i.P$[i.WU]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[i.P$[i.WU],"your"," ",i.WU.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[i.dt.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:i.P$[i.dt]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[i.P$[i.dt],"your"," ",i.dt.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["You may optionally specify the image ID to select by typing your search query, ",(0,s.jsx)("code",{children:i.A0}),", then the image ID — for example,"," ",(0,s.jsxs)("code",{children:["your ",i.Zb.toLowerCase()," name",i.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]}),"."]}),(0,s.jsxs)("li",{children:["You may specify queries for both the front and the back by separating them with ",(0,s.jsx)("code",{children:i.M0})," — for example,"," ",(0,s.jsxs)("code",{children:["4x goblin ",i.M0," ",i.P$[i.WU],"elf"]}),"."]}),(0,s.jsx)("li",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back card for you."})]})})]})}),(0,s.jsx)("br",{}),(0,s.jsx)(k.Z,{id:"importTextForm",onSubmit:t=>{var s;t.preventDefault();let i=(0,eg.ts)(d,null!==(s=n.data)&&void 0!==s?s:{},r);e((0,H.r7)({members:(0,eg.wt)(i,l)})),h(""),j()},children:(0,s.jsx)(k.Z.Group,{className:"mb-3",children:(0,s.jsx)(k.Z.Control,{ref:x,as:"textarea",onKeyDown:e=>{var t;e.ctrlKey&&"Enter"===e.code&&(null===(t=x.current)||void 0===t?void 0:t.form)&&x.current.form.requestSubmit()},rows:12,placeholder:p,required:!0,onChange:e=>h(e.target.value),value:d,"aria-label":"import-text"})})}),(0,s.jsx)("p",{className:"text-sm-end my-0",children:(0,s.jsx)("i",{children:"Hint: Submit with Control+Enter."})})]}),(0,s.jsxs)(N.Z.Footer,{children:[(0,s.jsx)(Z.Z,{variant:"secondary","aria-label":"import-text-close",onClick:j,children:"Close"}),(0,s.jsx)(Z.Z,{variant:"primary",form:"importTextForm",type:"submit","aria-label":"import-text-submit",disabled:f,children:"Submit"})]})]})]})}var ez=n(755);function eM(){var e;let t=(0,u.TL)(),n=(0,eD.l)(),r=(0,eD.QA)(),[l,i]=eD.hi.endpoints.queryImportSite.useLazyQuery(),a=(0,ez.Sb)(),c=(0,u.CG)(eB.WP),d=(0,u.CG)(H.zO),[h,x]=(0,o.useState)(""),[j,f]=(0,o.useState)(!1),[p,b]=(0,o.useState)(!1),v=(0,o.useRef)(null),y=()=>f(!1),C=(0,o.useCallback)(async e=>{if(e.preventDefault(),h.trim().length>0){b(!0);try{var s,r;let e=await l(h),i=(0,eg.ts)(null!==(s=e.data)&&void 0!==s?s:"",null!==(r=n.data)&&void 0!==r?r:{},c);t((0,H.r7)({members:(0,eg.wt)(i,d)})),y()}catch(e){t((0,U.sc)(["url-import-error",{name:"URL Import Error",message:"An unexpected error occurred while processing your decklist: ".concat(e.message),level:"error"}]))}finally{b(!1)}}},[t,h,n.data,d,l,c]),w=p||r.isFetching||n.isFetching;return r.isFetching||0!==(null!==(e=r.data)&&void 0!==e?e:[]).length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z.Item,{onClick:()=>f(!0),disabled:r.isFetching,children:r.isFetching?(0,s.jsx)(er.$,{size:1.5}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.V,{bootstrapIconName:"link-45deg"})," URL"]})}),(0,s.jsxs)(N.Z,{scrollable:!0,show:p||j,onEntered:()=>{v.current&&v.current.focus()},onHide:y,onExited:()=>x(""),children:[(0,s.jsx)(N.Z.Header,{closeButton:!0,children:(0,s.jsx)(N.Z.Title,{children:"Add Cards — URL"})}),(0,s.jsxs)(N.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into ",a,":",(0,s.jsx)("br",{}),null!=r.data?(0,s.jsx)("ul",{children:r.data.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(er.$,{}),(0,s.jsx)("br",{})]}),(0,s.jsx)(k.Z,{id:"importURLForm",onSubmit:C,children:(0,s.jsx)(k.Z.Group,{className:"mb-3",children:(0,s.jsx)(k.Z.Control,{ref:v,type:"url",required:!0,placeholder:"https://",onChange:e=>x(e.target.value.trim()),value:h,disabled:p||null==r.data,"aria-label":"import-url"})})})]}),(0,s.jsxs)(N.Z.Footer,{children:[(0,s.jsx)(Z.Z,{variant:"secondary",onClick:y,children:"Close"}),(0,s.jsx)(Z.Z,{type:"submit",form:"importURLForm",variant:"primary",disabled:w,style:{width:"4.75em"},children:p?(0,s.jsx)(er.$,{size:1.5}):"Submit"})]})]})]}):null}function eH(){let e=(0,u.TL)(),t=(0,u.CG)(H.sZ),n=(0,u.CG)(H.zO),[r,l]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1),x=()=>l(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.Z.Item,{onClick:()=>l(!0),children:[(0,s.jsx)(g.V,{bootstrapIconName:"file-code"})," XML"]}),(0,s.jsxs)(N.Z,{scrollable:!0,show:r,onHide:x,"data-testid":"import-xml",children:[(0,s.jsx)(N.Z.Header,{closeButton:!0,children:(0,s.jsx)(N.Z.Title,{children:"Add Cards — XML"})}),(0,s.jsxs)(N.Z.Body,{children:[(0,s.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,s.jsxs)("p",{children:["The ",i.vV," website can generate an XML file representing your project, and the ",i.vV," desktop tool which auto-fills your order into"," ",(0,s.jsx)("a",{href:i.vs,target:"_blank",children:i.Fo})," ","expects a file in this format."]}),(0,s.jsx)(F.ZP,{onClick:()=>c(!a),on:"Use XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:a}),(0,s.jsx)("div",{className:"pt-3",children:(0,s.jsx)(F.ZP,{onClick:()=>h(!d),on:"Use XML Finish Settings",onClassName:"flex-centre",off:"Retain Selected Finish Settings",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:d})}),(0,s.jsx)("hr",{}),(0,s.jsx)(eL,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:s=>{var r,l,o,c,u,h,m;if("string"!=typeof s){alert("invalid CSV file uploaded");return}let j=new DOMParser().parseFromString(s,"application/xml").getElementsByTagName("order")[0],f=j.getElementsByTagName("details")[0],g=null===(r=f.getElementsByTagName("stock")[0])||void 0===r?void 0:r.textContent,p=(null===(l=f.getElementsByTagName("foil")[0])||void 0===l?void 0:l.textContent)==="true",b=j.getElementsByTagName("fronts")[0],v=j.getElementsByTagName("backs")[0],y=b.getElementsByTagName("card"),C=null!=v?v.getElementsByTagName("card"):void 0,w=null!==(c=null===(o=j.getElementsByTagName("cardback")[0])||void 0===o?void 0:o.textContent)&&void 0!==c?c:t,I=0,Z=Array.from({length:i.Wn-n},()=>({front:null,back:null}));if(null!=C)for(let e of C){let t=null===(u=e.getElementsByTagName("slots")[0])||void 0===u?void 0:u.textContent;if(null==t)continue;let n=(0,eg.XV)(null!==(h=e.getElementsByTagName("query")[0].textContent)&&void 0!==h?h:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;Z[t].back={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},I=Math.max(I,t)})}for(let e of y){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,eg.XV)(null!==(m=e.getElementsByTagName("query")[0].textContent)&&void 0!==m?m:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;Z[t].front={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==Z[t].back&&(Z[t].back={query:{query:null,cardType:i.dt},selectedImage:w,selected:!1}),I=Math.max(I,t)})}e((0,H.r7)({members:Z.slice(0,I+1)})),a&&null!=w&&e((0,H.mp)({selectedImage:w})),d&&null!=g&&i.Nu.includes(g)&&null!=p&&(e((0,eN.HU)(g)),e((0,eN.Mc)(p))),x()},label:"import-xml",disabled:!1})]}),(0,s.jsx)(N.Z.Footer,{children:(0,s.jsx)(Z.Z,{variant:"secondary",onClick:x,children:"Close"})})]})]})}function eA(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(m.Z.Toggle,{variant:"outline-success",id:"dropdown-basic",children:[(0,s.jsx)(g.V,{bootstrapIconName:"plus-circle"})," Add Cards"]})}),(0,s.jsxs)(m.Z.Menu,{children:[(0,s.jsx)(eR,{}),(0,s.jsx)(eH,{}),(0,s.jsx)(eO,{}),(0,s.jsx)(eM,{})]})]})})}var eU=n(5575),e_=n(6506),eW=n(9983),eQ=n(9830);function eX(){let e=(0,u.TL)(),[t,n]=(0,o.useState)(!1),r=(0,u.CG)(eB.xN),[l,i]=(0,o.useState)(r.searchTypeSettings),[a,c]=(0,o.useState)(r.sourceSettings),[d,h]=(0,o.useState)(r.filterSettings),x=()=>n(!1),m=(0,o.useCallback)(()=>{i(r.searchTypeSettings),h(r.filterSettings),c(r.sourceSettings),n(!0)},[r]),j=()=>{(0,eU.Wm)({searchTypeSettings:l,sourceSettings:a,filterSettings:d}),e((0,eB.Fg)(l)),e((0,eB.Ph)(a)),e((0,eB._E)(d)),x()};return(0,s.jsxs)("div",{className:"d-grid gap-0",children:[(0,s.jsxs)(Z.Z,{variant:"primary",onClick:m,children:[(0,s.jsx)(g.V,{bootstrapIconName:"gear"}),"Search Settings"]}),(0,s.jsxs)(N.Z,{scrollable:!0,show:t,onHide:j,"data-testid":"search-settings",children:[(0,s.jsx)(N.Z.Header,{closeButton:!0,children:(0,s.jsx)(N.Z.Title,{children:"Search Settings"})}),(0,s.jsxs)(N.Z.Body,{children:[(0,s.jsx)(eW.I,{searchTypeSettings:l,setSearchTypeSettings:i}),(0,s.jsx)("hr",{}),(0,s.jsx)(e_.f,{filterSettings:d,setFilterSettings:h}),(0,s.jsx)("hr",{}),(0,s.jsx)(eQ.Q,{sourceSettings:a,setSourceSettings:c})]}),(0,s.jsxs)(N.Z.Footer,{children:[(0,s.jsx)(Z.Z,{variant:"secondary",onClick:x,children:"Close Without Saving"}),(0,s.jsx)(Z.Z,{variant:"primary",onClick:j,children:"Save Changes"})]})]})]})}function e$(e){let{children:t,variant:n,...r}=e;return(0,s.jsx)("div",{className:"bg-".concat(n," rounded-lg mt-2"),...r,children:(0,s.jsx)("div",{className:"p-3",children:t})})}var eK=n(9170);function eJ(){let e=(0,u.TL)(),t=(0,u.CG)(eK.Cn),n=(0,u.CG)(eK.Jh);return n>0&&t.some(e=>(null==e?void 0:e.front)!=null||(null==e?void 0:e.back)!=null)?(0,s.jsxs)(e$,{variant:"primary",children:[(0,s.jsxs)("p",{children:["Your project specified ",(0,s.jsx)("b",{children:n})," card version",1!=n?"s":""," which couldn't be found."]}),(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsx)(Z.Z,{variant:"warning",onClick:()=>e((0,M.K4)("invalidIdentifiers")),children:"Review Invalid Cards"})})]}):null}var eY=n(2238);function e0(){return"mobile"===(0,eY.UAParser)().device.type?(0,s.jsxs)(e$,{variant:"primary",children:["It seems like you're on a mobile device! The ",i.vV," executable that auto-fills your order requires a desktop computer."]}):null}var e1=n(955);function e2(){let e=(0,u.CG)(B.ZR),t=(0,u.TL)();return(0,s.jsx)(F.ZP,{onClick:()=>t((0,B.$3)()),on:"Switch to Backs",onClassName:"flex-centre",off:"Switch to Fronts",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:i.B4+"px",active:e})}function e4(){let e=(0,u.CG)(H.zO),t=(0,u.CG)(H.p4);return e>0?(0,s.jsxs)(e$,{variant:"secondary",children:[(0,s.jsxs)("p",{children:["Your project contains ",(0,s.jsx)("b",{children:e})," card",1!==e&&"s",", belongs in the bracket of up to"," ",(0,s.jsx)("b",{children:(0,el.wk)(e)})," cards, and is"," ",(0,s.jsx)("b",{children:(0,el.K)(t,0)})," in total."]}),e>=i.Wn&&(0,s.jsx)(e1.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,s.jsx)(e2,{})]}):null}function e5(){return(0,u.CG)(e=>"loading"===e.cardDocuments.status)?(0,s.jsx)(e$,{variant:"primary",children:(0,s.jsxs)(j.Z,{direction:"horizontal",gap:2,className:"d-flex px-2",children:[(0,s.jsxs)("div",{className:"me-auto",children:[(0,s.jsx)("h5",{children:"Loading Card Data..."}),"Some search results may appear incomplete until this is finished."]}),(0,s.jsx)(er.$,{size:2.5})]})}):null}function e3(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e0,{}),(0,s.jsx)(e5,{}),(0,s.jsx)(eJ,{}),(0,s.jsx)(e4,{})]})}var e8=function(){let e=(0,ez.NM)(),t=(0,u.CG)(H.sZ),n=(0,u.CG)(H.aG);return(0,o.useEffect)(()=>{let e=e=>{if(!n)return e.preventDefault(),!1};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[n]),(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)(d.Z,{className:"g-0",children:[(0,s.jsx)(x.V,{className:"g-0",children:(0,s.jsx)(es,{})}),(0,s.jsx)(h.O,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",heightDelta:i.rE,children:(0,s.jsx)(eh,{})}),(0,s.jsxs)(h.O,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",heightDelta:i.rE,children:[(0,s.jsx)(e3,{}),(0,s.jsx)(d.Z,{className:"g-0 pt-2",children:(0,s.jsx)(eS,{})}),(0,s.jsx)(d.Z,{className:"g-0 pt-2",children:(0,s.jsx)(eX,{})}),(0,s.jsxs)(d.Z,{className:"g-0 pt-2",children:[(0,s.jsx)(c.Z,{lg:7,md:12,sm:12,xs:12,children:(0,s.jsx)(eA,{})}),(0,s.jsx)(c.Z,{lg:5,md:12,sm:12,xs:12,children:(0,s.jsx)(eZ,{})}),(0,s.jsx)(ek.y,{})]}),(0,s.jsx)(c.Z,{className:"g-0 pt-2",lg:{span:8,offset:2},md:12,children:(0,s.jsx)(ej,{selectedImage:t})})]})]}):(0,s.jsx)(a.O,{})})},e7=n(4802);function e6(){return(0,ez.NM)()?(0,s.jsx)(e8,{}):(0,s.jsx)(a.O,{})}function e9(){return(0,s.jsxs)(e7.XR,{gutter:0,children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Edit MPC Project"})," ",(0,s.jsx)("meta",{name:"description",content:"".concat(i.vV,"&apos;'s rich project editor.")})]}),(0,s.jsx)(e6,{})]})}n(7121)}},function(e){e.O(0,[62,490,884,712,888,774,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);