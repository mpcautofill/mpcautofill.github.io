(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return l(4122)}])},4122:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return e_}});var n,t,r=l(5893),i=l(9008),a=l.n(i),c=l(7294),d=l(1555),o=l(4051),h=l(2664),u=l(6212),x=l(1677),m=l(8102),j=l(5675),g=l.n(j),f=l(7104),v=l(5147),p=l(8208),b=l(5305);let y=(0,c.memo)(function(e){let{imageIdentifier:s,show:l,handleClose:n}=e,[t,i]=(0,c.useState)(!0);(0,c.useEffect)(()=>i(!0),[s]);let a=(0,h.v9)(e=>e.cardDocuments.cardDocuments[s]),d=(0,h.v9)(e=>e.sourceDocuments.sourceDocuments);return(0,r.jsx)("div",{children:null!=a&&(0,r.jsxs)(u.Z,{show:l,onHide:n,size:"xl","data-testid":"detailed-view",children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Card Details"})}),(0,r.jsx)(u.Z.Body,{children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)("div",{className:"col-lg-5 mb-3 mb-lg-0",style:{position:"relative"},children:(0,r.jsxs)("div",{className:"rounded-xl shadow-lg ratio ratio-7x5",style:{zIndex:0},children:[t&&(0,r.jsx)(b.$,{}),(0,r.jsx)(g(),{alt:a.name,className:"card-img-fade-in",style:{zIndex:1,opacity:t?0:1},src:a.medium_thumbnail_url,onLoad:()=>i(!1),fill:!0})]})}),(0,r.jsxs)("div",{className:"col-lg-7",children:[(0,r.jsx)("h4",{children:a.name}),(0,r.jsx)(v.Z,{hover:!0,children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"Source Name"})}),(0,r.jsx)("td",{children:null!=d&&null!=d[a.source_id].external_link?(0,r.jsx)("a",{href:d[a.source_id].external_link,target:"_blank",children:a.source_name}):(0,r.jsx)("a",{children:a.source_name})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"Source Type"})}),(0,r.jsx)("td",{children:a.source_type})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"Class"})}),(0,r.jsx)("td",{children:a.card_type.charAt(0).toUpperCase()+a.card_type.slice(1).toLowerCase()})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"Identifier"})}),(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:a.identifier})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"Resolution"})}),(0,r.jsxs)("td",{children:[a.dpi," DPI"]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"Date Created"})}),(0,r.jsx)("td",{children:a.date})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("b",{children:"File Size"})}),(0,r.jsx)("td",{children:(0,p.K)(a.size,2)})]})]})}),(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(f.Z,{variant:"primary",onClick:()=>(0,m.saveAs)(a.download_link,"".concat(a.name," (").concat(a.identifier,").").concat(a.extension)),children:"Download Image"})})]})]})}),(0,r.jsx)(u.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:n,children:"Close"})})]})})});var Z=l(7297),k=l(8182),C=l(9521);function N(){let e=(0,Z.Z)(["\n  z-index: 0;\n  opacity: 0;\n"]);return N=function(){return e},e}let I=(0,C.ZP)(g())(N()),S=(0,c.memo)(function(e){let{imageIdentifier:s,previousImageIdentifier:l,nextImageIdentifier:n,cardHeaderTitle:t,cardHeaderButtons:i,cardFooter:a,imageOnClick:d,cardOnClick:o,searchQuery:u,noResultsFound:x}=e,[m,j]=(0,c.useState)(!0);(0,c.useEffect)(()=>j(!0),[s]);let f=(0,h.v9)(e=>null!=s?e.cardDocuments.cardDocuments[s]:void 0),v=(0,h.v9)(e=>null!=l?e.cardDocuments.cardDocuments[l]:void 0),p=(0,h.v9)(e=>null!=n?e.cardDocuments.cardDocuments[n]:void 0),y=null!=f?(0,r.jsxs)(r.Fragment,{children:[m&&(0,r.jsx)(b.$,{}),(0,r.jsx)(g(),{className:"card-img card-img-fade-in",loading:"lazy",style:{zIndex:1,opacity:m?0:1},src:f.small_thumbnail_url,onLoad:()=>j(!1),onClick:d,alt:f.name,fill:!0}),l!==s&&void 0!==v&&(0,r.jsx)(I,{className:"card-img",loading:"lazy",src:v.small_thumbnail_url,alt:v.name,fill:!0}),n!==s&&void 0!==p&&(0,r.jsx)(I,{className:"card-img",loading:"lazy",src:p.small_thumbnail_url,alt:p.name,fill:!0})]}):x?(0,r.jsx)(g(),{className:"card-img card-img-fade-in",loading:"lazy",style:{zIndex:1},src:"/blank.png",alt:"Card not found",fill:!0}):(0,r.jsx)(b.$,{});return(0,r.jsxs)(k.Z,{className:"mpccard mpccard-hover",onClick:o,children:[(0,r.jsxs)(k.Z.Header,{className:"pb-0 text-center",children:[(0,r.jsx)("p",{className:"mpccard-slot",children:t}),i]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"rounded-lg shadow-lg ratio ratio-7x5",style:{zIndex:0},children:y}),(0,r.jsxs)(k.Z.Body,{className:"mb-0 text-center",children:[(0,r.jsxs)(k.Z.Subtitle,{className:"mpccard-name",children:[null!=f&&f.name,null==f&&void 0!=u&&u.query]}),(0,r.jsx)("div",{className:"mpccard-spacing",children:(0,r.jsxs)(k.Z.Text,{className:"mpccard-source",children:[null!=f&&"".concat(f.source_verbose," [").concat(f.dpi," DPI]"),null==f&&void 0!=u&&"Your search query"]})})]})]}),null!=a&&(0,r.jsx)(k.Z.Footer,{className:"padding-top",style:{paddingTop:"50px"},children:a})]})});var w=l(6518),F=l(478),D=l(3389),T=l(5384);function B(e){let{cardIdentifiersAndOptionNumbersBySource:s,selectImage:l,sourceKeyToName:n}=e;return(0,r.jsx)(o.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(s).map((e,s)=>{let[n,t]=e;return(0,r.jsx)(r.Fragment,{children:t.flatMap(e=>{let[s,n]=e;return(0,r.jsx)(S,{imageIdentifier:s,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:()=>l(s),noResultsFound:!1},"gridSelector-".concat(s))})})})})}function P(e){var s,l;let{cardIdentifiersAndOptionNumbersBySource:n,selectImage:t,sourceKeyToName:i}=e,a=(0,h.I0)(),c=(0,h.v9)(e=>e.viewSettings.sourcesVisible);return(0,r.jsx)(r.Fragment,{children:Object.entries(n).map((e,n)=>{let[d,h]=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"sticky-top",onClick:()=>a((0,T.O6)(d)),style:{backgroundColor:"#4E5D6B",zIndex:n+100},children:[(0,r.jsx)("hr",{},"".concat(d,"-top-hr")),(0,r.jsxs)(F.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,r.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:i[d]},"".concat(d,"-header-title")),(0,r.jsxs)("h6",{className:"text-primary prevent-select",children:[h.length," version",1!=h.length&&"s"]}),(0,r.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(s=c[d])||void 0===s||s?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(d,"-collapse-header")},"".concat(d,"-arrow"))]},"".concat(d,"-header-inner"))]},"".concat(d,"-header")),(0,r.jsx)(w.Z,{in:null===(l=c[d])||void 0===l||l,"data-testid":"".concat(d,"-collapse"),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{},"".concat(d,"-bottom-hr")),(0,r.jsx)(o.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:h.map(e=>{let[s,l]=e;return(0,r.jsx)(S,{imageIdentifier:s,cardHeaderTitle:"Option ".concat(l+1),cardOnClick:()=>t(s),noResultsFound:!1},"gridSelector-".concat(s))})},"".concat(d,"-row"))]})})]})})})}function z(e){var s,l;let{testId:n,imageIdentifiers:t,show:i,handleClose:a,onClick:m}=e,j=(0,h.I0)(),g=(0,h.v9)(e=>e.cardDocuments.cardDocuments),v=(0,h.v9)(e=>e.viewSettings.facetBySource),p=(0,c.useCallback)(e=>{m(e),a()},[m,a]),b=(0,h.v9)(e=>Object.fromEntries(Object.keys(null!==(s=e.sourceDocuments.sourceDocuments)&&void 0!==s?s:{}).map(s=>[e.sourceDocuments.sourceDocuments[s].key,e.sourceDocuments.sourceDocuments[s].name]))),y=Object.keys(b),Z=(0,h.v9)(e=>Object.values(null!==(l=e.viewSettings.sourcesVisible)&&void 0!==l?l:{}).includes(!1)),k=(0,c.useMemo)(()=>t.reduce((e,s,l)=>{let n=g[s];return null!=n&&(Object.prototype.hasOwnProperty.call(e,n.source)||(e[n.source]=[]),e[n.source].push([s,l])),e},{}),[g,t]);return(0,r.jsxs)(u.Z,{show:i,onHide:a,size:"lg","data-testid":n,children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Select Version"})}),(0,r.jsxs)(u.Z.Body,{children:[(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(d.Z,{md:8,sm:6,children:(0,r.jsx)(D.ZP,{onClick:()=>j((0,T.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:v})}),v&&(0,r.jsx)(d.Z,{md:4,sm:6,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(f.Z,{onClick:()=>j(Z?(0,T.X8)():(0,T.tC)(y)),children:[(0,r.jsx)("i",{className:"bi bi-arrows-".concat(Z?"expand":"collapse"),style:{paddingRight:"0.5em"}})," ",Z?"Expand":"Collapse"," All"]})})})]}),(0,r.jsx)("br",{}),v?(0,r.jsx)(P,{cardIdentifiersAndOptionNumbersBySource:k,selectImage:p,sourceKeyToName:b}):(0,r.jsx)(B,{cardIdentifiersAndOptionNumbersBySource:k,selectImage:p,sourceKeyToName:b})]}),(0,r.jsx)(u.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}var _=l(9539);let q=(0,c.memo)(function(e){let{face:s,slot:l,searchResultsForQuery:n,show:t,handleClose:i}=e,a=(0,h.I0)();return(0,r.jsx)(z,{testId:"".concat(s,"-slot").concat(l,"-grid-selector"),imageIdentifiers:n,show:t,handleClose:i,onClick:function(e){a((0,_.qP)({face:s,slot:l,selectedImage:e}))}})}),E=(0,c.memo)(function(e){var s,l,n,t;let{searchQuery:i,face:a,slot:d,handleShowDetailedView:o}=e,[u,m]=(0,c.useState)(!1),j=()=>m(!1),g=()=>m(!0),v=(0,h.I0)(),b=null!==(s=(0,h.v9)(e=>e.cardbacks.cardbacks))&&void 0!==s?s:[],y=(0,h.v9)(e=>e.project.cardback),Z=(0,h.v9)(e=>(null==i?void 0:i.query)!=null?(null!==(l=e.searchResults.searchResults[i.query])&&void 0!==l?l:{})[i.card_type]:a===x.eJ?b:[]),k=(0,h.v9)(e=>(null!==(n=e.project.members[d])&&void 0!==n?n:{})[a]),C=null==k?void 0:k.selectedImage,N=()=>{null!=C&&o(C)};(0,c.useEffect)(()=>{if(null!=Z){let e=C;null==e||Z.includes(e)||(e=void 0),Z.length>0&&null==e&&(null!=i?e=Z[0]:a===x.eJ&&null!=y&&(e=y)),v((0,_.qP)({face:a,slot:d,selectedImage:e}))}},[Z,y]);let I=null!=Z?Z:[],w=null!=C?I.indexOf(C):void 0,F=null!=w?I[(0,p.N0)(w+1,I.length)]:void 0,D=null!=w?I[(0,p.N0)(w-1,I.length)]:void 0,T=()=>{v((0,_.NO)({slot:d}))},B=e=>{2==e.detail?v((0,_.HS)({slot:d,face:a})):v((0,_.O$)({slot:d,face:a}))};function P(e){null!=w&&v((0,_.qP)({face:a,slot:d,selectedImage:I[(0,p.N0)(w+e,I.length)]}))}let z=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"card-select",onClick:B,"aria-label":"select-".concat(a).concat(d),children:(0,r.jsx)("i",{className:"bi bi".concat(null!==(t=null==k?void 0:k.selected)&&void 0!==t&&t?"-check":"","-square")})}),(0,r.jsx)("button",{className:"remove",children:(0,r.jsx)("i",{className:"bi bi-x-circle",onClick:T,"aria-label":"remove-".concat(a).concat(d)})})]}),E=(0,r.jsxs)(r.Fragment,{children:[1===I.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",I.length]}),I.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:g,children:[(null!=w?w:0)+1," / ",I.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{variant:"outline-primary",className:"prev",onClick:()=>P(-1),children:"❮"}),(0,r.jsx)(f.Z,{variant:"outline-primary",className:"next",onClick:()=>P(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{style:{contentVisibility:"auto"},"data-testid":"".concat(a,"-slot").concat(d),children:[(0,r.jsx)(S,{imageIdentifier:C,previousImageIdentifier:F,nextImageIdentifier:D,cardHeaderTitle:"Slot ".concat(d+1),cardFooter:E,cardHeaderButtons:z,imageOnClick:N,searchQuery:i,noResultsFound:null!=Z&&0===Z.length}),I.length>1&&(0,r.jsx)(q,{face:a,slot:d,searchResultsForQuery:I,show:u,handleClose:j})]})});var O=l(7088),M=l(5713);function R(){let e=(0,h.I0)(),[s,l]=(0,c.useState)(null),[n,t]=(0,c.useState)(!1),i=()=>t(!1),a=(0,c.useCallback)(e=>{l(e),t(!0)},[]),d="idle"===(0,h.v9)(e=>e.searchResults.status),m=(0,h.v9)(_.LI),j=[],g=[],f=(0,h.v9)(_.wH),v=(0,h.v9)(e=>e.searchSettings),p=(0,c.useMemo)(()=>JSON.stringify(v),[v]),b=JSON.stringify(v.sourceSettings.sources),Z=(0,c.useMemo)(()=>{let e=Array.from(m);return e.sort(),JSON.stringify(e)},[f]);for(let[s,l]of((0,c.useEffect)(()=>{null!=v.sourceSettings.sources&&e((0,O.U9)())},[Z,b]),(0,c.useEffect)(()=>{null!=v.sourceSettings.sources&&(e((0,M.Ug)()),e((0,O.U9)()))},[p]),f.entries())){var k,C;j.push((0,r.jsx)(E,{searchQuery:null===(k=l.front)||void 0===k?void 0:k.query,face:x.i6,slot:s,handleShowDetailedView:a},"".concat(x.i6,"-slot").concat(s))),g.push((0,r.jsx)(E,{searchQuery:null===(C=l.back)||void 0===C?void 0:C.query,face:x.eJ,slot:s,handleShowDetailedView:a},"".concat(x.eJ,"-slot").concat(s)))}let N=(0,h.v9)(e=>e.viewSettings.frontsVisible);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:N?"":"none"},children:j}),(0,r.jsx)(o.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:N?"none":""},children:g}),(0,r.jsxs)(u.Z,{show:!d,children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Loading..."})}),(0,r.jsx)(u.Z.Body,{children:"TODO"})]}),null!=s&&(0,r.jsx)(y,{imageIdentifier:s,show:n,handleClose:i})]})}let A=(0,c.memo)(function(e){let{searchResults:s,show:l,handleClose:n}=e,t=(0,h.v9)(e=>e.project.cardback),i=(0,h.I0)();return(0,r.jsx)(z,{testId:"cardback-grid-selector",imageIdentifiers:s,show:l,handleClose:n,onClick:function(e){null!=t&&(i((0,_.Tx)({currentImage:t,selectedImage:e,face:x.eJ})),i((0,_.mp)({selectedImage:e})))}})});function H(e){let{selectedImage:s}=e,l=(0,h.I0)(),[n,t]=(0,c.useState)(!1),[i,a]=(0,c.useState)(!1),d=()=>t(!1),o=()=>t(!0),u=()=>a(!1),m=()=>a(!0),j=(0,h.v9)(e=>e.cardbacks.cardbacks);(0,c.useEffect)(()=>{j.length>0&&null==s&&l((0,_.mp)({selectedImage:j[0]}))},[j]);let g=null!=s?j.indexOf(s):void 0,v=null!=g?j[(0,p.N0)(g+1,j.length)]:void 0,b=null!=g?j[(0,p.N0)(g-1,j.length)]:void 0;function Z(e){if(null!=s&&null!=g){let n=j[(0,p.N0)(g+e,j.length)];l((0,_.Tx)({currentImage:s,selectedImage:n,face:x.eJ})),l((0,_.mp)({selectedImage:n}))}}let k=(0,r.jsxs)(r.Fragment,{children:[1===j.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",j.length]}),j.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:m,children:[(null!=g?g:0)+1," / ",j.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{variant:"outline-primary",className:"prev",onClick:()=>Z(-1),children:"❮"}),(0,r.jsx)(f.Z,{variant:"outline-primary",className:"next",onClick:()=>Z(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{"data-testid":"common-cardback",children:[(0,r.jsx)(S,{imageIdentifier:s,previousImageIdentifier:v,nextImageIdentifier:b,cardHeaderTitle:"Cardback",cardFooter:k,imageOnClick:o,noResultsFound:!1}),(0,r.jsx)(A,{searchResults:j,show:i,handleClose:u}),null!=s&&(0,r.jsx)(y,{imageIdentifier:s,show:n,handleClose:d})]})}var V=l(1205),L=l(7125),Q=l(2283),U=l(2512);function X(){let e=(0,Z.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return X=function(){return e},e}let J=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",$=C.ZP.div(X(),e=>J(e));function K(e){let{mimeTypes:s,fileUploadCallback:l,label:n}=e,t=(0,c.useCallback)(e=>{e.forEach(e=>{let s=new FileReader;s.onabort=()=>console.log("file reading was aborted"),s.onerror=()=>console.log("file reading has failed"),s.onload=()=>{l(s.result)},s.readAsText(e)})},[l]),{getRootProps:i,getInputProps:a,isFocused:d,isDragAccept:o,isDragReject:h}=(0,U.uI)({onDrop:t,accept:s,maxFiles:1});return(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)($,{...i({isFocused:d,isDragAccept:o,isDragReject:h}),"aria-label":null!=n?n:"dropzone",children:[(0,r.jsx)("input",{...a()}),"Drag and drop a file here, or click to select a file."]})})}var W=l(4641),Y=l(8737);function G(){let e=(0,Z.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return G=function(){return e},e}function ee(){let e=(0,Z.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return ee=function(){return e},e}function es(){let e=(0,Z.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return es=function(){return e},e}let el=(0,C.ZP)(v.Z)(G()),en=C.ZP.th(ee()),et=C.ZP.td(es());function er(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(el,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(en,{children:"Quantity"}),(0,r.jsx)(en,{children:"Front"}),(0,r.jsx)(en,{children:"Front ID"}),(0,r.jsx)(en,{children:"Back"}),(0,r.jsx)(en,{children:"Back ID"})]}),(0,r.jsx)("tbody",{children:[,,,].fill((0,r.jsx)("tr",{children:[,,,,,].fill((0,r.jsx)(et,{}))}))})]}),"Where the columns follow these rules:",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Quantity"}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card front. ",(0,r.jsx)("b",{children:"Cannot be blank."})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card back. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function ei(){return(0,r.jsxs)(el,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(en,{children:"Quantity"}),(0,r.jsx)(en,{children:"Front"}),(0,r.jsx)(en,{children:"Front ID"}),(0,r.jsx)(en,{children:"Back"}),(0,r.jsx)(en,{children:"Back ID"})]}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"2"})}),(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"island"})}),(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"1HsvTYs1..."})}),(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"forest"})}),(0,r.jsx)(et,{})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"3"})}),(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"t:goblin"})}),(0,r.jsx)(et,{}),(0,r.jsx)(et,{}),(0,r.jsx)(et,{children:(0,r.jsx)("code",{children:"1JtXL6Ca..."})})]})]})]})}function ea(){let e=(0,h.I0)(),s=(0,h.v9)(Y.If),l=(0,Q.l)(void 0,{skip:null==s}),[n,t]=(0,c.useState)(!1),i=()=>t(!1),a=()=>t(!0),d=(0,h.v9)(_.zO),o=s=>{var n;if("string"!=typeof s){alert("invalid CSV file uploaded");return}let t="quantity",r="frontQuery",a="frontSelectedImage",c="backQuery",o="backSelectedImage",h=(0,L.Q)(s,{header:{Quantity:t,Front:r,"Front ID":a,Back:c,"Back ID":o}}),u=e=>{var s,l,n,i,d;let h="".concat(null!==(s=e[t])&&void 0!==s?s:""," ").concat(null!==(l=e[r])&&void 0!==l?l:"");return(null!==(n=e[a])&&void 0!==n?n:"").length>0&&(h+="".concat(x.A0).concat(e[a])),(null!==(i=e[c])&&void 0!==i?i:"").length>0&&(h+=" ".concat(x.M0," ").concat(e[c]),(null!==(d=e[o])&&void 0!==d?d:"").length>0&&(h+="".concat(x.A0).concat(e[o]))),h},m=(0,W.l_)(h.map(u),null!==(n=l.data)&&void 0!==n?n:{});e((0,_.r7)({members:(0,W.wt)(m,d)})),i()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V.Z.Item,{onClick:a,children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-spreadsheet",style:{paddingRight:"0.5em"}})," ","CSV"]}),(0,r.jsxs)(u.Z,{show:n,onHide:i,"data-testid":"import-csv",children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Add Cards — CSV"})}),(0,r.jsxs)(u.Z.Body,{children:[(0,r.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,r.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,r.jsx)(er,{}),"For example:",(0,r.jsx)(ei,{}),(0,r.jsx)("hr",{}),(0,r.jsx)(K,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:o,label:"import-csv"})]}),(0,r.jsx)(u.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:i,children:"Close"})})]})]})}(n=t||(t={})).quantity="Quantity",n.frontQuery="Front",n.frontSelectedImage="Front ID",n.backQuery="Back",n.backSelectedImage="Back ID";var ec=l(2914);function ed(){let e=(0,h.v9)(Y.If),s=(0,Q.cf)(void 0,{skip:null==e}),l=(0,Q.l)(void 0,{skip:null==e}),n=(0,h.I0)(),[t,i]=(0,c.useState)(!1),a=()=>i(!1),d=()=>i(!0),[o,m]=(0,c.useState)(""),[j,g]=(0,c.useState)(""),v=(0,h.v9)(_.zO),p=e=>{let s=[];for(let l of[x.Zb,x.WU,x.dt])null!=e[l]&&s.push(e[l].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(x.P$[l]).concat((0,W.GL)(e.name))).join("\n"));return s.join("\n\n")};(0,c.useEffect)(()=>{void 0!=s.data&&g(p(s.data))},[s.data]);let b=()=>{var e;let s=(0,W.ts)(o,null!==(e=l.data)&&void 0!==e?e:{});n((0,_.r7)({members:(0,W.wt)(s,v)})),a()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V.Z.Item,{onClick:d,children:[(0,r.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Text"]}),(0,r.jsxs)(u.Z,{show:t,onHide:a,onExited:()=>m(""),"data-testid":"import-text",children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Add Cards — Text"})}),(0,r.jsxs)(u.Z.Body,{children:[(0,r.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,r.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,r.jsxs)("p",{children:["Specify both front and back queries by separating them with"," ",(0,r.jsx)("code",{children:x.M0})," — for example,"," ",(0,r.jsxs)("code",{children:["4x goblin ",x.M0," ",x.P$[x.WU],"elf"]}),"."]}),(0,r.jsxs)("p",{children:["You may optionally specify the image ID to select with"," ",(0,r.jsx)("code",{children:x.A0})," — for example,"," ",(0,r.jsxs)("code",{children:["brainstorm",x.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]})]}),(0,r.jsx)("p",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back for you."}),(0,r.jsx)(ec.Z.Group,{className:"mb-3",children:(0,r.jsx)(ec.Z.Control,{as:"textarea",rows:12,placeholder:j,required:!0,onChange:e=>m(e.target.value),value:o,"aria-label":"import-text"})})]}),(0,r.jsxs)(u.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:b,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}function eo(){var e,s;let l=(0,h.v9)(Y.If),n=(0,Q.l)(void 0,{skip:null==l}),t=(0,Q.QA)(void 0,{skip:null==l}),i=(0,Q.zr)(void 0,{skip:null==l}),a=(0,h.v9)(_.zO),d=(0,h.I0)(),[o,m]=(0,c.useState)(!1),[j,g]=(0,c.useState)(!1),v=()=>m(!1),p=()=>m(!0),[y,Z]=(0,c.useState)(""),[k,C]=Q.gk.endpoints.queryImportSite.useLazyQuery(),N=(0,c.useCallback)(async()=>{let e=y.trim();if(e.length>0){var s,l;g(!0);let e=await k(y),t=(0,W.ts)(null!==(s=e.data)&&void 0!==s?s:"",null!==(l=n.data)&&void 0!==l?l:{});d((0,_.r7)({members:(0,W.wt)(t,a)})),v(),g(!1)}},[y]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V.Z.Item,{onClick:p,children:[(0,r.jsx)("i",{className:"bi bi-link-45deg",style:{paddingRight:"0.5em"}})," ","URL"]}),(0,r.jsxs)(u.Z,{show:o,onHide:v,onExited:()=>Z(""),children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Add Cards — URL"})}),(0,r.jsxs)(u.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into"," ",null!==(s=null===(e=i.data)||void 0===e?void 0:e.name)&&void 0!==s?s:x.vV,":",(0,r.jsx)("br",{}),null!=t.data?(0,r.jsx)("ul",{children:t.data.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(b.$,{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(ec.Z.Group,{className:"mb-3",children:(0,r.jsx)(ec.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>Z(e.target.value.trim()),value:y,disabled:j||null==t.data})})]}),(0,r.jsxs)(u.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:v,children:"Close"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:async()=>{await N()},disabled:j||t.isFetching,children:"Submit"})]})]})]})}function eh(){let e=(0,h.I0)(),[s,l]=(0,c.useState)(!1),n=()=>l(!1),t=()=>l(!0),i=(0,h.v9)(_.sZ),a=(0,h.v9)(_.zO),[d,o]=(0,c.useState)(!1),m=s=>{var l,t,r,c,o;if("string"!=typeof s){alert("invalid CSV file uploaded");return}let h=new DOMParser,u=h.parseFromString(s,"application/xml"),m=u.getElementsByTagName("order")[0],j=m.getElementsByTagName("fronts")[0],g=m.getElementsByTagName("backs")[0],f=j.getElementsByTagName("card"),v=null!=g?g.getElementsByTagName("card"):void 0,p=null!==(t=null===(l=m.getElementsByTagName("cardback")[0])||void 0===l?void 0:l.textContent)&&void 0!==t?t:i,b=0,y=Array.from({length:x.Wn-a},()=>({front:null,back:null}));if(null!=v)for(let e of v){let s=null===(r=e.getElementsByTagName("slots")[0])||void 0===r?void 0:r.textContent;if(null==s)continue;let l=(0,W.XV)(null!==(c=e.getElementsByTagName("query")[0].textContent)&&void 0!==c?c:"");s.split(",").map(e=>parseInt(e)).forEach(s=>{var n;y[s].back={query:l,selectedImage:null!==(n=e.getElementsByTagName("id")[0].textContent)&&void 0!==n?n:void 0,selected:!1},b=Math.max(b,s)})}for(let e of f){let s=e.getElementsByTagName("slots")[0].textContent;if(null==s)continue;let l=(0,W.XV)(null!==(o=e.getElementsByTagName("query")[0].textContent)&&void 0!==o?o:"");s.split(",").map(e=>parseInt(e)).forEach(s=>{var n;y[s].front={query:l,selectedImage:null!==(n=e.getElementsByTagName("id")[0].textContent)&&void 0!==n?n:void 0,selected:!1},null==y[s].back&&null!=p&&(y[s].back={query:{query:null,card_type:x.dt},selectedImage:p,selected:!1}),b=Math.max(b,s)})}e((0,_.r7)({members:y.slice(0,b+1)})),d&&null!=p&&e((0,_.mp)({selectedImage:p})),n()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V.Z.Item,{onClick:t,children:[(0,r.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," ","XML"]}),(0,r.jsxs)(u.Z,{show:s,onHide:n,"data-testid":"import-xml",children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Add Cards — XML"})}),(0,r.jsxs)(u.Z.Body,{children:[(0,r.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,r.jsxs)("p",{children:["The ",x.vV," website can generate an XML file representing your project, and the ",x.vV," desktop tool which auto-fills your order into"," ",(0,r.jsx)("a",{href:x.vs,target:"_blank",children:x.Fo})," ","expects a file in this format."]}),(0,r.jsx)(D.ZP,{onClick:()=>o(!d),on:"Update Project with XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:d}),(0,r.jsx)("hr",{}),(0,r.jsx)(K,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:m,label:"import-xml"})]}),(0,r.jsx)(u.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:n,children:"Close"})})]})]})}function eu(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(V.Z,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(V.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("i",{className:"bi bi-plus-circle",style:{paddingRight:"0.5em"}})," ","Add Cards"]})}),(0,r.jsxs)(V.Z.Menu,{children:[(0,r.jsx)(ed,{}),(0,r.jsx)(eh,{}),(0,r.jsx)(ea,{}),(0,r.jsx)(eo,{})]})]})})}var ex=l(8375),em=l(6728),ej=l(3489);function eg(e){var s,l,n,t,i,a;let{slots:d}=e,o=(0,h.I0)(),[u,m]=(0,c.useState)(!1),j=()=>m(!1),g=()=>m(!0),f=e=>{o((0,_.ND)({selectedImage:e,slots:d})),j()},v=(0,h.v9)(e=>d.length>0&&null!=d[0]?e.project.members[d[0][1]][d[0][0]].query:null),p=(0,h.v9)(e=>d.every(t=>{var r,i,a,c,d,o;let[h,u]=t;return(null==v?void 0:v.query)==null&&(null===(r=(null!==(s=e.project.members[u])&&void 0!==s?s:{})[h])||void 0===r?void 0:null===(i=r.query)||void 0===i?void 0:i.query)==null||null!=v&&(null===(a=(null!==(l=e.project.members[u])&&void 0!==l?l:{})[h])||void 0===a?void 0:null===(c=a.query)||void 0===c?void 0:c.query)==v.query&&(null===(d=(null!==(n=e.project.members[u])&&void 0!==n?n:{})[h])||void 0===d?void 0:null===(o=d.query)||void 0===o?void 0:o.card_type)==v.card_type})),b=null!==(t=(0,h.v9)(e=>e.cardbacks.cardbacks))&&void 0!==t?t:[],y=(0,h.v9)(e=>(null==v?void 0:v.query)!=null?null!==(a=(null!==(i=e.searchResults.searchResults[v.query])&&void 0!==i?i:{})[v.card_type])&&void 0!==a?a:[]:d.length>0&&d[0][0]===x.eJ?b:[]);return(0,r.jsxs)(r.Fragment,{children:[y.length>1&&p&&(0,r.jsxs)(V.Z.Item,{className:"text-decoration-none",onClick:g,children:[(0,r.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," ","Change Version"]}),(0,r.jsx)(z,{testId:"bulk-grid-selector",imageIdentifiers:y,show:u,handleClose:j,onClick:f})]})}function ef(e){var s;let{slots:l}=e,n=(0,h.I0)(),[t,i]=(0,c.useState)(!1),a=()=>i(!1),d=()=>i(!0),[o,m]=(0,c.useState)(""),j=e=>{e.preventDefault(),n((0,_.qe)({query:o,slots:l})),a()},g=(0,h.v9)(Y.If),v=(0,Q.cf)(void 0,{skip:null==g}),p=null!=v.data&&null!=(null!==(s=v.data)&&void 0!==s?s:{})[x.Zb][0]?v.data[x.Zb][0].name:"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V.Z.Item,{className:"text-decoration-none",onClick:d,children:[(0,r.jsx)("i",{className:"bi bi-arrow-repeat",style:{paddingRight:"0.5em"}})," ","Change Query"]}),(0,r.jsxs)(u.Z,{show:t,onHide:a,onExited:()=>m(""),children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Change Query"})}),(0,r.jsxs)(u.Z.Body,{children:["Type in a query to update the selected images with and hit"," ",(0,r.jsx)("b",{children:"Submit"}),".",(0,r.jsx)("hr",{}),(0,r.jsx)(ec.Z,{onSubmit:j,id:"changeSelectedImageQueriesForm",children:(0,r.jsx)(ec.Z.Group,{className:"mb-3",children:(0,r.jsx)(ec.Z.Control,{type:"text",placeholder:p,onChange:e=>m(e.target.value),value:o,"aria-label":"change-selected-image-queries-text"})})})]}),(0,r.jsxs)(u.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(f.Z,{type:"submit",form:"changeSelectedImageQueriesForm",variant:"primary","aria-label":"change-selected-image-queries-submit",children:"Submit"})]})]})]})}function ev(e){let{slots:s}=e,l=(0,h.I0)(),n=s.map(e=>{let[s,l]=e;return l}),t=()=>l((0,_.uA)({slots:n}));return(0,r.jsxs)(V.Z.Item,{onClick:t,className:"text-decoration-none",children:[(0,r.jsx)("i",{className:"bi bi-x-circle",style:{paddingRight:"0.5em"}})," ","Delete Slots"]})}function ep(){let e=(0,h.v9)(_.NV),s=(0,h.I0)(),l=()=>s((0,_.fP)({selectedStatus:!1,slots:e}));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ex.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,r.jsxs)(F.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,r.jsx)(f.Z,{onClick:l,className:"ms-auto","data-testid":"clear-selection",children:(0,r.jsx)("i",{className:"bi bi-x-lg"})}),(0,r.jsxs)(V.Z,{children:[(0,r.jsx)(V.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,r.jsxs)(V.Z.Menu,{children:[(0,r.jsx)(eg,{slots:e}),(0,r.jsx)(ef,{slots:e}),(0,r.jsx)(ev,{slots:e})]})]})]})})})}function eb(){let e=(0,Z.Z)(["\n  font-size 1.25rem\n"]);return eb=function(){return e},e}let ey=C.ZP.i(eb());function eZ(){let e=(0,h.v9)(_.eY),s=(0,h.v9)(_.Ed),l=(0,h.v9)(_.zO),n=(0,h.v9)(_.p4),t=()=>(0,m.saveAs)(new Blob([e],{type:"text/xml;charset=utf-8"}),"cards.xml"),i=()=>(0,m.saveAs)(new Blob([s],{type:"text/plain;charset=utf-8"}),"decklist.txt");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Edit MPC Project"}),(0,r.jsx)(ep,{}),(0,r.jsxs)(ex.Z,{variant:"secondary",children:["Your project contains ",(0,r.jsx)("b",{children:l})," card",1!==l&&"s",", belongs in the MPC bracket of up to"," ",(0,r.jsx)("b",{children:(0,p.wk)(l)})," cards, and is"," ",(0,r.jsx)("b",{children:(0,p.K)(n,0)})," in total.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),l>=x.Wn&&(0,r.jsx)(ex.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Save Project"}),children:(0,r.jsx)(f.Z,{variant:"outline-light",children:(0,r.jsx)(ey,{className:"bi bi-device-ssd"})})})})}),(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Download XML"}),children:(0,r.jsx)(f.Z,{variant:"outline-light",onClick:t,"data-testid":"download-xml",children:(0,r.jsx)(ey,{className:"bi bi-file-earmark-arrow-down"})})})})}),(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Download Decklist"}),children:(0,r.jsx)(f.Z,{variant:"outline-light",onClick:i,"data-testid":"download-decklist",children:(0,r.jsx)(ey,{className:"bi bi-file-text"})})})})}),(0,r.jsx)(d.Z,{xs:3,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(em.Z,{placement:"top",overlay:e=>(0,r.jsx)(ej.Z,{...e,children:"Download Images"}),children:(0,r.jsx)(f.Z,{variant:"outline-light",children:(0,r.jsx)(ey,{className:"bi bi-images"})})})})})]})]})]})}var ek=l(5582),eC=l(975);function eN(e){let{filterSettings:s,setFilterSettings:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,r.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,r.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,r.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,r.jsx)("b",{children:"look the same"}),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(ec.Z.Label,{children:["Minimum: ",(0,r.jsxs)("b",{children:[s.minimumDPI," DPI"]})]}),(0,r.jsx)(ec.Z.Range,{defaultValue:s.minimumDPI,min:x.sL,max:x.gx,step:x.Ox,onChange:e=>{l({...s,minimumDPI:parseInt(e.target.value)})}})]}),(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(ec.Z.Label,{children:["Maximum: ",(0,r.jsxs)("b",{children:[s.maximumDPI," DPI"]})]}),(0,r.jsx)(ec.Z.Range,{defaultValue:s.maximumDPI,min:x.sL,max:x.gx,step:x.Ox,onChange:e=>{l({...s,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,r.jsxs)(ec.Z.Label,{children:["File size: Up to ",(0,r.jsxs)("b",{children:[s.maximumSize," MB"]})]}),(0,r.jsx)(ec.Z.Range,{defaultValue:s.maximumSize,min:0,max:x.bD,step:x.B9,onChange:e=>{l({...s,maximumSize:parseInt(e.target.value)})}})]})}var eI=l(5749);function eS(e){let{searchTypeSettings:s,setSearchTypeSettings:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(D.ZP,{onClick:()=>l({...s,fuzzySearch:!s.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:s.fuzzySearch})]})}var ew=l(8627);function eF(e){let{sourceSettings:s,setSourceSettings:l}=e,n=(0,h.v9)(ek.TK),t=(0,c.useCallback)((e,n)=>{var t;let r=[...null!==(t=s.sources)&&void 0!==t?t:[]],[i]=r.splice(e,1);r.splice(n,0,i),l({sources:r})},[s.sources,l]),i=e=>{null!=e.destination&&t(e.source.index,e.destination.index)},a=(0,c.useCallback)(e=>{var n;let t=[...null!==(n=s.sources)&&void 0!==n?n:[]];t[e]=[t[e][0],!t[e][1]],l({sources:t})},[s.sources,l]),d=(0,c.useCallback)(()=>{var e;let n=null!==(e=s.sources)&&void 0!==e?e:[],t=!n.some(e=>e[1]),r=n.map(e=>[e[0],t]);l({sources:r})},[s.sources,l]),o=(0,r.jsx)(b.$,{});if(null!=n){var u;let e=(null!==(u=s.sources)&&void 0!==u?u:[]).map((e,l)=>(0,r.jsx)(ew._l,{draggableId:e[0].toString(),index:l,children:(i,c)=>(0,r.jsxs)("tr",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,children:[(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"20%"},children:(0,r.jsx)(D.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:x.B4+"px",active:e[1],onClick:()=>a(l)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"40%"},children:null!=n[e[0]].external_link?(0,r.jsx)("a",{href:n[e[0]].external_link,target:"_blank",children:n[e[0]].name}):(0,r.jsx)("a",{children:n[e[0]].name})},"".concat(e[0],"-name-column")),(0,r.jsx)("td",{className:"prevent-select",style:{verticalAlign:"middle",width:"30%"},children:n[e[0]].source_type},"".concat(e[0],"-type-column")),(0,r.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-up",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{t(l,0)}},"".concat(e[0],"-up-button"))}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-down",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{var e;t(l,(null!==(e=s.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:(0,r.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));o=(0,r.jsx)(ew.Z5,{onDragEnd:i,children:(0,r.jsx)(ew.bK,{droppableId:"source-order",children:(s,l)=>(0,r.jsx)("div",{style:{height:59*e.length+x.B4+"px"},children:(0,r.jsxs)(v.Z,{ref:s.innerRef,style:{tableLayout:"auto"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{height:x.B4+"px"},onClick:d,children:[(0,r.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Type"}),(0,r.jsx)("th",{}),(0,r.jsx)("th",{})]})}),(0,r.jsxs)("tbody",{children:[e,s.placeholder]})]})})})})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,r.jsxs)("li",{children:["Use the ",(0,r.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]}),(0,r.jsxs)("li",{children:["Click the ",(0,r.jsx)("b",{children:"table header"})," to enable or disable all sources."]})]}),o]})}function eD(){let e=(0,h.I0)(),[s,l]=(0,c.useState)(!1),n=(0,h.v9)(eI.xN),[t,i]=(0,c.useState)(n.searchTypeSettings),[a,d]=(0,c.useState)(n.sourceSettings),[o,x]=(0,c.useState)(n.filterSettings),m=(0,h.v9)(ek.TK);(0,c.useEffect)(()=>{if(null!=m){let s=(0,eC.cI)(m);e((0,eI.Fg)(s.searchTypeSettings)),e((0,eI.Ph)(s.sourceSettings)),e((0,eI._E)(s.filterSettings))}},[e,m]);let j=()=>l(!1),g=(0,c.useCallback)(()=>{i(n.searchTypeSettings),x(n.filterSettings),d(n.sourceSettings),l(!0)},[n]),v=()=>{(0,eC.Wm)({searchTypeSettings:t,sourceSettings:a,filterSettings:o}),e((0,eI.Fg)(t)),e((0,eI.Ph)(a)),e((0,eI._E)(o)),j()};return(0,r.jsxs)("div",{className:"d-grid gap-0",children:[(0,r.jsxs)(f.Z,{variant:"primary",onClick:g,children:[(0,r.jsx)("i",{className:"bi bi-gear",style:{paddingRight:"0.5em"}}),"Search Settings"]}),(0,r.jsxs)(u.Z,{show:s,onHide:v,"data-testid":"search-settings",children:[(0,r.jsx)(u.Z.Header,{closeButton:!0,children:(0,r.jsx)(u.Z.Title,{children:"Search Settings"})}),(0,r.jsxs)(u.Z.Body,{children:[(0,r.jsx)(eS,{searchTypeSettings:t,setSearchTypeSettings:i}),(0,r.jsx)("hr",{}),(0,r.jsx)(eN,{filterSettings:o,setFilterSettings:x}),(0,r.jsx)("hr",{}),(0,r.jsx)(eF,{sourceSettings:a,setSourceSettings:d})]}),(0,r.jsxs)(u.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:j,children:"Close Without Saving"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:v,children:"Save Changes"})]})]})]})}var eT=l(1110);function eB(){let e=(0,h.I0)();return(0,r.jsx)(D.ZP,{onClick:()=>e((0,T.$3)()),on:"Switch to Backs",onClassName:"flex-centre",off:"Switch to Fronts",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:(0,h.v9)(e=>e.viewSettings.frontsVisible)})}var eP=function(){var e;let s=(0,h.I0)(),l=null!==(e=(0,h.v9)(e=>e.project.cardback))&&void 0!==e?e:void 0;return(0,c.useEffect)(()=>{s((0,ek.$)())},[s]),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(d.Z,{lg:8,md:8,sm:6,xs:6,children:(0,r.jsx)(R,{})}),(0,r.jsx)(d.Z,{lg:4,md:4,sm:6,xs:6,style:{zIndex:1},children:(0,r.jsxs)("div",{className:"sticky-top sticky-offset g-0",style:{position:"sticky"},children:[(0,r.jsx)(eT.Z,{children:(0,r.jsx)(eZ,{})}),(0,r.jsx)(o.Z,{className:"g-0",children:(0,r.jsx)(eB,{})}),(0,r.jsxs)(o.Z,{className:"g-0 py-3",children:[(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(eD,{})}),(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(eu,{})})]}),(0,r.jsx)(d.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,r.jsx)(H,{selectedImage:l})})]})})]})},ez=l(4353);function e_(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Edit MPC Project"})," ",(0,r.jsx)("meta",{name:"description",content:"Edit MPC Project"})]}),(0,r.jsx)(ez.Z,{children:(0,r.jsx)(eP,{})})]})}l(1351)}},function(e){e.O(0,[62,868,536,353,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);