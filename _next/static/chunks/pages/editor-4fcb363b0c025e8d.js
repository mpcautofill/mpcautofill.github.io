(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return t(8140)}])},6666:function(e,n,t){"use strict";t.d(n,{J:function(){return d}});var s=t(2692),l=t(5893),r=t(9521);function a(){let e=(0,s.Z)(["\n  position: absolute;\n  top: 50vh;\n  left: 50vw;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]);return a=function(){return e},e}function i(){let e=(0,s.Z)(["\n  font-size: 1.25em;\n"]);return i=function(){return e},e}let c=r.ZP.div.withConfig({componentId:"sc-2f488237-0"})(a()),o=r.ZP.p.withConfig({componentId:"sc-2f488237-1"})(i());function d(e){let{title:n,text:t}=e;return(0,l.jsxs)(c,{children:[(0,l.jsx)("h1",{children:n}),t.map((e,n)=>(0,l.jsx)(o,{children:e},n.toString()))]})}},5617:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var s=t(5893),l=t(1677),r=t(6666);function a(){return(0,s.jsx)(r.J,{title:"No Server Configured",text:["You haven't configured a server for ".concat(l.vV," to communicate with just yet."),"Click the Configure Server button in the top-right to get started!"]})}},8140:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ne}});var s=t(5893),l=t(9008),r=t.n(l),a=t(2692),i=t(7294),c=t(1555),o=t(4051),d=t(9521),u=t(1677),h=t(1546),x=t(8737),m=t(6212),j=t(7104),g=t(8208),f=t(9159),p=t(3152),b=t(6518),y=t(478),C=t(3389),v=t(4159),Z=t(7088),k=t(5582),w=t(6898),N=t(5384);function I(e){let{cardIdentifiersAndOptionNumbersBySource:n,selectImage:t,sourceNamesByKey:l}=e;return(0,s.jsx)(o.Z,{className:"g-0 p-3",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(n).map((e,n)=>{let[l,r]=e;return(0,s.jsx)(s.Fragment,{children:r.flatMap(e=>{let[n,l]=e;return(0,s.jsx)(v.Z,{initialVisible:l<20,children:(0,s.jsx)(f.LL,{imageIdentifier:n,cardHeaderTitle:"Option ".concat(l+1),cardOnClick:()=>t(n),noResultsFound:!1},"gridSelector-".concat(n))},"gridSelector-".concat(n,"-wrapper"))})})})})}function S(e){var n,t;let{cardIdentifiersAndOptionNumbersBySource:l,selectImage:r,sourceNamesByKey:a}=e,i=(0,h.TL)(),c=(0,h.CG)(N.Hm);return(0,s.jsx)(s.Fragment,{children:Object.entries(l).map((e,l)=>{let[d,u]=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"sticky-top",onClick:()=>i((0,N.O6)(d)),style:{backgroundColor:"#4E5D6B",zIndex:l+100},children:[(0,s.jsx)("hr",{className:"mt-0"},"".concat(d,"-top-hr")),(0,s.jsxs)(y.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,s.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:a[d]},"".concat(d,"-header-title")),(0,s.jsxs)("h6",{className:"text-primary prevent-select",children:[u.length," version",1!=u.length&&"s"]}),(0,s.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(n=c[d])||void 0===n||n?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(d,"-collapse-header")},"".concat(d,"-arrow"))]},"".concat(d,"-header-inner")),(0,s.jsx)("hr",{className:"mb-0"},"".concat(d,"-bottom-hr"))]},"".concat(d,"-header")),(0,s.jsx)("div",{className:"py-2"}),(0,s.jsx)(b.Z,{in:null===(t=c[d])||void 0===t||t,"data-testid":"".concat(d,"-collapse"),children:(0,s.jsx)(o.Z,{className:"g-0 px-3",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:u.map(e=>{let[n,t]=e;return(0,s.jsx)(v.Z,{initialVisible:t<20,children:(0,s.jsx)(f.LL,{imageIdentifier:n,cardHeaderTitle:"Option ".concat(t+1),cardOnClick:()=>r(n),noResultsFound:!1},"gridSelector-".concat(n))},"gridSelector-".concat(n,"-wrapper"))})},"".concat(d,"-row"))}),(0,s.jsx)("div",{className:"py-2"})]})})})}function T(e){let{testId:n,imageIdentifiers:t,show:l,handleClose:r,onClick:a}=e,d=(0,h.TL)(),x=(0,h.CG)(e=>(0,Z.ek)(e,t)),g=(0,h.CG)(N.Mj),f=(0,i.useCallback)(e=>{a(e),r()},[a,r]),p=(0,h.CG)(k.sn),b=Object.keys(p),y=(0,h.CG)(N.Ne),v=(0,i.useMemo)(()=>t.reduce((e,n,t)=>{let s=x[n];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([n,t])),e},{}),[x,t]);return(0,s.jsxs)(m.Z,{scrollable:!0,show:l,onHide:r,size:"lg","data-testid":n,children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Select Version"})}),(0,s.jsxs)(m.Z.Body,{className:"d-grid p-0",children:[(0,s.jsxs)(o.Z,{className:"p-3",style:{width:"100%"},children:[(0,s.jsx)(c.Z,{md:8,sm:6,children:(0,s.jsx)(C.ZP,{onClick:()=>d((0,N.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:g})}),g&&(0,s.jsx)(c.Z,{md:4,sm:6,children:(0,s.jsx)("div",{className:"d-grid g-0",children:(0,s.jsxs)(j.Z,{onClick:()=>d(y?(0,N.X8)():(0,N.tC)(b)),children:[(0,s.jsx)(w.V9,{bootstrapIconName:"arrows-".concat(y?"expand":"collapse")})," ",y?"Expand":"Collapse"," All"]})})})]}),(0,s.jsx)("br",{}),g?(0,s.jsx)(S,{cardIdentifiersAndOptionNumbersBySource:v,selectImage:f,sourceNamesByKey:p}):(0,s.jsx)(I,{cardIdentifiersAndOptionNumbersBySource:v,selectImage:f,sourceNamesByKey:p})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:r,children:"Close"})})]})}var F=t(4251),P=t(1230),L=t(5713);let B=(0,i.memo)(function(e){let{face:n,slot:t,searchResultsForQuery:l,show:r,handleClose:a}=e,i=(0,h.TL)();return(0,s.jsx)(T,{testId:"".concat(n,"-slot").concat(t,"-grid-selector"),imageIdentifiers:l,show:r,handleClose:a,onClick:function(e){i((0,P.qP)({face:n,slot:t,selectedImage:e}))}})}),E=(0,i.memo)(function(e){var n;let{searchQuery:t,face:l,slot:r}=e,[a,c]=(0,i.useState)(!1),o=()=>c(!1),d=()=>c(!0),x=(0,h.TL)(),m=(0,h.CG)(p.yU),b=(0,h.CG)(P.sZ),y=(0,h.CG)(e=>(0,L.ci)(e,t,l,m)),C=(0,h.CG)(e=>(0,P.AN)(e,r,l)),v=null==C?void 0:C.selectedImage,Z=()=>{x((0,F.PP)([[[l,r]],"changeQuery"]))};(0,i.useEffect)(()=>{if(null!=y){let e=v;null==e||y.includes(e)||(e=void 0),y.length>0&&null==e&&((null==t?void 0:t.query)!=null?e=y[0]:l===u.eJ&&null!=b&&(e=b)),x((0,P.qP)({face:l,slot:r,selectedImage:e}))}},[x,l,r,null==t?void 0:t.query,y,b,v]);let k=null!=y?y:[],w=null!=v?k.indexOf(v):void 0,N=null!=w?k[(0,g.N0)(w+1,k.length)]:void 0,I=null!=w?k[(0,g.N0)(w-1,k.length)]:void 0,S=()=>{x((0,P.NO)({slot:r}))},T=e=>{2==e.detail?x((0,P.HS)({slot:r,face:l})):x((0,P.O$)({slot:r,face:l}))};function E(e){null!=w&&x((0,P.qP)({face:l,slot:r,selectedImage:k[(0,g.N0)(w+e,k.length)]}))}let G=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"card-select",onClick:T,"aria-label":"select-".concat(l).concat(r),children:(0,s.jsx)("i",{className:"bi bi".concat(null!==(n=null==C?void 0:C.selected)&&void 0!==n&&n?"-check":"","-square")})}),(0,s.jsx)("button",{className:"remove",children:(0,s.jsx)("i",{className:"bi bi-x-circle",onClick:S,"aria-label":"remove-".concat(l).concat(r)})})]}),z=(0,s.jsxs)(s.Fragment,{children:[1===k.length&&(0,s.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",k.length]}),k.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:d,children:[(null!=w?w:0)+1," / ",k.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j.Z,{variant:"outline-primary",className:"prev",onClick:()=>E(-1),children:"❮"}),(0,s.jsx)(j.Z,{variant:"outline-primary",className:"next",onClick:()=>E(1),children:"❯"})]})]})]});return(0,s.jsxs)("div",{"data-testid":"".concat(l,"-slot").concat(r),children:[(0,s.jsx)(f.LL,{imageIdentifier:v,previousImageIdentifier:N,nextImageIdentifier:I,cardHeaderTitle:"Slot ".concat(r+1),cardFooter:z,cardHeaderButtons:G,searchQuery:t,nameOnClick:Z,noResultsFound:null!=y&&0===y.length}),k.length>1&&a&&(0,s.jsx)(B,{face:l,slot:r,searchResultsForQuery:k,show:a,handleClose:o})]})});var G=t(5305);function z(){let e=(0,a.Z)(["\n  position: absolute;\n  border: 1px darkgray solid;\n  border-radius: 10px;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 50px 0 black inset;\n"]);return z=function(){return e},e}function O(){let e=(0,a.Z)(["\n  position: relative;\n  font-size: 1.25em;\n  text-align: center;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 4px 15px #000000;\n  max-width: 90%;\n"]);return O=function(){return e},e}let D=d.ZP.div.withConfig({componentId:"sc-666901d7-0"})(z()),q=d.ZP.div.withConfig({componentId:"sc-666901d7-1"})(O());function A(){return(0,s.jsx)(D,{children:(0,s.jsxs)(q,{children:[(0,s.jsx)("p",{children:"Your project is empty at the moment."}),(0,s.jsxs)("p",{children:["Use the ",(0,s.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function M(){let e=(0,h.CG)(e=>"loading"==e.cardDocuments.status||"loading"===e.searchResults.status),n=(0,h.CG)(P.aG),t=(0,h.CG)(N.ZR),l=(0,h.CG)(P.wH),r=[],a=[];for(let[e,n]of l.entries()){var i,c;r.push((0,s.jsx)(E,{searchQuery:null===(i=n.front)||void 0===i?void 0:i.query,face:u.i6,slot:e},"".concat(u.i6,"-slot").concat(e))),a.push((0,s.jsx)(E,{searchQuery:null===(c=n.back)||void 0===c?void 0:c.query,face:u.eJ,slot:e},"".concat(u.eJ,"-slot").concat(e)))}return(0,s.jsxs)(s.Fragment,{children:[0==l.length&&(0,s.jsx)(A,{}),(0,s.jsx)(o.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:t?"":"none"},children:r}),(0,s.jsx)(o.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:t?"none":""},children:a}),(0,s.jsxs)(m.Z,{scrollable:!0,show:e&&!n,centered:!0,children:[(0,s.jsx)(m.Z.Header,{children:(0,s.jsx)(m.Z.Title,{style:{textAlign:"center",userSelect:"none"},className:"w-100",children:"Loading your cards..."})}),(0,s.jsx)(m.Z.Body,{children:(0,s.jsx)(G.$,{})})]})]})}let V=(0,i.memo)(function(e){let{searchResults:n,show:t,handleClose:l}=e,r=(0,h.CG)(P.sZ),a=(0,h.TL)();return(0,s.jsx)(T,{testId:"cardback-grid-selector",imageIdentifiers:n,show:t,handleClose:l,onClick:function(e){null!=r&&(a((0,P.Tx)({currentImage:r,selectedImage:e,face:u.eJ})),a((0,P.mp)({selectedImage:e})))}})});function H(e){let{selectedImage:n}=e,t=(0,h.TL)(),[l,r]=(0,i.useState)(!1),a=()=>r(!1),c=()=>r(!0),o=(0,h.CG)(p.yU);(0,i.useEffect)(()=>{let e=n;null==e||o.includes(e)||(e=void 0),o.length>0&&null==e&&(e=o[0]),t((0,P.mp)({selectedImage:null!=e?e:null}))},[t,n,o]);let d=null!=n?o.indexOf(n):void 0,x=null!=d?o[(0,g.N0)(d+1,o.length)]:void 0,m=null!=d?o[(0,g.N0)(d-1,o.length)]:void 0;function b(e){if(null!=n&&null!=d){let s=o[(0,g.N0)(d+e,o.length)];t((0,P.Tx)({currentImage:n,selectedImage:s,face:u.eJ})),t((0,P.mp)({selectedImage:s}))}}let y=(0,s.jsxs)(s.Fragment,{children:[1===o.length&&(0,s.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",o.length]}),o.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:c,children:[(null!=d?d:0)+1," / ",o.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j.Z,{variant:"outline-primary",className:"prev",onClick:()=>b(-1),children:"❮"}),(0,s.jsx)(j.Z,{variant:"outline-primary",className:"next",onClick:()=>b(1),children:"❯"})]})]})]});return(0,s.jsxs)("div",{"data-testid":"common-cardback",children:[(0,s.jsx)(f.LL,{imageIdentifier:n,previousImageIdentifier:x,nextImageIdentifier:m,cardHeaderTitle:"Cardback",cardFooter:y,noResultsFound:0===o.length}),l&&(0,s.jsx)(V,{searchResults:o,show:l,handleClose:a})]})}var R=t(1205),U=t(8102),_=t(2664),Q=t(611);let X=e=>(function(e,n){let t=function(e,n){function t(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(n,e.selectedImage)&&n[e.selectedImage].card_type===u.Zb?(0,Q.GL)(n[e.selectedImage].name):null}return e.map(e=>[t(e[u.i6]),t(e[u.eJ])])}(e,n),s=t.map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]," ").concat(u.M0," ").concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0);return(function(e){let n=e.reduce((e,n)=>(Object.prototype.hasOwnProperty.call(e,n)||(e[n]=0),e[n]++,e),{});return Object.keys(n).sort().map(e=>"".concat(n[e],"x ").concat(e))})(s).join("\n")})((0,P.wH)(e),e.cardDocuments.cardDocuments);function W(){let e=(0,_.oR)(),n=(0,h.CG)(P.aG),t=()=>{let n=X(e.getState());(0,U.saveAs)(new Blob([n],{type:"text/plain;charset=utf-8"}),"decklist.txt")};return(0,s.jsxs)(R.Z.Item,{disabled:n,onClick:t,"data-testid":"export-decklist-button",children:[(0,s.jsx)(w.V9,{bootstrapIconName:"card-text"})," Decklist"]})}var $=t(8375),J=t(1479),K=t(7932),Y=t(1457);function ee(){let e=(0,a.Z)(["\n  --bs-progress-bg: #424e5c;\n"]);return ee=function(){return e},e}let en=(0,d.ZP)(J.Z).withConfig({componentId:"sc-5077c2e7-0"})(ee());function et(){let e=(0,h.TL)(),n=(0,h.CG)(P.aG),[l,r]=(0,i.useState)(!1),a=()=>r(!1),c=()=>r(!0),[o,d]=(0,i.useState)(!1),x=(0,Z.zK)(),g=Object.keys(x).length,[f,p]=(0,i.useState)(0),b=(0,i.useRef)(null),y=async()=>{null!=b.current&&(await b.current.terminate(!0),d(!1))},C=async()=>{if(d(!0),p(0),b.current=(0,K.Kg)(()=>(0,K.Cs)(new K.Cc(t.tu(new URL(t.p+t.u(667),t.b)))),5),null!=b.current){let n=0;Object.keys(x).map(t=>{null!=b.current&&b.current.queue(async s=>{let l=x[t];if(null!=l)try{let e=await s(t);(0,U.saveAs)((0,Q.jg)(e),"".concat(l.name," (").concat(l.identifier,").").concat(l.extension))}catch(n){e((0,Y.sT)(["download-".concat(l.identifier,"-failed"),{name:"Failed to download image",message:"Downloading the full"}]))}p(++n)})}),await b.current.settled(),await b.current.terminate(),d(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.Z.Item,{disabled:n,onClick:c,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"image"})," Card Images"]}),(0,s.jsxs)(m.Z,{show:l,onHide:a,"data-testid":"export-images",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Download — Card Images"})}),(0,s.jsxs)(m.Z.Body,{children:[o&&(0,s.jsx)("p",{children:"Your images should be downloading now. This might take a while! Please don't close the page until the process is complete."}),!o&&0==g&&(0,s.jsx)("p",{children:"You'll be able to download the card images in your project here once you've added some cards."}),!o&&g>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Click the button below to begin. This will download the"," ",(0,s.jsx)("b",{children:g})," unique image",1!=g&&"s"," in your project."]}),(0,s.jsx)("p",{children:"This feature may not work as expected on mobile devices."}),(0,s.jsxs)($.Z,{variant:"info",children:["If you're planning on using the ",u.vV," desktop tool to auto-fill your project, you don't need to download images here. The desktop tool will download your images for you."]})]}),(o||f==g&&f>0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en,{striped:!0,animated:!0,now:100*f/g,label:"".concat(f," / ").concat(g),variant:"success"}),(0,s.jsx)("br",{})]}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsx)(j.Z,{variant:"danger",onClick:y,children:"Terminate"})}),(0,s.jsx)("br",{})]}),(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsx)(j.Z,{variant:"primary",onClick:C,disabled:o||0==g,children:o?(0,s.jsx)(G.$,{size:1.5}):"Download Images"})})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:a,children:"Close"})})]})]})}var es=t(3518),el=t.n(es),er=t(5688);let ea=e=>(function(e,n,t,s,l){let r=function(e,n){let t={front:{},back:{}};for(let[s,l]of e.entries())for(let e of[u.i6,u.eJ]){let r=l[e];if(null!=r){let l=r.selectedImage;null!=l&&l!==n&&(null==t[e][l]?t[e][l]=new Set([s]):t[e][l].add(s))}}return t}(e,t),a=document.implementation.createDocument("","",null),i=a.createElement("order"),c=a.createElement("details"),o=a.createElement("quantity");o.appendChild(a.createTextNode(s.toString())),c.appendChild(o);let d=a.createElement("bracket");d.appendChild(a.createTextNode((0,g.wk)(s).toString())),c.appendChild(d);let h=a.createElement("stock");h.appendChild(a.createTextNode(l.cardstock)),c.appendChild(h);let x=a.createElement("foil");for(let e of(x.appendChild(a.createTextNode(l.foil?"true":"false")),c.appendChild(x),i.append(c),[u.i6,u.eJ]))if(Object.keys(r[e]).length>0){let s=a.createElement("".concat(e,"s"));for(let[l,i]of Object.entries(r[e])){let r=function(e,n,t,s){let l=e[t];if(null==l)return null;let r=n.createElement("card"),a=n.createElement("id");a.appendChild(n.createTextNode(t)),r.appendChild(a);let i=n.createElement("slots");i.appendChild(n.createTextNode(Array.from(s).sort((e,n)=>e-n).toString())),r.appendChild(i);let c=n.createElement("name");c.appendChild(n.createTextNode("".concat(l.name,".").concat(l.extension))),r.append(c);let o=n.createElement("query");return o.appendChild(n.createTextNode(u.P$[l.card_type]+l.searchq)),r.append(o),r}(n,a,l,i),c=l===t&&e===u.eJ;null==r||c||s.appendChild(r)}s.children.length>0&&i.appendChild(s)}let m=a.createElement("cardback");null!=t&&m.appendChild(a.createTextNode(t)),i.appendChild(m),a.appendChild(i);let j=new XMLSerializer,f=j.serializeToString(a);return el()(f,{collapseContent:!0})})((0,P.wH)(e),e.cardDocuments.cardDocuments,e.project.cardback,(0,P.zO)(e),(0,er.GG)(e));function ei(){let e=(0,_.oR)(),n=(0,h.CG)(P.aG),t=()=>{let n=ea(e.getState());(0,U.saveAs)(new Blob([n],{type:"text/xml;charset=utf-8"}),"cards.xml")};return(0,s.jsxs)(R.Z.Item,{disabled:n,onClick:t,"data-testid":"export-xml-button",children:[(0,s.jsx)(w.V9,{bootstrapIconName:"file-code"})," XML"]})}function ec(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(R.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(R.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,s.jsx)(w.V9,{bootstrapIconName:"cloud-arrow-down"})," Download"]})}),(0,s.jsxs)(R.Z.Menu,{children:[(0,s.jsx)(W,{}),(0,s.jsx)(ei,{}),(0,s.jsx)(et,{})]})]})})}var eo=t(7346);function ed(){let e=(0,h.CG)(er.GG),n=(0,h.TL)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{lg:8,md:12,sm:12,xs:12,children:(0,s.jsx)(eo.Z.Group,{children:(0,s.jsx)(eo.Z.Select,{value:e.cardstock,style:{height:u.B4+"px"},onChange:e=>n((0,er.HU)(e.target.value)),children:u.Nu.map(e=>(0,s.jsx)("option",{children:e},e))})})}),(0,s.jsx)(c.Z,{lg:4,md:12,sm:12,xs:12,children:(0,s.jsx)(C.ZP,{onClick:()=>n((0,er.uR)()),on:"Foil",onClassName:"flex-centre",off:"Non-Foil",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:e.foil,disabled:!u.lq[e.cardstock]})})]})}var eu=t(7125),eh=t(5147),ex=t(3205),em=t(2512);function ej(){let e=(0,a.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return ej=function(){return e},e}let eg=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",ef=d.ZP.div.withConfig({componentId:"sc-e091a590-0"})(ej(),e=>eg(e));function ep(e){let{mimeTypes:n,fileUploadCallback:t,label:l}=e,r=(0,h.TL)(),a=(0,i.useCallback)(()=>r((0,Y.sT)(["dropzone-onabort",{name:"File upload error",message:"File reading was stopped."}])),[]),c=(0,i.useCallback)(()=>r((0,Y.sT)(["dropzone-onerror",{name:"File upload error",message:"An error occurred while reading the file."}])),[]),o=(0,i.useCallback)(e=>{e.forEach(e=>{let n=new FileReader;n.onabort=a,n.onerror=c,n.onload=()=>{t(n.result)},n.readAsText(e)})},[t,a,c]),{getRootProps:d,getInputProps:u,isFocused:x,isDragAccept:m,isDragReject:j}=(0,em.uI)({onDrop:o,accept:n,maxFiles:1});return(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)(ef,{...d({isFocused:x,isDragAccept:m,isDragReject:j}),"aria-label":null!=l?l:"dropzone",children:[(0,s.jsx)("input",{...u()}),"Drag and drop a file here, or click to select a file."]})})}var eb=t(5749);function ey(){let e=(0,a.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return ey=function(){return e},e}function eC(){let e=(0,a.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return eC=function(){return e},e}function ev(){let e=(0,a.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return ev=function(){return e},e}let eZ=(0,d.ZP)(eh.Z).withConfig({componentId:"sc-ce3b3b29-0"})(ey()),ek=d.ZP.th.withConfig({componentId:"sc-ce3b3b29-1"})(eC()),ew=d.ZP.td.withConfig({componentId:"sc-ce3b3b29-2"})(ev()),eN={quantity:"Quantity",frontQuery:"Front",frontSelectedImage:"Front ID",backQuery:"Back",backSelectedImage:"Back ID"};function eI(e){let{children:n}=e;return(0,s.jsx)(w.y6,{children:(0,s.jsxs)(eZ,{bordered:!0,children:[(0,s.jsx)("thead",{children:Object.values(eN).map(e=>(0,s.jsx)(ek,{children:e},e))}),(0,s.jsx)("tbody",{children:n})]})})}function eS(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI,{children:[,,,].fill((0,s.jsx)("tr",{children:[,,,,,].fill((0,s.jsx)(ew,{}))}))}),"Where the columns follow these rules:",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:eN.quantity}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:eN.frontQuery}),": Search query for card front."," ",(0,s.jsx)("b",{children:"Cannot be blank."})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:eN.frontSelectedImage}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:eN.backQuery}),": Search query for card back. Can be blank."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:eN.backSelectedImage}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function eT(){return(0,s.jsxs)(eI,{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"2"})}),(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"island"})}),(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"1HsvTYs1..."})}),(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"forest"})}),(0,s.jsx)(ew,{})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"3"})}),(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"t:goblin"})}),(0,s.jsx)(ew,{}),(0,s.jsx)(ew,{}),(0,s.jsx)(ew,{children:(0,s.jsx)("code",{children:"1JtXL6Ca..."})})]})]})}function eF(){let e=(0,h.TL)(),n=(0,ex.l)(),[t,l]=(0,i.useState)(!1),r=()=>l(!1),a=()=>l(!0),c=(0,h.CG)(eb.WP),o=(0,h.CG)(P.zO),d=t=>{var s;if("string"!=typeof t){e((0,Y.sT)(["invalid-csv-contents",{name:"Invalid CSV file",message:"The contents of the uploaded file did not match the expected text format."}]));return}let l=(0,eu.Q)(t,{header:Object.fromEntries(Object.entries(eN).map(e=>{let[n,t]=e;return[t,n]}))}),a=e=>{var n,t,s,l,r;let a="".concat(null!==(n=e.quantity)&&void 0!==n?n:""," ").concat(null!==(t=e.frontQuery)&&void 0!==t?t:"");return(null!==(s=e.frontSelectedImage)&&void 0!==s?s:"").length>0&&(a+="".concat(u.A0).concat(e.frontSelectedImage)),(null!==(l=e.backQuery)&&void 0!==l?l:"").length>0&&(a+=" ".concat(u.M0," ").concat(e.backQuery),(null!==(r=e.backSelectedImage)&&void 0!==r?r:"").length>0&&(a+="".concat(u.A0).concat(e.backSelectedImage))),a},i=(0,Q.l_)(l.map(a),null!==(s=n.data)&&void 0!==s?s:{},c);e((0,P.r7)({members:(0,Q.wt)(i,o)})),r()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.Z.Item,{onClick:a,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"file-earmark-spreadsheet"})," CSV"]}),(0,s.jsxs)(m.Z,{show:t,onHide:r,"data-testid":"import-csv",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — CSV"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,s.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,s.jsx)(eS,{}),"For example:",(0,s.jsx)(eT,{}),(0,s.jsx)("hr",{}),(0,s.jsx)(ep,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:d,label:"import-csv"})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:r,children:"Close"})})]})]})}var eP=t(5607);function eL(){let e=(0,ex.cf)(),n=(0,ex.l)(),t=(0,h.CG)(eb.WP),l=(0,h.TL)(),[r,a]=(0,i.useState)(!1),c=()=>a(!1),o=()=>a(!0),[d,x]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),b=(0,h.CG)(P.zO),y=e=>{let n=[];for(let t of[u.Zb,u.WU,u.dt])null!=e[t]&&n.push(e[t].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(u.P$[t]).concat((0,Q.GL)(e.name))).join("\n"));return n.join("\n\n")};(0,i.useEffect)(()=>{void 0!=e.data&&p(y(e.data))},[e.data]);let C=()=>{var e;let s=(0,Q.ts)(d,null!==(e=n.data)&&void 0!==e?e:{},t);l((0,P.r7)({members:(0,Q.wt)(s,b)})),c()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.Z.Item,{onClick:o,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"card-text"})," Text"]}),(0,s.jsxs)(m.Z,{show:r,onHide:c,onExited:()=>x(""),"data-testid":"import-text",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — Text"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,s.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,s.jsx)(eP.Z,{children:(0,s.jsxs)(eP.Z.Item,{eventKey:"0",children:[(0,s.jsx)(eP.Z.Header,{children:"Syntax Guide"}),(0,s.jsx)(eP.Z.Body,{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["There are three types of images in ",u.vV," —"," ",u.Zb.toLowerCase(),"s, ",u.dt.toLowerCase(),"s, and"," ",u.WU.toLowerCase(),"s. If you search for a card, the search results ",(0,s.jsx)("b",{children:"won't contain cardbacks or tokens"}),"."]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:[(0,g.LF)(u.Zb),"s"]})," are searched for by default."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[u.WU.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:u.P$[u.WU]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[u.P$[u.WU],"your"," ",u.WU.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["Search for ",(0,s.jsxs)("b",{children:[u.dt.toLowerCase(),"s"]})," by putting"," ",(0,s.jsx)("code",{children:u.P$[u.dt]})," at the start of the query — for example,"," ",(0,s.jsxs)("code",{children:[u.P$[u.dt],"your"," ",u.dt.toLowerCase()," name"]}),"."]}),(0,s.jsxs)("li",{children:["You may optionally specify the image ID to select by typing your search query, ",(0,s.jsx)("code",{children:u.A0}),", then the image ID — for example,"," ",(0,s.jsxs)("code",{children:["your ",u.Zb.toLowerCase()," name",u.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]}),"."]}),(0,s.jsxs)("li",{children:["You may specify queries for both the front and the back by separating them with ",(0,s.jsx)("code",{children:u.M0})," — for example,"," ",(0,s.jsxs)("code",{children:["4x goblin ",u.M0," ",u.P$[u.WU],"elf"]}),"."]}),(0,s.jsx)("li",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back card for you."})]})})]})}),(0,s.jsx)("br",{}),(0,s.jsx)(eo.Z.Group,{className:"mb-3",children:(0,s.jsx)(eo.Z.Control,{as:"textarea",rows:12,placeholder:f,required:!0,onChange:e=>x(e.target.value),value:d,"aria-label":"import-text"})})]}),(0,s.jsxs)(m.Z.Footer,{children:[(0,s.jsx)(j.Z,{variant:"secondary",onClick:c,children:"Close"}),(0,s.jsx)(j.Z,{variant:"primary",onClick:C,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}function eB(){var e;let n=(0,ex.l)(),t=(0,ex.QA)(),l=(0,x.Sb)(),r=(0,h.CG)(eb.WP),a=(0,h.CG)(P.zO),c=(0,h.TL)(),[o,d]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1),f=()=>d(!1),p=()=>d(!0),[b,y]=(0,i.useState)(""),[C,v]=ex.hi.endpoints.queryImportSite.useLazyQuery(),Z=(0,i.useCallback)(async e=>{e.preventDefault();let t=b.trim();if(t.length>0){g(!0);try{var s,l;let e=await C(b),t=(0,Q.ts)(null!==(s=e.data)&&void 0!==s?s:"",null!==(l=n.data)&&void 0!==l?l:{},r);c((0,P.r7)({members:(0,Q.wt)(t,a)})),f()}catch(e){c((0,Y.sT)(["url-import-error",{name:"URL Import Error",message:"An unexpected error occurred while processing your decklist: ".concat(e.message)}]))}finally{g(!1)}}},[c,b,n.data,a,C,r]);return t.isFetching||0===(null!==(e=t.data)&&void 0!==e?e:[]).length?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.Z.Item,{onClick:p,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"link-45deg"})," URL"]}),(0,s.jsxs)(m.Z,{show:u||o,onHide:f,onExited:()=>y(""),children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — URL"})}),(0,s.jsxs)(m.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into ",l,":",(0,s.jsx)("br",{}),null!=t.data?(0,s.jsx)("ul",{children:t.data.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(G.$,{}),(0,s.jsx)("br",{})]}),(0,s.jsx)(eo.Z,{id:"importURLForm",onSubmit:Z,children:(0,s.jsx)(eo.Z.Group,{className:"mb-3",children:(0,s.jsx)(eo.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>y(e.target.value.trim()),value:b,disabled:u||null==t.data,"aria-label":"import-url"})})})]}),(0,s.jsxs)(m.Z.Footer,{children:[(0,s.jsx)(j.Z,{variant:"secondary",onClick:f,children:"Close"}),(0,s.jsx)(j.Z,{type:"submit",form:"importURLForm",variant:"primary",disabled:u||t.isFetching,style:{width:"4.75em"},children:u?(0,s.jsx)(G.$,{size:1.5}):"Submit"})]})]})]})}function eE(){let e=(0,h.TL)(),[n,t]=(0,i.useState)(!1),l=()=>t(!1),r=()=>t(!0),a=(0,h.CG)(P.sZ),c=(0,h.CG)(P.zO),[o,d]=(0,i.useState)(!1),[x,g]=(0,i.useState)(!1),f=n=>{var t,s,r,i,d,h,m;if("string"!=typeof n){alert("invalid CSV file uploaded");return}let j=new DOMParser,g=j.parseFromString(n,"application/xml"),f=g.getElementsByTagName("order")[0],p=f.getElementsByTagName("details")[0],b=null===(t=p.getElementsByTagName("stock")[0])||void 0===t?void 0:t.textContent,y=(null===(s=p.getElementsByTagName("foil")[0])||void 0===s?void 0:s.textContent)==="true",C=f.getElementsByTagName("fronts")[0],v=f.getElementsByTagName("backs")[0],Z=C.getElementsByTagName("card"),k=null!=v?v.getElementsByTagName("card"):void 0,w=null!==(i=null===(r=f.getElementsByTagName("cardback")[0])||void 0===r?void 0:r.textContent)&&void 0!==i?i:a,N=0,I=Array.from({length:u.Wn-c},()=>({front:null,back:null}));if(null!=k)for(let e of k){let n=null===(d=e.getElementsByTagName("slots")[0])||void 0===d?void 0:d.textContent;if(null==n)continue;let t=(0,Q.XV)(null!==(h=e.getElementsByTagName("query")[0].textContent)&&void 0!==h?h:"");n.split(",").map(e=>parseInt(e)).forEach(n=>{var s;I[n].back={query:t,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},N=Math.max(N,n)})}for(let e of Z){let n=e.getElementsByTagName("slots")[0].textContent;if(null==n)continue;let t=(0,Q.XV)(null!==(m=e.getElementsByTagName("query")[0].textContent)&&void 0!==m?m:"");n.split(",").map(e=>parseInt(e)).forEach(n=>{var s;I[n].front={query:t,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==I[n].back&&(I[n].back={query:{query:null,card_type:u.dt},selectedImage:w,selected:!1}),N=Math.max(N,n)})}e((0,P.r7)({members:I.slice(0,N+1)})),o&&null!=w&&e((0,P.mp)({selectedImage:w})),x&&null!=b&&u.Nu.includes(b)&&null!=y&&(e((0,er.HU)(b)),e((0,er.Mc)(y))),l()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.Z.Item,{onClick:r,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"file-code"})," XML"]}),(0,s.jsxs)(m.Z,{show:n,onHide:l,"data-testid":"import-xml",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Add Cards — XML"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,s.jsxs)("p",{children:["The ",u.vV," website can generate an XML file representing your project, and the ",u.vV," desktop tool which auto-fills your order into"," ",(0,s.jsx)("a",{href:u.vs,target:"_blank",children:u.Fo})," ","expects a file in this format."]}),(0,s.jsx)(C.ZP,{onClick:()=>d(!o),on:"Use XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:o}),(0,s.jsx)("div",{className:"pt-3",children:(0,s.jsx)(C.ZP,{onClick:()=>g(!x),on:"Use XML Finish Settings",onClassName:"flex-centre",off:"Retain Selected Finish Settings",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:x})}),(0,s.jsx)("hr",{}),(0,s.jsx)(ep,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:f,label:"import-xml"})]}),(0,s.jsx)(m.Z.Footer,{children:(0,s.jsx)(j.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})}function eG(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(R.Z,{children:[(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(R.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,s.jsx)(w.V9,{bootstrapIconName:"plus-circle"})," Add Cards"]})}),(0,s.jsxs)(R.Z.Menu,{children:[(0,s.jsx)(eL,{}),(0,s.jsx)(eE,{}),(0,s.jsx)(eF,{}),(0,s.jsx)(eB,{})]})]})})}var ez=t(2238);function eO(e){var n;let{slots:t}=e,l=(0,h.TL)(),[r,a]=(0,i.useState)(!1),c=()=>a(!0),o=()=>a(!1),d=e=>{l((0,P.ND)({selectedImage:e,slots:t})),o()},u=(0,h.CG)(e=>(0,P.CH)(e,t)),x=null!==(n=(0,h.CG)(e=>e.cardbacks.cardbacks))&&void 0!==n?n:[],m=(0,h.CG)(e=>(0,L.ci)(e,u,t[0][0],x));return(0,s.jsxs)(s.Fragment,{children:[null!=m&&m.length>1&&(0,s.jsxs)(R.Z.Item,{className:"text-decoration-none",onClick:c,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"image"})," Change Version"]}),null!=m&&(0,s.jsx)(T,{testId:"bulk-grid-selector",imageIdentifiers:m,show:r,handleClose:o,onClick:d})]})}function eD(e){let{slots:n}=e,t=(0,h.TL)(),l=()=>{t((0,F.PP)([n,"changeQuery"]))};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(R.Z.Item,{className:"text-decoration-none",onClick:l,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"arrow-repeat"})," Change Query"]})})}function eq(e){let{slots:n}=e,t=(0,h.TL)(),l=()=>t((0,P.g5)({slots:n}));return(0,s.jsxs)(R.Z.Item,{onClick:l,className:"text-decoration-none",children:[(0,s.jsx)(w.V9,{bootstrapIconName:"slash-circle"})," Clear Query"]})}function eA(e){let{slots:n}=e,t=(0,h.TL)(),l=n.map(e=>{let[n,t]=e;return t}),r=()=>t((0,P.uA)({slots:l}));return(0,s.jsxs)(R.Z.Item,{onClick:r,className:"text-decoration-none",children:[(0,s.jsx)(w.V9,{bootstrapIconName:"x-circle"})," Delete Slots"]})}function eM(){let e=(0,h.CG)(P.NV),n=(0,h.TL)(),t=()=>n((0,P.fP)({selectedStatus:!1,slots:e}));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)($.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,s.jsxs)(y.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,s.jsx)(j.Z,{onClick:t,className:"ms-auto","data-testid":"clear-selection",children:(0,s.jsx)("i",{className:"bi bi-x-lg"})}),e.length>0&&(0,s.jsxs)(R.Z,{children:[(0,s.jsx)(R.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,s.jsxs)(R.Z.Menu,{children:[(0,s.jsx)(eO,{slots:e}),(0,s.jsx)(eD,{slots:e}),(0,s.jsx)(R.Z.Divider,{}),(0,s.jsx)(eq,{slots:e}),(0,s.jsx)(eA,{slots:e})]})]})]})})})}function eV(){let e=(0,h.CG)(N.ZR),n=(0,h.TL)();return(0,s.jsx)(C.ZP,{onClick:()=>n((0,N.$3)()),on:"Show Fronts",onClassName:"flex-centre",off:"Show Backs",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:e})}function eH(){let e=(0,a.Z)(["\n  font-size: 1.25rem;\n"]);return eH=function(){return e},e}function eR(){let e=(0,ez.UAParser)();return"mobile"===e.device.type?(0,s.jsxs)($.Z,{variant:"primary",children:["It seems like you're on a mobile device! The ",u.vV," executable that fills your order into MPC requires a desktop computer."]}):(0,s.jsx)(s.Fragment,{})}function eU(){let e=(0,h.CG)(P.zO),n=(0,h.CG)(P.p4);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Edit MPC Project"}),(0,s.jsx)(eR,{}),(0,s.jsx)(eM,{}),e>0&&(0,s.jsxs)($.Z,{variant:"secondary",children:["Your project contains ",(0,s.jsx)("b",{children:e})," card",1!==e&&"s",", belongs in the MPC bracket of up to"," ",(0,s.jsx)("b",{children:(0,g.wk)(e)})," cards, and is"," ",(0,s.jsx)("b",{children:(0,g.K)(n,0)})," in total.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),e>=u.Wn&&(0,s.jsx)($.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,s.jsx)(eV,{})]})]})}d.ZP.i.withConfig({componentId:"sc-cc3ad37b-0"})(eH());var e_=t(7202),eQ=t(1038),eX=t.n(eQ);function eW(){let e=(0,a.Z)(['\n  .tag {\n    color: black;\n    background-color: #dddddd;\n  }\n  .tag-remove {\n    color: #666666;\n  }\n\n  .dropdown-trigger {\n    border-radius: 0.25rem;\n    background-color: white;\n  }\n  .dropdown-content {\n    border-radius: 0.25rem;\n  }\n\n  .search {\n    background-color: white;\n  }\n  .search::placeholder {\n    color: black;\n  }\n\n  .toggle {\n    font: normal normal normal 12px/1 bootstrap-icons;\n    top: 2px;\n    left: 2px;\n  }\n\n  .toggle.collapsed::after {\n    content: "";\n  }\n\n  .toggle.expanded::after {\n    content: "";\n  }\n\n  color: black;\n\n  .root {\n    padding: 0;\n    margin: 0;\n  }\n'],['\n  .tag {\n    color: black;\n    background-color: #dddddd;\n  }\n  .tag-remove {\n    color: #666666;\n  }\n\n  .dropdown-trigger {\n    border-radius: 0.25rem;\n    background-color: white;\n  }\n  .dropdown-content {\n    border-radius: 0.25rem;\n  }\n\n  .search {\n    background-color: white;\n  }\n  .search::placeholder {\n    color: black;\n  }\n\n  .toggle {\n    font: normal normal normal 12px/1 bootstrap-icons;\n    top: 2px;\n    left: 2px;\n  }\n\n  .toggle.collapsed::after {\n    content: "\\uF4FA";\n  }\n\n  .toggle.expanded::after {\n    content: "\\uF2E6";\n  }\n\n  color: black;\n\n  .root {\n    padding: 0;\n    margin: 0;\n  }\n']);return eW=function(){return e},e}t(1653);let e$=(0,d.ZP)(eX()).withConfig({componentId:"sc-ee94afc6-0"})(eW());function eJ(e){var n;let{filterSettings:t,setFilterSettings:l}=e,r=(0,ex.Yn)(),a=(0,ex.ZC)(),d=(null!==(n=r.data)&&void 0!==n?n:[]).map(e=>({label:e.name,value:e.code,checked:t.languages.includes(e.code)})),[h,x]=(0,i.useState)([]),m=e=>{e.expanded&&!h.includes(e.value)?x([...h,e.value]):!e.expanded&&h.includes(e.value)&&x(h.filter(n=>n!=e.value))},j=(0,i.useCallback)(e=>{var n;let t=n=>({label:n.name,value:n.name,checked:e.includes(n.name),expanded:h.includes(n.name),children:n.children.map(e=>t(e))});return(null!==(n=a.data)&&void 0!==n?n:[]).map(e=>t(e))},[a.data,h]),g=j(t.includesTags),f=j(t.excludesTags);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,s.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,s.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,s.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,s.jsx)("b",{children:"look the same"}),".",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsxs)(o.Z,{children:[(0,s.jsxs)(c.Z,{xs:6,children:[(0,s.jsxs)(eo.Z.Label,{children:["Minimum: ",(0,s.jsxs)("b",{children:[t.minimumDPI," DPI"]})]}),(0,s.jsx)(eo.Z.Range,{defaultValue:t.minimumDPI,min:u.sL,max:u.gx,step:u.Ox,onChange:e=>{l({...t,minimumDPI:parseInt(e.target.value)})}})]}),(0,s.jsxs)(c.Z,{xs:6,children:[(0,s.jsxs)(eo.Z.Label,{children:["Maximum: ",(0,s.jsxs)("b",{children:[t.maximumDPI," DPI"]})]}),(0,s.jsx)(eo.Z.Range,{defaultValue:t.maximumDPI,min:u.sL,max:u.gx,step:u.Ox,onChange:e=>{l({...t,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,s.jsxs)(eo.Z.Label,{children:["File size: Up to ",(0,s.jsxs)("b",{children:[t.maximumSize," MB"]})]}),(0,s.jsx)(eo.Z.Range,{defaultValue:t.maximumSize,min:0,max:u.bD,step:u.B9,onChange:e=>{l({...t,maximumSize:parseInt(e.target.value)})}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Configure the languages and tags to filter the search results on.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(eo.Z.Label,{htmlFor:"selectLanguage",children:"Select languages"}),(0,s.jsx)(e$,{data:d,onChange:(e,n)=>{l({...t,languages:n.map(e=>e.value)})}}),(0,s.jsxs)(eo.Z.Label,{htmlFor:"selectTags",children:["Select tags which cards must have ",(0,s.jsx)("b",{children:"at least one"})," of"]}),(0,s.jsx)(e$,{data:g,onChange:(e,n)=>{let s=n.map(e=>e.value);l({...t,includesTags:s,excludesTags:t.excludesTags.filter(e=>!s.includes(e))})},onNodeToggle:m}),(0,s.jsxs)(eo.Z.Label,{htmlFor:"selectTags",children:["Select tags which cards must ",(0,s.jsx)("b",{children:"not"})," have"]}),(0,s.jsx)(e$,{data:f,onChange:(e,n)=>{let s=n.map(e=>e.value);l({...t,excludesTags:s,includesTags:t.includesTags.filter(e=>!s.includes(e))})},onNodeToggle:m})]})}function eK(e){let{searchTypeSettings:n,setSearchTypeSettings:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(C.ZP,{onClick:()=>t({...n,fuzzySearch:!n.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:n.fuzzySearch}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(C.ZP,{onClick:()=>t({...n,filterCardbacks:!n.filterCardbacks}),on:"Filters Apply to Cardbacks",onClassName:"flex-centre",off:"Include All Cardbacks",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:u.B4+"px",active:n.filterCardbacks})]})}var eY=t(8627);function e0(){let e=(0,a.Z)(["\n  font-size: 1em;\n  cursor: pointer;\n"]);return e0=function(){return e},e}let e1=d.ZP.i.withConfig({componentId:"sc-14503e30-0"})(e0());function e2(e){var n,t,l;let{sourceSettings:r,setSourceSettings:a}=e,c=(0,h.CG)(k.TK),o=(null!==(n=r.sources)&&void 0!==n?n:[]).some(e=>e[1]),d=(0,i.useCallback)((e,n)=>{var t;let s=[...null!==(t=r.sources)&&void 0!==t?t:[]],[l]=s.splice(e,1);s.splice(n,0,l),a({sources:s})},[r.sources,a]),x=e=>{null!=e.destination&&d(e.source.index,e.destination.index)},m=(0,i.useCallback)(e=>{var n;let t=[...null!==(n=r.sources)&&void 0!==n?n:[]];t[e]=[t[e][0],!t[e][1]],a({sources:t})},[r.sources,a]),g=(0,i.useCallback)(()=>{if(null!=r.sources){let e=r.sources.map(e=>[e[0],!o]);a({sources:e})}},[r.sources,a]),f=(0,s.jsx)(G.$,{});if(null!=c){let e=(null!==(t=r.sources)&&void 0!==t?t:[]).map((e,n)=>(0,s.jsx)(eY._l,{draggableId:e[0].toString(),index:n,children:(t,a)=>(0,s.jsxs)("tr",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:[(0,s.jsx)("td",{style:{verticalAlign:"middle",width:"30%"},children:(0,s.jsx)(C.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:u.B4+"px",active:e[1],onClick:()=>m(n)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,s.jsx)("td",{style:{verticalAlign:"middle",width:"50%"},children:null!=c[e[0]].external_link?(0,s.jsx)("a",{href:null!==(l=c[e[0]].external_link)&&void 0!==l?l:void 0,target:"_blank",children:c[e[0]].name}):(0,s.jsx)("a",{children:c[e[0]].name})},"".concat(e[0],"-name-column")),(0,s.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,s.jsx)("div",{children:(0,s.jsx)(e1,{className:"bi bi-chevron-double-up",onClick:()=>{d(n,0)}},"".concat(e[0],"-up-button"))}),(0,s.jsx)("div",{children:(0,s.jsx)(e1,{className:"bi bi-chevron-double-down",onClick:()=>{var e;d(n,(null!==(e=r.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,s.jsx)("td",{style:{verticalAlign:"middle",width:"15%",textAlign:"center"},children:(0,s.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));f=(0,s.jsx)(eY.Z5,{onDragEnd:x,children:(0,s.jsx)(eY.bK,{droppableId:"source-order",children:(n,t)=>(0,s.jsx)("div",{style:{height:59*e.length+u.B4+"px"},children:(0,s.jsxs)(eh.Z,{ref:n.innerRef,style:{tableLayout:"auto"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{style:{height:u.B4+"px"},children:[(0,s.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,s.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,s.jsx)("th",{}),(0,s.jsx)("th",{})]})}),(0,s.jsxs)("tbody",{children:[e,n.placeholder]})]})})})})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,s.jsxs)("li",{children:["Use the ",(0,s.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]})]}),(0,s.jsx)("div",{className:"d-grid gap-0",children:(0,s.jsxs)(j.Z,{variant:"primary",onClick:g,children:[o?"Disable":"Enable"," all drives"]})}),(0,s.jsx)("br",{}),f]})}function e5(){let e=(0,h.TL)(),[n,t]=(0,i.useState)(!1),l=(0,h.CG)(eb.xN),[r,a]=(0,i.useState)(l.searchTypeSettings),[c,o]=(0,i.useState)(l.sourceSettings),[d,u]=(0,i.useState)(l.filterSettings),x=(0,h.CG)(k.TK);(0,i.useEffect)(()=>{if(null!=x){let n=(0,e_.cI)(x);e((0,eb.Fg)(n.searchTypeSettings)),e((0,eb.Ph)(n.sourceSettings)),e((0,eb._E)(n.filterSettings))}},[e,x]);let g=()=>t(!1),f=(0,i.useCallback)(()=>{a(l.searchTypeSettings),u(l.filterSettings),o(l.sourceSettings),t(!0)},[l]),p=()=>{(0,e_.Wm)({searchTypeSettings:r,sourceSettings:c,filterSettings:d}),e((0,eb.Fg)(r)),e((0,eb.Ph)(c)),e((0,eb._E)(d)),g()};return(0,s.jsxs)("div",{className:"d-grid gap-0",children:[(0,s.jsxs)(j.Z,{variant:"primary",onClick:f,children:[(0,s.jsx)(w.V9,{bootstrapIconName:"gear"}),"Search Settings"]}),(0,s.jsxs)(m.Z,{scrollable:!0,show:n,onHide:p,"data-testid":"search-settings",children:[(0,s.jsx)(m.Z.Header,{closeButton:!0,children:(0,s.jsx)(m.Z.Title,{children:"Search Settings"})}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsx)(eK,{searchTypeSettings:r,setSearchTypeSettings:a}),(0,s.jsx)("hr",{}),(0,s.jsx)(eJ,{filterSettings:d,setFilterSettings:u}),(0,s.jsx)("hr",{}),(0,s.jsx)(e2,{sourceSettings:c,setSourceSettings:o})]}),(0,s.jsxs)(m.Z.Footer,{children:[(0,s.jsx)(j.Z,{variant:"secondary",onClick:g,children:"Close Without Saving"}),(0,s.jsx)(j.Z,{variant:"primary",onClick:p,children:"Save Changes"})]})]})]})}var e6=t(5617);function e3(){let e=(0,a.Z)(["\n  position: relative;\n  height: calc(\n    100vh - ","px\n  ); // for compatibility with older browsers\n  height: calc(100dvh - ","px); // handles the ios address bar\n  overflow-y: scroll;\n  overscroll-behavior: none;\n  scrollbar-width: thin;\n"]);return e3=function(){return e},e}let e4=(0,d.ZP)(c.Z).withConfig({componentId:"sc-a5fd0540-0"})(e3(),u.tm,u.tm);var e9=function(){let e=(0,x.NM)(),n=(0,h.CG)(x.If),t=(0,h.TL)(),l=(0,h.CG)(P.sZ);return(0,i.useEffect)(()=>{e&&(0,k.kJ)(t)},[t,n]),(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)(o.Z,{className:"g-0",children:[(0,s.jsx)(e4,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",children:(0,s.jsx)(M,{})}),(0,s.jsxs)(e4,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",children:[(0,s.jsx)(eU,{}),(0,s.jsx)(o.Z,{className:"g-0 pb-3",children:(0,s.jsx)(ed,{})}),(0,s.jsx)(o.Z,{className:"g-0",children:(0,s.jsx)(e5,{})}),(0,s.jsxs)(o.Z,{className:"g-0 py-3",children:[(0,s.jsx)(c.Z,{lg:6,md:12,sm:12,xs:12,children:(0,s.jsx)(eG,{})}),(0,s.jsx)(c.Z,{lg:6,md:12,sm:12,xs:12,children:(0,s.jsx)(ec,{})})]}),(0,s.jsx)(c.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,s.jsx)(H,{selectedImage:l})})]})]}):(0,s.jsx)(e6.O,{})})},e8=t(9391);function e7(){let e=(0,x.NM)();return e?(0,s.jsx)(e9,{}):(0,s.jsx)(e6.O,{})}function ne(){return(0,s.jsxs)(e8.XR,{gutter:0,children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"Edit MPC Project"})," ",(0,s.jsx)("meta",{name:"description",content:"".concat(u.vV,"&apos;'s rich project editor.")})]}),(0,s.jsx)(e7,{})]})}t(1351)}},function(e){e.O(0,[62,73,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);