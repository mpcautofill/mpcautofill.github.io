(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(4817)}])},6666:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var s=n(2692),l=n(5893),r=n(9521);function i(){let e=(0,s.Z)(["\n  position: absolute;\n  top: 50vh;\n  left: 50vw;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]);return i=function(){return e},e}function a(){let e=(0,s.Z)(["\n  font-size: 1.25em;\n"]);return a=function(){return e},e}let c=r.ZP.div.withConfig({componentId:"sc-2f488237-0"})(i()),o=r.ZP.p.withConfig({componentId:"sc-2f488237-1"})(a());function d(e){let{title:t,text:n}=e;return(0,l.jsxs)(c,{children:[(0,l.jsx)("h1",{children:t}),n.map((e,t)=>(0,l.jsx)(o,{children:e},t.toString()))]})}},5617:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var s=n(5893),l=n(1677),r=n(6666);function i(){return(0,s.jsx)(r.J,{title:"No Server Configured",text:["You haven't configured a server for ".concat(l.vV," to communicate with just yet"),"Click the Configure Server button in the top-right to get started!"]})}},4817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e2}});var s,l,r=n(5893),i=n(9008),a=n.n(i),c=n(2692),o=n(7294),d=n(1555),h=n(4051),u=n(9521),x=n(1677),m=n(1546),j=n(8737),g=n(6212),f=n(7104),p=n(8208),b=n(9159),y=n(3152),C=n(6518),v=n(478),Z=n(3389),k=n(7088),w=n(5582),N=n(5384);function S(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,sourceNamesByKey:s}=e;return(0,r.jsx)(h.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(t).map((e,t)=>{let[s,l]=e;return(0,r.jsx)(r.Fragment,{children:l.flatMap(e=>{let[t,s]=e;return(0,r.jsx)(b.LL,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(s+1),cardOnClick:()=>n(t),noResultsFound:!1},"gridSelector-".concat(t))})})})})}function I(e){var t,n;let{cardIdentifiersAndOptionNumbersBySource:s,selectImage:l,sourceNamesByKey:i}=e,a=(0,m.TL)(),c=(0,m.CG)(N.Hm);return(0,r.jsx)(r.Fragment,{children:Object.entries(s).map((e,s)=>{let[o,d]=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"sticky-top",onClick:()=>a((0,N.O6)(o)),style:{backgroundColor:"#4E5D6B",zIndex:s+100},children:[(0,r.jsx)("hr",{},"".concat(o,"-top-hr")),(0,r.jsxs)(v.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,r.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:i[o]},"".concat(o,"-header-title")),(0,r.jsxs)("h6",{className:"text-primary prevent-select",children:[d.length," version",1!=d.length&&"s"]}),(0,r.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(t=c[o])||void 0===t||t?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(o,"-collapse-header")},"".concat(o,"-arrow"))]},"".concat(o,"-header-inner"))]},"".concat(o,"-header")),(0,r.jsx)(C.Z,{in:null===(n=c[o])||void 0===n||n,"data-testid":"".concat(o,"-collapse"),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{},"".concat(o,"-bottom-hr")),(0,r.jsx)(h.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:d.map(e=>{let[t,n]=e;return(0,r.jsx)(b.LL,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:()=>l(t),noResultsFound:!1},"gridSelector-".concat(t))})},"".concat(o,"-row"))]})})]})})})}function T(e){let{testId:t,imageIdentifiers:n,show:s,handleClose:l,onClick:i}=e,a=(0,m.TL)(),c=(0,m.CG)(e=>(0,k.ek)(e,n)),u=(0,m.CG)(N.Mj),j=(0,o.useCallback)(e=>{i(e),l()},[i,l]),p=(0,m.CG)(w.sn),b=Object.keys(p),y=(0,m.CG)(N.Ne),C=(0,o.useMemo)(()=>n.reduce((e,t,n)=>{let s=c[t];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([t,n])),e},{}),[c,n]);return(0,r.jsxs)(g.Z,{show:s,onHide:l,size:"lg","data-testid":t,children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Select Version"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(d.Z,{md:8,sm:6,children:(0,r.jsx)(Z.ZP,{onClick:()=>a((0,N.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:u})}),u&&(0,r.jsx)(d.Z,{md:4,sm:6,children:(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(f.Z,{onClick:()=>a(y?(0,N.X8)():(0,N.tC)(b)),children:[(0,r.jsx)("i",{className:"bi bi-arrows-".concat(y?"expand":"collapse"),style:{paddingRight:"0.5em"}})," ",y?"Expand":"Collapse"," All"]})})})]}),(0,r.jsx)("br",{}),u?(0,r.jsx)(I,{cardIdentifiersAndOptionNumbersBySource:C,selectImage:j,sourceNamesByKey:p}):(0,r.jsx)(S,{cardIdentifiersAndOptionNumbersBySource:C,selectImage:j,sourceNamesByKey:p})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:l,children:"Close"})})]})}var F=n(1230),P=n(5713);let B=(0,o.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:s,show:l,handleClose:i}=e,a=(0,m.TL)();return(0,r.jsx)(T,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:s,show:l,handleClose:i,onClick:function(e){a((0,F.qP)({face:t,slot:n,selectedImage:e}))}})}),L=(0,o.memo)(function(e){var t;let{searchQuery:n,face:s,slot:l}=e,[i,a]=(0,o.useState)(!1),c=()=>a(!1),d=()=>a(!0),h=(0,m.TL)(),u=(0,m.CG)(y.yU),j=(0,m.CG)(F.sZ),g=(0,m.CG)(e=>(0,P.ci)(e,n,s,u)),C=(0,m.CG)(e=>(0,F.AN)(e,l,s)),v=null==C?void 0:C.selectedImage;(0,o.useEffect)(()=>{if(null!=g){let e=v;null==e||g.includes(e)||(e=void 0),g.length>0&&null==e&&((null==n?void 0:n.query)!=null?e=g[0]:s===x.eJ&&null!=j&&(e=j)),h((0,F.qP)({face:s,slot:l,selectedImage:e}))}},[h,g,j,v]);let Z=null!=g?g:[],k=null!=v?Z.indexOf(v):void 0,w=null!=k?Z[(0,p.N0)(k+1,Z.length)]:void 0,N=null!=k?Z[(0,p.N0)(k-1,Z.length)]:void 0,S=()=>{h((0,F.NO)({slot:l}))},I=e=>{2==e.detail?h((0,F.HS)({slot:l,face:s})):h((0,F.O$)({slot:l,face:s}))};function T(e){null!=k&&h((0,F.qP)({face:s,slot:l,selectedImage:Z[(0,p.N0)(k+e,Z.length)]}))}let L=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"card-select",onClick:I,"aria-label":"select-".concat(s).concat(l),children:(0,r.jsx)("i",{className:"bi bi".concat(null!==(t=null==C?void 0:C.selected)&&void 0!==t&&t?"-check":"","-square")})}),(0,r.jsx)("button",{className:"remove",children:(0,r.jsx)("i",{className:"bi bi-x-circle",onClick:S,"aria-label":"remove-".concat(s).concat(l)})})]}),E=(0,r.jsxs)(r.Fragment,{children:[1===Z.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",Z.length]}),Z.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:d,children:[(null!=k?k:0)+1," / ",Z.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{variant:"outline-primary",className:"prev",onClick:()=>T(-1),children:"❮"}),(0,r.jsx)(f.Z,{variant:"outline-primary",className:"next",onClick:()=>T(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{style:{contentVisibility:"auto"},"data-testid":"".concat(s,"-slot").concat(l),children:[(0,r.jsx)(b.LL,{imageIdentifier:v,previousImageIdentifier:w,nextImageIdentifier:N,cardHeaderTitle:"Slot ".concat(l+1),cardFooter:E,cardHeaderButtons:L,searchQuery:n,noResultsFound:null!=g&&0===g.length}),Z.length>1&&i&&(0,r.jsx)(B,{face:s,slot:l,searchResultsForQuery:Z,show:i,handleClose:c})]})});var E=n(5305);function G(){let e=(0,c.Z)(["\n  position: absolute;\n  border: 1px darkgray solid;\n  border-radius: 10px;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 50px 0 black inset;\n"]);return G=function(){return e},e}function z(){let e=(0,c.Z)(["\n  position: relative;\n  font-size: 1.25em;\n  text-align: center;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 4px 15px #000000;\n  max-width: 90%;\n"]);return z=function(){return e},e}let D=u.ZP.div.withConfig({componentId:"sc-2fc9071a-0"})(G()),q=u.ZP.div.withConfig({componentId:"sc-2fc9071a-1"})(z());function O(){return(0,r.jsx)(D,{children:(0,r.jsxs)(q,{children:[(0,r.jsx)("p",{children:"Your project is empty at the moment."}),(0,r.jsxs)("p",{children:["Use the ",(0,r.jsx)("b",{children:"Add Cards"})," menu on the right to get started!"]})]})})}function R(){let e=(0,m.CG)(e=>"loading"==e.cardDocuments.status||"loading"===e.searchResults.status),t=(0,m.CG)(F.aG),n=(0,m.CG)(N.ZR),s=(0,m.CG)(F.wH),l=[],i=[];for(let[e,t]of s.entries()){var a,c;l.push((0,r.jsx)(L,{searchQuery:null===(a=t.front)||void 0===a?void 0:a.query,face:x.i6,slot:e},"".concat(x.i6,"-slot").concat(e))),i.push((0,r.jsx)(L,{searchQuery:null===(c=t.back)||void 0===c?void 0:c.query,face:x.eJ,slot:e},"".concat(x.eJ,"-slot").concat(e)))}return(0,r.jsxs)(r.Fragment,{children:[0==s.length&&(0,r.jsx)(O,{}),(0,r.jsx)(h.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"":"none"},children:l}),(0,r.jsx)(h.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:n?"none":""},children:i}),(0,r.jsxs)(g.Z,{show:e&&!t,centered:!0,children:[(0,r.jsx)(g.Z.Header,{children:(0,r.jsx)(g.Z.Title,{style:{textAlign:"center",userSelect:"none"},className:"w-100",children:"Loading your cards..."})}),(0,r.jsx)(g.Z.Body,{children:(0,r.jsx)(E.$,{})})]})]})}let M=(0,o.memo)(function(e){let{searchResults:t,show:n,handleClose:s}=e,l=(0,m.CG)(F.sZ),i=(0,m.TL)();return(0,r.jsx)(T,{testId:"cardback-grid-selector",imageIdentifiers:t,show:n,handleClose:s,onClick:function(e){null!=l&&(i((0,F.Tx)({currentImage:l,selectedImage:e,face:x.eJ})),i((0,F.mp)({selectedImage:e})))}})});function A(e){let{selectedImage:t}=e,n=(0,m.TL)(),[s,l]=(0,o.useState)(!1),i=()=>l(!1),a=()=>l(!0),c=(0,m.CG)(y.yU);(0,o.useEffect)(()=>{let e=t;null==e||c.includes(e)||(e=void 0),c.length>0&&null==e&&(e=c[0]),n((0,F.mp)({selectedImage:null!=e?e:null}))},[n,t,c]);let d=null!=t?c.indexOf(t):void 0,h=null!=d?c[(0,p.N0)(d+1,c.length)]:void 0,u=null!=d?c[(0,p.N0)(d-1,c.length)]:void 0;function j(e){if(null!=t&&null!=d){let s=c[(0,p.N0)(d+e,c.length)];n((0,F.Tx)({currentImage:t,selectedImage:s,face:x.eJ})),n((0,F.mp)({selectedImage:s}))}}let g=(0,r.jsxs)(r.Fragment,{children:[1===c.length&&(0,r.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",c.length]}),c.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:a,children:[(null!=d?d:0)+1," / ",c.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{variant:"outline-primary",className:"prev",onClick:()=>j(-1),children:"❮"}),(0,r.jsx)(f.Z,{variant:"outline-primary",className:"next",onClick:()=>j(1),children:"❯"})]})]})]});return(0,r.jsxs)("div",{"data-testid":"common-cardback",children:[(0,r.jsx)(b.LL,{imageIdentifier:t,previousImageIdentifier:h,nextImageIdentifier:u,cardHeaderTitle:"Cardback",cardFooter:g,noResultsFound:0===c.length}),s&&(0,r.jsx)(M,{searchResults:c,show:s,handleClose:i})]})}var H=n(8986),U=n(8102),_=n(2664),Q=n(611);let V=e=>(function(e,t){let n=function(e,t){function n(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(t,e.selectedImage)&&t[e.selectedImage].card_type===x.Zb?(0,Q.GL)(t[e.selectedImage].name):null}return e.map(e=>[n(e[x.i6]),n(e[x.eJ])])}(e,t),s=n.map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]," ").concat(x.M0," ").concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0);return(function(e){let t=e.reduce((e,t)=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=0),e[t]++,e),{});return Object.keys(t).sort().map(e=>"".concat(t[e],"x ").concat(e))})(s).join("\n")})((0,F.wH)(e),e.cardDocuments.cardDocuments);function X(){let e=(0,_.oR)(),t=(0,m.CG)(F.aG),n=()=>{let t=V(e.getState());(0,U.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"decklist.txt")};return(0,r.jsxs)(H.Z.Item,{disabled:t,onClick:n,"data-testid":"export-decklist-button",children:[(0,r.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Decklist"]})}var $=n(8375),J=n(1479),W=n(7932);function K(){let e=(0,c.Z)(["\n  --bs-progress-bg: #424e5c;\n"]);return K=function(){return e},e}let Y=(0,u.ZP)(J.Z).withConfig({componentId:"sc-fcdf4cef-0"})(K());function ee(){let e=(0,m.CG)(F.aG),[t,s]=(0,o.useState)(!1),l=()=>s(!1),i=()=>s(!0),[a,c]=(0,o.useState)(!1),d=(0,k.zK)(),h=Object.keys(d).length,[u,j]=(0,o.useState)(0),p=(0,o.useRef)(null),b=async()=>{null!=p.current&&(await p.current.terminate(!0),c(!1))},y=async()=>{if(c(!0),j(0),p.current=(0,W.Kg)(()=>(0,W.Cs)(new W.Cc(n.tu(new URL(n.p+n.u(667),n.b)))),5),null!=p.current){let e=0;Object.keys(d).map(t=>{null!=p.current&&p.current.queue(async n=>{let s=d[t];if(null!=s){let e=await n(t);(0,U.saveAs)((0,Q.jg)(e),"".concat(s.name," (").concat(s.identifier,").").concat(s.extension))}j(++e)})}),await p.current.settled(),await p.current.terminate(),c(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{disabled:e,onClick:i,children:[(0,r.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," Card Images"]}),(0,r.jsxs)(g.Z,{show:t,onHide:l,"data-testid":"export-images",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Download — Card Images"})}),(0,r.jsxs)(g.Z.Body,{children:[a&&(0,r.jsx)("p",{children:"Your images should be downloading now. This might take a while! Please don't close the page until the process is complete."}),!a&&0==h&&(0,r.jsx)("p",{children:"You'll be able to download the card images in your project here once you've added some cards."}),!a&&h>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["Click the button below to begin. This will download the"," ",(0,r.jsx)("b",{children:h})," unique image",1!=h&&"s"," in your project."]}),(0,r.jsx)("p",{children:"This feature may not work as expected on mobile devices."}),(0,r.jsxs)($.Z,{variant:"info",children:["If you're planning on using the ",x.vV," desktop tool to auto-fill your project, you don't need to download images here. The desktop tool will download your images for you."]})]}),(a||u==h&&u>0)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{striped:!0,animated:!0,now:100*u/h,label:"".concat(u," / ").concat(h),variant:"success"}),(0,r.jsx)("br",{})]}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(f.Z,{variant:"danger",onClick:b,children:"Terminate"})}),(0,r.jsx)("br",{})]}),(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsx)(f.Z,{variant:"primary",onClick:y,disabled:a||0==h,children:a?(0,r.jsx)(E.$,{size:1.5}):"Download Images"})})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})}var et=n(3518),en=n.n(et),es=n(5688);let el=e=>(function(e,t,n,s,l){let r=function(e,t){let n={front:{},back:{}};for(let[s,l]of e.entries())for(let e of[x.i6,x.eJ]){let r=l[e];if(null!=r){let l=r.selectedImage;null!=l&&l!==t&&(null==n[e][l]?n[e][l]=new Set([s]):n[e][l].add(s))}}return n}(e,n),i=document.implementation.createDocument("","",null),a=i.createElement("order"),c=i.createElement("details"),o=i.createElement("quantity");o.appendChild(i.createTextNode(s.toString())),c.appendChild(o);let d=i.createElement("bracket");d.appendChild(i.createTextNode((0,p.wk)(s).toString())),c.appendChild(d);let h=i.createElement("stock");h.appendChild(i.createTextNode(l.cardstock)),c.appendChild(h);let u=i.createElement("foil");for(let e of(u.appendChild(i.createTextNode(l.foil?"true":"false")),c.appendChild(u),a.append(c),[x.i6,x.eJ]))if(Object.keys(r[e]).length>0){let s=i.createElement("".concat(e,"s"));for(let[l,a]of Object.entries(r[e])){let r=function(e,t,n,s){let l=e[n];if(null==l)return null;let r=t.createElement("card"),i=t.createElement("id");i.appendChild(t.createTextNode(n)),r.appendChild(i);let a=t.createElement("slots");a.appendChild(t.createTextNode(Array.from(s).sort((e,t)=>e-t).toString())),r.appendChild(a);let c=t.createElement("name");c.appendChild(t.createTextNode("".concat(l.name,".").concat(l.extension))),r.append(c);let o=t.createElement("query");return o.appendChild(t.createTextNode(x.P$[l.card_type]+l.searchq)),r.append(o),r}(t,i,l,a),c=l===n&&e===x.eJ;null==r||c||s.appendChild(r)}s.children.length>0&&a.appendChild(s)}let m=i.createElement("cardback");null!=n&&m.appendChild(i.createTextNode(n)),a.appendChild(m),i.appendChild(a);let j=new XMLSerializer,g=j.serializeToString(i);return en()(g,{collapseContent:!0})})((0,F.wH)(e),e.cardDocuments.cardDocuments,e.project.cardback,(0,F.zO)(e),(0,es.GG)(e));function er(){let e=(0,_.oR)(),t=(0,m.CG)(F.aG),n=()=>{let t=el(e.getState());(0,U.saveAs)(new Blob([t],{type:"text/xml;charset=utf-8"}),"cards.xml")};return(0,r.jsxs)(H.Z.Item,{disabled:t,onClick:n,"data-testid":"export-xml-button",children:[(0,r.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," XML"]})}function ei(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(H.Z,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(H.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("i",{className:"bi bi-cloud-arrow-down",style:{paddingRight:"0.5em"}})," ","Download"]})}),(0,r.jsxs)(H.Z.Menu,{children:[(0,r.jsx)(X,{}),(0,r.jsx)(er,{}),(0,r.jsx)(ee,{})]})]})})}var ea=n(7346);function ec(){let e=(0,m.CG)(es.GG),t=(0,m.TL)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{lg:8,md:12,sm:12,xs:12,children:(0,r.jsx)(ea.Z.Group,{children:(0,r.jsx)(ea.Z.Select,{value:e.cardstock,style:{height:x.B4+"px"},onChange:e=>t((0,es.HU)(e.target.value)),children:x.Nu.map(e=>(0,r.jsx)("option",{children:e},e))})})}),(0,r.jsx)(d.Z,{lg:4,md:12,sm:12,xs:12,children:(0,r.jsx)(Z.ZP,{onClick:()=>t((0,es.uR)()),on:"Foil",onClassName:"flex-centre",off:"Non-Foil",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:e.foil,disabled:!x.lq[e.cardstock]})})]})}var eo=n(7125),ed=n(5147),eh=n(3205),eu=n(2512);function ex(){let e=(0,c.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return ex=function(){return e},e}let em=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",ej=u.ZP.div.withConfig({componentId:"sc-d1c6a457-0"})(ex(),e=>em(e));function eg(e){let{mimeTypes:t,fileUploadCallback:n,label:s}=e,l=(0,o.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=()=>console.log("file reading was aborted"),t.onerror=()=>console.log("file reading has failed"),t.onload=()=>{n(t.result)},t.readAsText(e)})},[n]),{getRootProps:i,getInputProps:a,isFocused:c,isDragAccept:d,isDragReject:h}=(0,eu.uI)({onDrop:l,accept:t,maxFiles:1});return(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)(ej,{...i({isFocused:c,isDragAccept:d,isDragReject:h}),"aria-label":null!=s?s:"dropzone",children:[(0,r.jsx)("input",{...a()}),"Drag and drop a file here, or click to select a file."]})})}function ef(){let e=(0,c.Z)(["\n  max-width: 100%;\n  overflow-x: scroll;\n"]);return ef=function(){return e},e}function ep(){let e=(0,c.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return ep=function(){return e},e}function eb(){let e=(0,c.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return eb=function(){return e},e}function ey(){let e=(0,c.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return ey=function(){return e},e}let eC=u.ZP.div.withConfig({componentId:"sc-bd9e265e-0"})(ef()),ev=(0,u.ZP)(ed.Z).withConfig({componentId:"sc-bd9e265e-1"})(ep()),eZ=u.ZP.th.withConfig({componentId:"sc-bd9e265e-2"})(eb()),ek=u.ZP.td.withConfig({componentId:"sc-bd9e265e-3"})(ey());function ew(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eC,{children:(0,r.jsxs)(ev,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(eZ,{children:"Quantity"}),(0,r.jsx)(eZ,{children:"Front"}),(0,r.jsx)(eZ,{children:"Front ID"}),(0,r.jsx)(eZ,{children:"Back"}),(0,r.jsx)(eZ,{children:"Back ID"})]}),(0,r.jsx)("tbody",{children:[,,,].fill((0,r.jsx)("tr",{children:[,,,,,].fill((0,r.jsx)(ek,{}))}))})]})}),"Where the columns follow these rules:",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Quantity"}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card front. ",(0,r.jsx)("b",{children:"Cannot be blank."})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front"}),": Search query for card back. Can be blank."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Front ID"}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function eN(){return(0,r.jsx)(eC,{children:(0,r.jsxs)(ev,{bordered:!0,children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)(eZ,{children:"Quantity"}),(0,r.jsx)(eZ,{children:"Front"}),(0,r.jsx)(eZ,{children:"Front ID"}),(0,r.jsx)(eZ,{children:"Back"}),(0,r.jsx)(eZ,{children:"Back ID"})]}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"2"})}),(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"island"})}),(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"1HsvTYs1..."})}),(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"forest"})}),(0,r.jsx)(ek,{})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"3"})}),(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"t:goblin"})}),(0,r.jsx)(ek,{}),(0,r.jsx)(ek,{}),(0,r.jsx)(ek,{children:(0,r.jsx)("code",{children:"1JtXL6Ca..."})})]})]})]})})}function eS(){let e=(0,m.TL)(),t=(0,eh.l)(),[n,s]=(0,o.useState)(!1),l=()=>s(!1),i=()=>s(!0),a=(0,m.CG)(F.zO),c=n=>{var s;if("string"!=typeof n){alert("invalid CSV file uploaded");return}let r="quantity",i="frontQuery",c="frontSelectedImage",o="backQuery",d="backSelectedImage",h=(0,eo.Q)(n,{header:{Quantity:r,Front:i,"Front ID":c,Back:o,"Back ID":d}}),u=e=>{var t,n,s,l,a;let h="".concat(null!==(t=e[r])&&void 0!==t?t:""," ").concat(null!==(n=e[i])&&void 0!==n?n:"");return(null!==(s=e[c])&&void 0!==s?s:"").length>0&&(h+="".concat(x.A0).concat(e[c])),(null!==(l=e[o])&&void 0!==l?l:"").length>0&&(h+=" ".concat(x.M0," ").concat(e[o]),(null!==(a=e[d])&&void 0!==a?a:"").length>0&&(h+="".concat(x.A0).concat(e[d]))),h},m=(0,Q.l_)(h.map(u),null!==(s=t.data)&&void 0!==s?s:{});e((0,F.r7)({members:(0,Q.wt)(m,a)})),l()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:i,children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-spreadsheet",style:{paddingRight:"0.5em"}})," ","CSV"]}),(0,r.jsxs)(g.Z,{show:n,onHide:l,"data-testid":"import-csv",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — CSV"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,r.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,r.jsx)(ew,{}),"For example:",(0,r.jsx)(eN,{}),(0,r.jsx)("hr",{}),(0,r.jsx)(eg,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:c,label:"import-csv"})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})}(s=l||(l={})).quantity="Quantity",s.frontQuery="Front",s.frontSelectedImage="Front ID",s.backQuery="Back",s.backSelectedImage="Back ID";var eI=n(5607);function eT(){let e=(0,eh.cf)(),t=(0,eh.l)(),n=(0,m.TL)(),[s,l]=(0,o.useState)(!1),i=()=>l(!1),a=()=>l(!0),[c,d]=(0,o.useState)(""),[h,u]=(0,o.useState)(""),j=(0,m.CG)(F.zO),b=e=>{let t=[];for(let n of[x.Zb,x.WU,x.dt])null!=e[n]&&t.push(e[n].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(x.P$[n]).concat((0,Q.GL)(e.name))).join("\n"));return t.join("\n\n")};(0,o.useEffect)(()=>{void 0!=e.data&&u(b(e.data))},[e.data]);let y=()=>{var e;let s=(0,Q.ts)(c,null!==(e=t.data)&&void 0!==e?e:{});n((0,F.r7)({members:(0,Q.wt)(s,j)})),i()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:a,children:[(0,r.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Text"]}),(0,r.jsxs)(g.Z,{show:s,onHide:i,onExited:()=>d(""),"data-testid":"import-text",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — Text"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,r.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,r.jsx)(eI.Z,{children:(0,r.jsxs)(eI.Z.Item,{eventKey:"0",children:[(0,r.jsx)(eI.Z.Header,{children:"Syntax Guide"}),(0,r.jsx)(eI.Z.Body,{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["There are three types of images in ",x.vV," —"," ",x.Zb.toLowerCase(),"s, ",x.dt.toLowerCase(),"s, and"," ",x.WU.toLowerCase(),"s. If you search for a card, the search results ",(0,r.jsx)("b",{children:"won't contain cardbacks or tokens"}),"."]}),(0,r.jsxs)("li",{children:[(0,r.jsxs)("b",{children:[(0,p.LF)(x.Zb),"s"]})," are searched for by default."]}),(0,r.jsxs)("li",{children:["Search for ",(0,r.jsxs)("b",{children:[x.WU.toLowerCase(),"s"]})," by putting"," ",(0,r.jsx)("code",{children:x.P$[x.WU]})," at the start of the query — for example,"," ",(0,r.jsxs)("code",{children:[x.P$[x.WU],"your"," ",x.WU.toLowerCase()," name"]}),"."]}),(0,r.jsxs)("li",{children:["Search for ",(0,r.jsxs)("b",{children:[x.dt.toLowerCase(),"s"]})," by putting"," ",(0,r.jsx)("code",{children:x.P$[x.dt]})," at the start of the query — for example,"," ",(0,r.jsxs)("code",{children:[x.P$[x.dt],"your"," ",x.dt.toLowerCase()," name"]}),"."]}),(0,r.jsxs)("li",{children:["You may optionally specify the image ID to select by typing your search query, ",(0,r.jsx)("code",{children:x.A0}),", then the image ID — for example,"," ",(0,r.jsxs)("code",{children:["your ",x.Zb.toLowerCase()," name",x.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]}),"."]}),(0,r.jsxs)("li",{children:["You may specify queries for both the front and the back by separating them with ",(0,r.jsx)("code",{children:x.M0})," — for example,"," ",(0,r.jsxs)("code",{children:["4x goblin ",x.M0," ",x.P$[x.WU],"elf"]}),"."]}),(0,r.jsx)("li",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back card for you."})]})})]})}),(0,r.jsx)("br",{}),(0,r.jsx)(ea.Z.Group,{className:"mb-3",children:(0,r.jsx)(ea.Z.Control,{as:"textarea",rows:12,placeholder:h,required:!0,onChange:e=>d(e.target.value),value:c,"aria-label":"import-text"})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:i,children:"Close"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:y,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}function eF(){let e=(0,eh.l)(),t=(0,eh.QA)(),n=(0,j.Sb)(),s=(0,m.CG)(F.zO),l=(0,m.TL)(),[i,a]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),h=()=>a(!1),u=()=>a(!0),[x,p]=(0,o.useState)(""),[b,y]=eh.hi.endpoints.queryImportSite.useLazyQuery(),C=(0,o.useCallback)(async()=>{let t=x.trim();if(t.length>0){d(!0);try{var n,r;let t=await b(x),i=(0,Q.ts)(null!==(n=t.data)&&void 0!==n?n:"",null!==(r=e.data)&&void 0!==r?r:{});l((0,F.r7)({members:(0,Q.wt)(i,s)})),h()}catch(e){alert("error")}finally{d(!1)}}},[x]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:u,children:[(0,r.jsx)("i",{className:"bi bi-link-45deg",style:{paddingRight:"0.5em"}})," ","URL"]}),(0,r.jsxs)(g.Z,{show:c||i,onHide:h,onExited:()=>p(""),children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — URL"})}),(0,r.jsxs)(g.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into ",n,":",(0,r.jsx)("br",{}),null!=t.data?(0,r.jsx)("ul",{children:t.data.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(E.$,{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(ea.Z.Group,{className:"mb-3",children:(0,r.jsx)(ea.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>p(e.target.value.trim()),value:x,disabled:c||null==t.data,"aria-label":"import-url"})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:h,children:"Close"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:async()=>{await C()},disabled:c||t.isFetching,style:{width:"4.75em"},children:c?(0,r.jsx)(E.$,{size:1.5}):"Submit"})]})]})]})}function eP(){let e=(0,m.TL)(),[t,n]=(0,o.useState)(!1),s=()=>n(!1),l=()=>n(!0),i=(0,m.CG)(F.sZ),a=(0,m.CG)(F.zO),[c,d]=(0,o.useState)(!1),[h,u]=(0,o.useState)(!1),j=t=>{var n,l,r,o,d,u,m;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let j=new DOMParser,g=j.parseFromString(t,"application/xml"),f=g.getElementsByTagName("order")[0],p=f.getElementsByTagName("details")[0],b=null===(n=p.getElementsByTagName("stock")[0])||void 0===n?void 0:n.textContent,y=(null===(l=p.getElementsByTagName("foil")[0])||void 0===l?void 0:l.textContent)==="true",C=f.getElementsByTagName("fronts")[0],v=f.getElementsByTagName("backs")[0],Z=C.getElementsByTagName("card"),k=null!=v?v.getElementsByTagName("card"):void 0,w=null!==(o=null===(r=f.getElementsByTagName("cardback")[0])||void 0===r?void 0:r.textContent)&&void 0!==o?o:i,N=0,S=Array.from({length:x.Wn-a},()=>({front:null,back:null}));if(null!=k)for(let e of k){let t=null===(d=e.getElementsByTagName("slots")[0])||void 0===d?void 0:d.textContent;if(null==t)continue;let n=(0,Q.XV)(null!==(u=e.getElementsByTagName("query")[0].textContent)&&void 0!==u?u:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;S[t].back={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},N=Math.max(N,t)})}for(let e of Z){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,Q.XV)(null!==(m=e.getElementsByTagName("query")[0].textContent)&&void 0!==m?m:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;S[t].front={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==S[t].back&&(S[t].back={query:{query:null,card_type:x.dt},selectedImage:w,selected:!1}),N=Math.max(N,t)})}e((0,F.r7)({members:S.slice(0,N+1)})),c&&null!=w&&e((0,F.mp)({selectedImage:w})),h&&null!=b&&x.Nu.includes(b)&&null!=y&&(e((0,es.HU)(b)),e((0,es.Mc)(y))),s()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{onClick:l,children:[(0,r.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," ","XML"]}),(0,r.jsxs)(g.Z,{show:t,onHide:s,"data-testid":"import-xml",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Add Cards — XML"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,r.jsxs)("p",{children:["The ",x.vV," website can generate an XML file representing your project, and the ",x.vV," desktop tool which auto-fills your order into"," ",(0,r.jsx)("a",{href:x.vs,target:"_blank",children:x.Fo})," ","expects a file in this format."]}),(0,r.jsx)(Z.ZP,{onClick:()=>d(!c),on:"Use XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:c}),(0,r.jsx)("div",{className:"pt-3",children:(0,r.jsx)(Z.ZP,{onClick:()=>u(!h),on:"Use XML Finish Settings",onClassName:"flex-centre",off:"Retain Selected Finish Settings",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:h})}),(0,r.jsx)("hr",{}),(0,r.jsx)(eg,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:j,label:"import-xml"})]}),(0,r.jsx)(g.Z.Footer,{children:(0,r.jsx)(f.Z,{variant:"secondary",onClick:s,children:"Close"})})]})]})}function eB(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(H.Z,{children:[(0,r.jsx)("div",{className:"d-grid gap-0",children:(0,r.jsxs)(H.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("i",{className:"bi bi-plus-circle",style:{paddingRight:"0.5em"}})," ","Add Cards"]})}),(0,r.jsxs)(H.Z.Menu,{children:[(0,r.jsx)(eT,{}),(0,r.jsx)(eP,{}),(0,r.jsx)(eS,{}),(0,r.jsx)(eF,{})]})]})})}var eL=n(2238);function eE(e){var t;let{slots:n}=e,s=(0,m.TL)(),[l,i]=(0,o.useState)(!1),a=()=>i(!1),c=()=>i(!0),d=e=>{s((0,F.ND)({selectedImage:e,slots:n})),a()},h=(0,m.CG)(e=>(0,F.CH)(e,n)),u=null!==(t=(0,m.CG)(e=>e.cardbacks.cardbacks))&&void 0!==t?t:[],x=(0,m.CG)(e=>(0,P.ci)(e,h,n[0][0],u));return(0,r.jsxs)(r.Fragment,{children:[null!=x&&x.length>1&&(0,r.jsxs)(H.Z.Item,{className:"text-decoration-none",onClick:c,children:[(0,r.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," ","Change Version"]}),null!=x&&(0,r.jsx)(T,{testId:"bulk-grid-selector",imageIdentifiers:x,show:l,handleClose:a,onClick:d})]})}function eG(e){var t;let{slots:n}=e,s=(0,m.TL)(),[l,i]=(0,o.useState)(!1),a=()=>{i(!1)},c=()=>i(!0),[d,h]=(0,o.useState)(""),u=e=>{e.preventDefault(),s((0,F.qe)({query:d,slots:n})),a()},j=(0,eh.cf)(),p=null!=j.data&&null!=(null!==(t=j.data)&&void 0!==t?t:{})[x.Zb][0]?j.data[x.Zb][0].name:"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H.Z.Item,{className:"text-decoration-none",onClick:c,children:[(0,r.jsx)("i",{className:"bi bi-arrow-repeat",style:{paddingRight:"0.5em"}})," ","Change Query"]}),(0,r.jsxs)(g.Z,{show:l,onHide:a,onExited:()=>h(""),children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Change Query"})}),(0,r.jsxs)(g.Z.Body,{children:["Type in a query to update the selected images with and hit"," ",(0,r.jsx)("b",{children:"Submit"}),".",(0,r.jsx)("hr",{}),(0,r.jsx)(ea.Z,{onSubmit:u,id:"changeSelectedImageQueriesForm",children:(0,r.jsx)(ea.Z.Group,{className:"mb-3",children:(0,r.jsx)(ea.Z.Control,{type:"text",placeholder:p,onChange:e=>h(e.target.value),value:d,"aria-label":"change-selected-image-queries-text",required:!0})})})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(f.Z,{type:"submit",form:"changeSelectedImageQueriesForm",variant:"primary","aria-label":"change-selected-image-queries-submit",children:"Submit"})]})]})]})}function ez(e){let{slots:t}=e,n=(0,m.TL)(),s=()=>n((0,F.g5)({slots:t}));return(0,r.jsxs)(H.Z.Item,{onClick:s,className:"text-decoration-none",children:[(0,r.jsx)("i",{className:"bi bi-slash-circle",style:{paddingRight:"0.5em"}})," ","Clear Query"]})}function eD(e){let{slots:t}=e,n=(0,m.TL)(),s=t.map(e=>{let[t,n]=e;return n}),l=()=>n((0,F.uA)({slots:s}));return(0,r.jsxs)(H.Z.Item,{onClick:l,className:"text-decoration-none",children:[(0,r.jsx)("i",{className:"bi bi-x-circle",style:{paddingRight:"0.5em"}})," ","Delete Slots"]})}function eq(){let e=(0,m.CG)(F.NV),t=(0,m.TL)(),n=()=>t((0,F.fP)({selectedStatus:!1,slots:e}));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)($.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,r.jsxs)(v.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,r.jsx)(f.Z,{onClick:n,className:"ms-auto","data-testid":"clear-selection",children:(0,r.jsx)("i",{className:"bi bi-x-lg"})}),e.length>0&&(0,r.jsxs)(H.Z,{children:[(0,r.jsx)(H.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,r.jsxs)(H.Z.Menu,{children:[(0,r.jsx)(eE,{slots:e}),(0,r.jsx)(eG,{slots:e}),(0,r.jsx)(H.Z.Divider,{}),(0,r.jsx)(ez,{slots:e}),(0,r.jsx)(eD,{slots:e})]})]})]})})})}function eO(){let e=(0,m.CG)(N.ZR),t=(0,m.TL)();return(0,r.jsx)(Z.ZP,{onClick:()=>t((0,N.$3)()),on:"Show Fronts",onClassName:"flex-centre",off:"Show Backs",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:e})}function eR(){let e=(0,c.Z)(["\n  font-size: 1.25rem;\n"]);return eR=function(){return e},e}function eM(){let e=(0,eL.UAParser)();return"mobile"===e.device.type?(0,r.jsxs)($.Z,{variant:"primary",children:["It seems like you're on a mobile device! The ",x.vV," executable that fills your order into MPC requires a desktop computer."]}):(0,r.jsx)(r.Fragment,{})}function eA(){let e=(0,m.CG)(F.zO),t=(0,m.CG)(F.p4);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Edit MPC Project"}),(0,r.jsx)(eM,{}),(0,r.jsx)(eq,{}),e>0&&(0,r.jsxs)($.Z,{variant:"secondary",children:["Your project contains ",(0,r.jsx)("b",{children:e})," card",1!==e&&"s",", belongs in the MPC bracket of up to"," ",(0,r.jsx)("b",{children:(0,p.wk)(e)})," cards, and is"," ",(0,r.jsx)("b",{children:(0,p.K)(t,0)})," in total.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),e>=x.Wn&&(0,r.jsx)($.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,r.jsx)(eO,{})]})]})}u.ZP.i.withConfig({componentId:"sc-cc3ad37b-0"})(eR());var eH=n(7202);function eU(e){let{filterSettings:t,setFilterSettings:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,r.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,r.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,r.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,r.jsx)("b",{children:"look the same"}),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.Z,{children:[(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(ea.Z.Label,{children:["Minimum: ",(0,r.jsxs)("b",{children:[t.minimumDPI," DPI"]})]}),(0,r.jsx)(ea.Z.Range,{defaultValue:t.minimumDPI,min:x.sL,max:x.gx,step:x.Ox,onChange:e=>{n({...t,minimumDPI:parseInt(e.target.value)})}})]}),(0,r.jsxs)(d.Z,{xs:6,children:[(0,r.jsxs)(ea.Z.Label,{children:["Maximum: ",(0,r.jsxs)("b",{children:[t.maximumDPI," DPI"]})]}),(0,r.jsx)(ea.Z.Range,{defaultValue:t.maximumDPI,min:x.sL,max:x.gx,step:x.Ox,onChange:e=>{n({...t,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,r.jsxs)(ea.Z.Label,{children:["File size: Up to ",(0,r.jsxs)("b",{children:[t.maximumSize," MB"]})]}),(0,r.jsx)(ea.Z.Range,{defaultValue:t.maximumSize,min:0,max:x.bD,step:x.B9,onChange:e=>{n({...t,maximumSize:parseInt(e.target.value)})}})]})}var e_=n(5749);function eQ(e){let{searchTypeSettings:t,setSearchTypeSettings:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(Z.ZP,{onClick:()=>n({...t,fuzzySearch:!t.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:t.fuzzySearch}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(Z.ZP,{onClick:()=>n({...t,filterCardbacks:!t.filterCardbacks}),on:"Filters Apply to Cardbacks",onClassName:"flex-centre",off:"Include All Cardbacks",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:x.B4+"px",active:t.filterCardbacks})]})}var eV=n(8627);function eX(e){let{sourceSettings:t,setSourceSettings:n}=e,s=(0,m.CG)(w.TK),l=(0,o.useCallback)((e,s)=>{var l;let r=[...null!==(l=t.sources)&&void 0!==l?l:[]],[i]=r.splice(e,1);r.splice(s,0,i),n({sources:r})},[t.sources,n]),i=e=>{null!=e.destination&&l(e.source.index,e.destination.index)},a=(0,o.useCallback)(e=>{var s;let l=[...null!==(s=t.sources)&&void 0!==s?s:[]];l[e]=[l[e][0],!l[e][1]],n({sources:l})},[t.sources,n]),c=(0,o.useCallback)(()=>{var e;let s=null!==(e=t.sources)&&void 0!==e?e:[],l=!s.some(e=>e[1]),r=s.map(e=>[e[0],l]);n({sources:r})},[t.sources,n]),d=(0,r.jsx)(E.$,{});if(null!=s){var h,u;let e=(null!==(h=t.sources)&&void 0!==h?h:[]).map((e,n)=>(0,r.jsx)(eV._l,{draggableId:e[0].toString(),index:n,children:(i,c)=>(0,r.jsxs)("tr",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,children:[(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"30%"},children:(0,r.jsx)(Z.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:x.B4+"px",active:e[1],onClick:()=>a(n)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"50%"},children:null!=s[e[0]].external_link?(0,r.jsx)("a",{href:null!==(u=s[e[0]].external_link)&&void 0!==u?u:void 0,target:"_blank",children:s[e[0]].name}):(0,r.jsx)("a",{children:s[e[0]].name})},"".concat(e[0],"-name-column")),(0,r.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-up",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{l(n,0)}},"".concat(e[0],"-up-button"))}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"bi bi-chevron-double-down",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{var e;l(n,(null!==(e=t.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,r.jsx)("td",{style:{verticalAlign:"middle",width:"15%",textAlign:"center"},children:(0,r.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));d=(0,r.jsx)(eV.Z5,{onDragEnd:i,children:(0,r.jsx)(eV.bK,{droppableId:"source-order",children:(t,n)=>(0,r.jsx)("div",{style:{height:59*e.length+x.B4+"px"},children:(0,r.jsxs)(ed.Z,{ref:t.innerRef,style:{tableLayout:"auto"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{height:x.B4+"px"},onClick:c,children:[(0,r.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,r.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,r.jsx)("th",{}),(0,r.jsx)("th",{})]})}),(0,r.jsxs)("tbody",{children:[e,t.placeholder]})]})})})})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,r.jsxs)("li",{children:["Use the ",(0,r.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]}),(0,r.jsxs)("li",{children:["Click the ",(0,r.jsx)("b",{children:"table header"})," to enable or disable all sources."]})]}),d]})}function e$(){let e=(0,m.TL)(),[t,n]=(0,o.useState)(!1),s=(0,m.CG)(e_.xN),[l,i]=(0,o.useState)(s.searchTypeSettings),[a,c]=(0,o.useState)(s.sourceSettings),[d,h]=(0,o.useState)(s.filterSettings),u=(0,m.CG)(w.TK);(0,o.useEffect)(()=>{if(null!=u){let t=(0,eH.cI)(u);e((0,e_.Fg)(t.searchTypeSettings)),e((0,e_.Ph)(t.sourceSettings)),e((0,e_._E)(t.filterSettings))}},[e,u]);let x=()=>n(!1),j=(0,o.useCallback)(()=>{i(s.searchTypeSettings),h(s.filterSettings),c(s.sourceSettings),n(!0)},[s]),p=()=>{(0,eH.Wm)({searchTypeSettings:l,sourceSettings:a,filterSettings:d}),e((0,e_.Fg)(l)),e((0,e_.Ph)(a)),e((0,e_._E)(d)),x()};return(0,r.jsxs)("div",{className:"d-grid gap-0",children:[(0,r.jsxs)(f.Z,{variant:"primary",onClick:j,children:[(0,r.jsx)("i",{className:"bi bi-gear",style:{paddingRight:"0.5em"}}),"Search Settings"]}),(0,r.jsxs)(g.Z,{show:t,onHide:p,"data-testid":"search-settings",children:[(0,r.jsx)(g.Z.Header,{closeButton:!0,children:(0,r.jsx)(g.Z.Title,{children:"Search Settings"})}),(0,r.jsxs)(g.Z.Body,{children:[(0,r.jsx)(eQ,{searchTypeSettings:l,setSearchTypeSettings:i}),(0,r.jsx)("hr",{}),(0,r.jsx)(eU,{filterSettings:d,setFilterSettings:h}),(0,r.jsx)("hr",{}),(0,r.jsx)(eX,{sourceSettings:a,setSourceSettings:c})]}),(0,r.jsxs)(g.Z.Footer,{children:[(0,r.jsx)(f.Z,{variant:"secondary",onClick:x,children:"Close Without Saving"}),(0,r.jsx)(f.Z,{variant:"primary",onClick:p,children:"Save Changes"})]})]})]})}var eJ=n(5617);function eW(){let e=(0,c.Z)(["\n  position: relative;\n  height: calc(\n    100vh - ","px\n  ); // for compatibility with older browsers\n  height: calc(100dvh - ","px); // handles the ios address bar\n  overflow-y: scroll;\n  overscroll-behavior: none;\n"]);return eW=function(){return e},e}let eK=(0,u.ZP)(d.Z).withConfig({componentId:"sc-cbefa228-0"})(eW(),x.tm,x.tm);var eY=function(){let e=(0,j.NM)(),t=(0,m.TL)(),n=(0,m.CG)(F.sZ);return(0,o.useEffect)(()=>{e&&(0,w.kJ)(t)},[t,e]),(0,r.jsx)(r.Fragment,{children:e?(0,r.jsxs)(h.Z,{className:"g-0",children:[(0,r.jsx)(eK,{lg:8,md:8,sm:6,xs:6,"data-testid":"left-panel",children:(0,r.jsx)(R,{})}),(0,r.jsxs)(eK,{"data-testid":"right-panel",lg:4,md:4,sm:6,xs:6,style:{zIndex:1},className:"px-2",children:[(0,r.jsx)(eA,{}),(0,r.jsx)(h.Z,{className:"g-0 pb-3",children:(0,r.jsx)(ec,{})}),(0,r.jsx)(h.Z,{className:"g-0",children:(0,r.jsx)(e$,{})}),(0,r.jsxs)(h.Z,{className:"g-0 py-3",children:[(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(eB,{})}),(0,r.jsx)(d.Z,{lg:6,md:12,sm:12,xs:12,children:(0,r.jsx)(ei,{})})]}),(0,r.jsx)(d.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,r.jsx)(A,{selectedImage:n})})]})]}):(0,r.jsx)(eJ.O,{})})},e0=n(9733);function e1(){let e=(0,j.NM)();return e?(0,r.jsx)(eY,{}):(0,r.jsx)(eJ.O,{})}function e2(){return(0,r.jsxs)(e0.XR,{gutter:0,children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Edit MPC Project"})," ",(0,r.jsx)("meta",{name:"description",content:"".concat(x.vV,"&apos;'s rich project editor.")})]}),(0,r.jsx)(e1,{})]})}n(1351)}},function(e){e.O(0,[62,196,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);