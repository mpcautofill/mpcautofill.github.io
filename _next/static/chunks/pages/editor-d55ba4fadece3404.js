(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(3037)}])},5617:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var s=n(7297),l=n(5893),i=n(9521),r=n(1677);function a(){let e=(0,s.Z)(["\n  position: absolute;\n  top: 50vh;\n  left: 50vw;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]);return a=function(){return e},e}function c(){let e=(0,s.Z)(["\n  font-size: 1.3em;\n"]);return c=function(){return e},e}let o=i.ZP.div.withConfig({componentId:"sc-1f4d24f3-0"})(a()),d=i.ZP.p.withConfig({componentId:"sc-1f4d24f3-1"})(c());function u(){return(0,l.jsxs)(o,{children:[(0,l.jsxs)(d,{children:["You haven't configured a server for ",r.vV," to communicate with just yet."]}),(0,l.jsxs)(d,{children:["Click the ",(0,l.jsx)("b",{children:"Configure Server"})," button in the top-right to get started!"]})]})}},3037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eB}});var s,l,i=n(5893),r=n(9008),a=n.n(r),c=n(7294),o=n(1555),d=n(4051),u=n(2664),h=n(8737),x=n(6212),m=n(1677),j=n(8789),g=n(7104),f=n(8208),v=n(4291),p=n(6518),b=n(478),y=n(3389),Z=n(5384);function k(e){let{cardIdentifiersAndOptionNumbersBySource:t,selectImage:n,sourceKeyToName:s}=e;return(0,i.jsx)(d.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:Object.entries(t).map((e,t)=>{let[s,l]=e;return(0,i.jsx)(i.Fragment,{children:l.flatMap(e=>{let[t,s]=e;return(0,i.jsx)(v.Ev,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(s+1),cardOnClick:()=>n(t),noResultsFound:!1},"gridSelector-".concat(t))})})})})}function C(e){var t,n;let{cardIdentifiersAndOptionNumbersBySource:s,selectImage:l,sourceKeyToName:r}=e,a=(0,u.I0)(),c=(0,u.v9)(e=>e.viewSettings.sourcesVisible);return(0,i.jsx)(i.Fragment,{children:Object.entries(s).map((e,s)=>{let[o,u]=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"sticky-top",onClick:()=>a((0,Z.O6)(o)),style:{backgroundColor:"#4E5D6B",zIndex:s+100},children:[(0,i.jsx)("hr",{},"".concat(o,"-top-hr")),(0,i.jsxs)(b.Z,{direction:"horizontal",gap:2,className:"d-flex ps-2 pe-2",children:[(0,i.jsx)("h3",{className:"orpheus prevent-select",style:{fontStyle:"italic"},children:r[o]},"".concat(o,"-header-title")),(0,i.jsxs)("h6",{className:"text-primary prevent-select",children:[u.length," version",1!=u.length&&"s"]}),(0,i.jsx)("h4",{className:"ms-auto bi bi-chevron-left rotate-".concat(null===(t=c[o])||void 0===t||t?"":"neg","90"),style:{transition:"all 0.25s 0s"},"data-testid":"".concat(o,"-collapse-header")},"".concat(o,"-arrow"))]},"".concat(o,"-header-inner"))]},"".concat(o,"-header")),(0,i.jsx)(p.Z,{in:null===(n=c[o])||void 0===n||n,"data-testid":"".concat(o,"-collapse"),children:(0,i.jsxs)("div",{children:[(0,i.jsx)("hr",{},"".concat(o,"-bottom-hr")),(0,i.jsx)(d.Z,{className:"g-0",xxl:4,xl:4,lg:3,md:2,sm:2,xs:2,children:u.map(e=>{let[t,n]=e;return(0,i.jsx)(v.Ev,{imageIdentifier:t,cardHeaderTitle:"Option ".concat(n+1),cardOnClick:()=>l(t),noResultsFound:!1},"gridSelector-".concat(t))})},"".concat(o,"-row"))]})})]})})})}function I(e){var t,n;let{testId:s,imageIdentifiers:l,show:r,handleClose:a,onClick:h}=e,j=(0,u.I0)(),f=(0,u.v9)(e=>e.cardDocuments.cardDocuments),v=(0,u.v9)(e=>e.viewSettings.facetBySource),p=(0,c.useCallback)(e=>{h(e),a()},[h,a]),b=(0,u.v9)(e=>Object.fromEntries(Object.keys(null!==(t=e.sourceDocuments.sourceDocuments)&&void 0!==t?t:{}).map(t=>[e.sourceDocuments.sourceDocuments[t].key,e.sourceDocuments.sourceDocuments[t].name]))),I=Object.keys(b),S=(0,u.v9)(e=>Object.values(null!==(n=e.viewSettings.sourcesVisible)&&void 0!==n?n:{}).includes(!1)),N=(0,c.useMemo)(()=>l.reduce((e,t,n)=>{let s=f[t];return null!=s&&(Object.prototype.hasOwnProperty.call(e,s.source)||(e[s.source]=[]),e[s.source].push([t,n])),e},{}),[f,l]);return(0,i.jsxs)(x.Z,{show:r,onHide:a,size:"lg","data-testid":s,children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Select Version"})}),(0,i.jsxs)(x.Z.Body,{children:[(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(o.Z,{md:8,sm:6,children:(0,i.jsx)(y.ZP,{onClick:()=>j((0,Z.Mo)()),on:"Facet By Source",onClassName:"flex-centre",off:"Group All Cards Together",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:v})}),v&&(0,i.jsx)(o.Z,{md:4,sm:6,children:(0,i.jsx)("div",{className:"d-grid gap-0",children:(0,i.jsxs)(g.Z,{onClick:()=>j(S?(0,Z.X8)():(0,Z.tC)(I)),children:[(0,i.jsx)("i",{className:"bi bi-arrows-".concat(S?"expand":"collapse"),style:{paddingRight:"0.5em"}})," ",S?"Expand":"Collapse"," All"]})})})]}),(0,i.jsx)("br",{}),v?(0,i.jsx)(C,{cardIdentifiersAndOptionNumbersBySource:N,selectImage:p,sourceKeyToName:b}):(0,i.jsx)(k,{cardIdentifiersAndOptionNumbersBySource:N,selectImage:p,sourceKeyToName:b})]}),(0,i.jsx)(x.Z.Footer,{children:(0,i.jsx)(g.Z,{variant:"secondary",onClick:a,children:"Close"})})]})}var S=n(9539);let N=(0,c.memo)(function(e){let{face:t,slot:n,searchResultsForQuery:s,show:l,handleClose:r}=e,a=(0,u.I0)();return(0,i.jsx)(I,{testId:"".concat(t,"-slot").concat(n,"-grid-selector"),imageIdentifiers:s,show:l,handleClose:r,onClick:function(e){a((0,S.qP)({face:t,slot:n,selectedImage:e}))}})}),w=(0,c.memo)(function(e){var t,n,s,l;let{searchQuery:r,face:a,slot:o,handleShowDetailedView:d}=e,[h,x]=(0,c.useState)(!1),j=()=>x(!1),p=()=>x(!0),b=(0,u.I0)(),y=null!==(t=(0,u.v9)(e=>e.cardbacks.cardbacks))&&void 0!==t?t:[],Z=(0,u.v9)(e=>e.project.cardback),k=(0,u.v9)(e=>(null==r?void 0:r.query)!=null?(null!==(n=e.searchResults.searchResults[r.query])&&void 0!==n?n:{})[r.card_type]:a===m.eJ?y:[]),C=(0,u.v9)(e=>(null!==(s=e.project.members[o])&&void 0!==s?s:{})[a]),I=null==C?void 0:C.selectedImage,w=()=>{null!=I&&d(I)};(0,c.useEffect)(()=>{if(null!=k){let e=I;null==e||k.includes(e)||(e=void 0),k.length>0&&null==e&&(null!=r?e=k[0]:a===m.eJ&&null!=Z&&(e=Z)),b((0,S.qP)({face:a,slot:o,selectedImage:e}))}},[k,Z]);let F=null!=k?k:[],T=null!=I?F.indexOf(I):void 0,B=null!=T?F[(0,f.N0)(T+1,F.length)]:void 0,P=null!=T?F[(0,f.N0)(T-1,F.length)]:void 0,D=()=>{b((0,S.NO)({slot:o}))},E=e=>{2==e.detail?b((0,S.HS)({slot:o,face:a})):b((0,S.O$)({slot:o,face:a}))};function q(e){null!=T&&b((0,S.qP)({face:a,slot:o,selectedImage:F[(0,f.N0)(T+e,F.length)]}))}let O=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"card-select",onClick:E,"aria-label":"select-".concat(a).concat(o),children:(0,i.jsx)("i",{className:"bi bi".concat(null!==(l=null==C?void 0:C.selected)&&void 0!==l&&l?"-check":"","-square")})}),(0,i.jsx)("button",{className:"remove",children:(0,i.jsx)("i",{className:"bi bi-x-circle",onClick:D,"aria-label":"remove-".concat(a).concat(o)})})]}),z=(0,i.jsxs)(i.Fragment,{children:[1===F.length&&(0,i.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",F.length]}),F.length>1&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:p,children:[(null!=T?T:0)+1," / ",F.length]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(g.Z,{variant:"outline-primary",className:"prev",onClick:()=>q(-1),children:"❮"}),(0,i.jsx)(g.Z,{variant:"outline-primary",className:"next",onClick:()=>q(1),children:"❯"})]})]})]});return(0,i.jsxs)("div",{style:{contentVisibility:"auto"},"data-testid":"".concat(a,"-slot").concat(o),children:[(0,i.jsx)(v.Ev,{imageIdentifier:I,previousImageIdentifier:B,nextImageIdentifier:P,cardHeaderTitle:"Slot ".concat(o+1),cardFooter:z,cardHeaderButtons:O,imageOnClick:w,searchQuery:r,noResultsFound:null!=k&&0===k.length}),F.length>1&&(0,i.jsx)(N,{face:a,slot:o,searchResultsForQuery:F,show:h,handleClose:j})]})});var F=n(7088),T=n(5713);function B(){let e=(0,u.I0)(),[t,n]=(0,c.useState)(null),[s,l]=(0,c.useState)(!1),r=()=>l(!1),a=(0,c.useCallback)(e=>{n(e),l(!0)},[]),o="idle"===(0,u.v9)(e=>e.searchResults.status),h=(0,u.v9)(S.LI),g=[],f=[],v=(0,u.v9)(S.wH),p=(0,u.v9)(e=>e.searchSettings),b=(0,c.useMemo)(()=>JSON.stringify(p),[p]),y=JSON.stringify(p.sourceSettings.sources),Z=(0,c.useMemo)(()=>{let e=Array.from(h);return e.sort(),JSON.stringify(e)},[v]);for(let[t,n]of((0,c.useEffect)(()=>{null!=p.sourceSettings.sources&&e((0,F.U9)())},[Z,y]),(0,c.useEffect)(()=>{null!=p.sourceSettings.sources&&(e((0,T.Ug)()),e((0,F.U9)()))},[b]),v.entries())){var k,C;g.push((0,i.jsx)(w,{searchQuery:null===(k=n.front)||void 0===k?void 0:k.query,face:m.i6,slot:t,handleShowDetailedView:a},"".concat(m.i6,"-slot").concat(t))),f.push((0,i.jsx)(w,{searchQuery:null===(C=n.back)||void 0===C?void 0:C.query,face:m.eJ,slot:t,handleShowDetailedView:a},"".concat(m.eJ,"-slot").concat(t)))}let I=(0,u.v9)(e=>e.viewSettings.frontsVisible);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:I?"":"none"},children:g}),(0,i.jsx)(d.Z,{xxl:4,lg:3,md:2,sm:1,xs:1,className:"g-0",style:{display:I?"none":""},children:f}),(0,i.jsxs)(x.Z,{show:!o,children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Loading..."})}),(0,i.jsx)(x.Z.Body,{children:"TODO"})]}),null!=t&&(0,i.jsx)(j.t,{imageIdentifier:t,show:s,handleClose:r})]})}let P=(0,c.memo)(function(e){let{searchResults:t,show:n,handleClose:s}=e,l=(0,u.v9)(e=>e.project.cardback),r=(0,u.I0)();return(0,i.jsx)(I,{testId:"cardback-grid-selector",imageIdentifiers:t,show:n,handleClose:s,onClick:function(e){null!=l&&(r((0,S.Tx)({currentImage:l,selectedImage:e,face:m.eJ})),r((0,S.mp)({selectedImage:e})))}})});function D(e){let{selectedImage:t}=e,n=(0,u.I0)(),[s,l]=(0,c.useState)(!1),[r,a]=(0,c.useState)(!1),o=()=>l(!1),d=()=>l(!0),h=()=>a(!1),x=()=>a(!0),p=(0,u.v9)(e=>e.cardbacks.cardbacks);(0,c.useEffect)(()=>{p.length>0&&null==t&&n((0,S.mp)({selectedImage:p[0]}))},[p]);let b=null!=t?p.indexOf(t):void 0,y=null!=b?p[(0,f.N0)(b+1,p.length)]:void 0,Z=null!=b?p[(0,f.N0)(b-1,p.length)]:void 0;function k(e){if(null!=t&&null!=b){let s=p[(0,f.N0)(b+e,p.length)];n((0,S.Tx)({currentImage:t,selectedImage:s,face:m.eJ})),n((0,S.mp)({selectedImage:s}))}}let C=(0,i.jsxs)(i.Fragment,{children:[1===p.length&&(0,i.jsxs)("p",{className:"mpccard-counter text-center align-middle",children:["1 / ",p.length]}),p.length>1&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Z,{variant:"outline-info",className:"mpccard-counter-btn",onClick:x,children:[(null!=b?b:0)+1," / ",p.length]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(g.Z,{variant:"outline-primary",className:"prev",onClick:()=>k(-1),children:"❮"}),(0,i.jsx)(g.Z,{variant:"outline-primary",className:"next",onClick:()=>k(1),children:"❯"})]})]})]});return(0,i.jsxs)("div",{"data-testid":"common-cardback",children:[(0,i.jsx)(v.Ev,{imageIdentifier:t,previousImageIdentifier:y,nextImageIdentifier:Z,cardHeaderTitle:"Cardback",cardFooter:C,imageOnClick:d,noResultsFound:!1}),(0,i.jsx)(P,{searchResults:p,show:r,handleClose:h}),null!=t&&(0,i.jsx)(j.t,{imageIdentifier:t,show:s,handleClose:o})]})}var E=n(1205),q=n(7297),O=n(7125),z=n(5147),M=n(9521),R=n(2283),A=n(2512);function _(){let e=(0,q.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  cursor: pointer;\n"]);return _=function(){return e},e}let V=e=>e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused?"#2196f3":"#eeeeee",H=M.ZP.div.withConfig({componentId:"sc-d1c6a457-0"})(_(),e=>V(e));function Q(e){let{mimeTypes:t,fileUploadCallback:n,label:s}=e,l=(0,c.useCallback)(e=>{e.forEach(e=>{let t=new FileReader;t.onabort=()=>console.log("file reading was aborted"),t.onerror=()=>console.log("file reading has failed"),t.onload=()=>{n(t.result)},t.readAsText(e)})},[n]),{getRootProps:r,getInputProps:a,isFocused:o,isDragAccept:d,isDragReject:u}=(0,A.uI)({onDrop:l,accept:t,maxFiles:1});return(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)(H,{...r({isFocused:o,isDragAccept:d,isDragReject:u}),"aria-label":null!=s?s:"dropzone",children:[(0,i.jsx)("input",{...a()}),"Drag and drop a file here, or click to select a file."]})})}var L=n(4641);function U(){let e=(0,q.Z)(["\n  border-style: solid;\n  border-color: #333333;\n  border-width: 1px;\n"]);return U=function(){return e},e}function X(){let e=(0,q.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return X=function(){return e},e}function J(){let e=(0,q.Z)(["\n  width: 20%;\n  text-align: center;\n"]);return J=function(){return e},e}let W=(0,M.ZP)(z.Z).withConfig({componentId:"sc-b75c0195-0"})(U()),K=M.ZP.th.withConfig({componentId:"sc-b75c0195-1"})(X()),$=M.ZP.td.withConfig({componentId:"sc-b75c0195-2"})(J());function Y(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(W,{bordered:!0,children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)(K,{children:"Quantity"}),(0,i.jsx)(K,{children:"Front"}),(0,i.jsx)(K,{children:"Front ID"}),(0,i.jsx)(K,{children:"Back"}),(0,i.jsx)(K,{children:"Back ID"})]}),(0,i.jsx)("tbody",{children:[,,,].fill((0,i.jsx)("tr",{children:[,,,,,].fill((0,i.jsx)($,{}))}))})]}),"Where the columns follow these rules:",(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("b",{children:"Quantity"}),": The quantity to include of this row. Must be greater than 0. Can be blank — if blank, a quantity of 1 will be assumed."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("b",{children:"Front"}),": Search query for card front. ",(0,i.jsx)("b",{children:"Cannot be blank."})]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("b",{children:"Front ID"}),": If this image is in the front search results, it will be pre-selected. Can be blank."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("b",{children:"Front"}),": Search query for card back. Can be blank."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("b",{children:"Front ID"}),": If this image is in the back search results, it will be pre-selected. Can be blank."]})]})]})}function G(){return(0,i.jsxs)(W,{bordered:!0,children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)(K,{children:"Quantity"}),(0,i.jsx)(K,{children:"Front"}),(0,i.jsx)(K,{children:"Front ID"}),(0,i.jsx)(K,{children:"Back"}),(0,i.jsx)(K,{children:"Back ID"})]}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"2"})}),(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"island"})}),(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"1HsvTYs1..."})}),(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"forest"})}),(0,i.jsx)($,{})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"3"})}),(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"t:goblin"})}),(0,i.jsx)($,{}),(0,i.jsx)($,{}),(0,i.jsx)($,{children:(0,i.jsx)("code",{children:"1JtXL6Ca..."})})]})]})]})}function ee(){let e=(0,u.I0)(),t=(0,u.v9)(h.If),n=(0,R.l)(void 0,{skip:null==t}),[s,l]=(0,c.useState)(!1),r=()=>l(!1),a=()=>l(!0),o=(0,u.v9)(S.zO),d=t=>{var s;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let l="quantity",i="frontQuery",a="frontSelectedImage",c="backQuery",d="backSelectedImage",u=(0,O.Q)(t,{header:{Quantity:l,Front:i,"Front ID":a,Back:c,"Back ID":d}}),h=e=>{var t,n,s,r,o;let u="".concat(null!==(t=e[l])&&void 0!==t?t:""," ").concat(null!==(n=e[i])&&void 0!==n?n:"");return(null!==(s=e[a])&&void 0!==s?s:"").length>0&&(u+="".concat(m.A0).concat(e[a])),(null!==(r=e[c])&&void 0!==r?r:"").length>0&&(u+=" ".concat(m.M0," ").concat(e[c]),(null!==(o=e[d])&&void 0!==o?o:"").length>0&&(u+="".concat(m.A0).concat(e[d]))),u},x=(0,L.l_)(u.map(h),null!==(s=n.data)&&void 0!==s?s:{});e((0,S.r7)({members:(0,L.wt)(x,o)})),r()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(E.Z.Item,{onClick:a,children:[(0,i.jsx)("i",{className:"bi bi-file-earmark-spreadsheet",style:{paddingRight:"0.5em"}})," ","CSV"]}),(0,i.jsxs)(x.Z,{show:s,onHide:r,"data-testid":"import-csv",children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Add Cards — CSV"})}),(0,i.jsxs)(x.Z.Body,{children:[(0,i.jsxs)("p",{children:["Upload a CSV file of cards to add to the project. The file must"," ",(0,i.jsx)("b",{children:"exactly"})," match the following format:"]}),(0,i.jsx)(Y,{}),"For example:",(0,i.jsx)(G,{}),(0,i.jsx)("hr",{}),(0,i.jsx)(Q,{mimeTypes:{"text/csv":[".csv"]},fileUploadCallback:d,label:"import-csv"})]}),(0,i.jsx)(x.Z.Footer,{children:(0,i.jsx)(g.Z,{variant:"secondary",onClick:r,children:"Close"})})]})]})}(s=l||(l={})).quantity="Quantity",s.frontQuery="Front",s.frontSelectedImage="Front ID",s.backQuery="Back",s.backSelectedImage="Back ID";var et=n(2914);function en(){let e=(0,u.v9)(h.If),t=(0,R.cf)(void 0,{skip:null==e}),n=(0,R.l)(void 0,{skip:null==e}),s=(0,u.I0)(),[l,r]=(0,c.useState)(!1),a=()=>r(!1),o=()=>r(!0),[d,j]=(0,c.useState)(""),[f,v]=(0,c.useState)(""),p=(0,u.v9)(S.zO),b=e=>{let t=[];for(let n of[m.Zb,m.WU,m.dt])null!=e[n]&&t.push(e[n].map(e=>"".concat(Math.floor(3*Math.random())+1,"x ").concat(m.P$[n]).concat((0,L.GL)(e.name))).join("\n"));return t.join("\n\n")};(0,c.useEffect)(()=>{void 0!=t.data&&v(b(t.data))},[t.data]);let y=()=>{var e;let t=(0,L.ts)(d,null!==(e=n.data)&&void 0!==e?e:{});s((0,S.r7)({members:(0,L.wt)(t,p)})),a()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(E.Z.Item,{onClick:o,children:[(0,i.jsx)("i",{className:"bi bi-card-text",style:{paddingRight:"0.5em"}})," ","Text"]}),(0,i.jsxs)(x.Z,{show:l,onHide:a,onExited:()=>j(""),"data-testid":"import-text",children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Add Cards — Text"})}),(0,i.jsxs)(x.Z.Body,{children:[(0,i.jsxs)("p",{children:["Type the names of the cards you'd like to add to your order and hit ",(0,i.jsx)("b",{children:"Submit"}),". One card per line."]}),(0,i.jsxs)("p",{children:["Specify both front and back queries by separating them with"," ",(0,i.jsx)("code",{children:m.M0})," — for example,"," ",(0,i.jsxs)("code",{children:["4x goblin ",m.M0," ",m.P$[m.WU],"elf"]}),"."]}),(0,i.jsxs)("p",{children:["You may optionally specify the image ID to select with"," ",(0,i.jsx)("code",{children:m.A0})," — for example,"," ",(0,i.jsxs)("code",{children:["brainstorm",m.A0,"1c4M-sK9gd0Xju0NXCPtqeTW_DQTldVU5"]})]}),(0,i.jsx)("p",{children:"If you don't specify a back query and your front query is a double-faced card, we will automatically query the back for you."}),(0,i.jsx)(et.Z.Group,{className:"mb-3",children:(0,i.jsx)(et.Z.Control,{as:"textarea",rows:12,placeholder:f,required:!0,onChange:e=>j(e.target.value),value:d,"aria-label":"import-text"})})]}),(0,i.jsxs)(x.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,i.jsx)(g.Z,{variant:"primary",onClick:y,"aria-label":"import-text-submit",children:"Submit"})]})]})]})}var es=n(5305);function el(){var e,t;let n=(0,u.v9)(h.If),s=(0,R.l)(void 0,{skip:null==n}),l=(0,R.QA)(void 0,{skip:null==n}),r=(0,R.zr)(void 0,{skip:null==n}),a=(0,u.v9)(S.zO),o=(0,u.I0)(),[d,j]=(0,c.useState)(!1),[f,v]=(0,c.useState)(!1),p=()=>j(!1),b=()=>j(!0),[y,Z]=(0,c.useState)(""),[k,C]=R.gk.endpoints.queryImportSite.useLazyQuery(),I=(0,c.useCallback)(async()=>{let e=y.trim();if(e.length>0){var t,n;v(!0);let e=await k(y),l=(0,L.ts)(null!==(t=e.data)&&void 0!==t?t:"",null!==(n=s.data)&&void 0!==n?n:{});o((0,S.r7)({members:(0,L.wt)(l,a)})),p(),v(!1)}},[y]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(E.Z.Item,{onClick:b,children:[(0,i.jsx)("i",{className:"bi bi-link-45deg",style:{paddingRight:"0.5em"}})," ","URL"]}),(0,i.jsxs)(x.Z,{show:d,onHide:p,onExited:()=>Z(""),children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Add Cards — URL"})}),(0,i.jsxs)(x.Z.Body,{children:["Paste a link to a card list hosted on one of the below sites (not affiliated) to import the list into"," ",null!==(t=null===(e=r.data)||void 0===e?void 0:e.name)&&void 0!==t?t:m.vV,":",(0,i.jsx)("br",{}),null!=l.data?(0,i.jsx)("ul",{children:l.data.map(e=>(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:e.url,target:"_blank",children:e.name},e.name)},"".concat(e.name,"-row")))}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsx)(es.$,{}),(0,i.jsx)("br",{})]}),(0,i.jsx)(et.Z.Group,{className:"mb-3",children:(0,i.jsx)(et.Z.Control,{type:"url",required:!0,placeholder:"https://",onChange:e=>Z(e.target.value.trim()),value:y,disabled:f||null==l.data})})]}),(0,i.jsxs)(x.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:p,children:"Close"}),(0,i.jsx)(g.Z,{variant:"primary",onClick:async()=>{await I()},disabled:f||l.isFetching,children:"Submit"})]})]})]})}function ei(){let e=(0,u.I0)(),[t,n]=(0,c.useState)(!1),s=()=>n(!1),l=()=>n(!0),r=(0,u.v9)(S.sZ),a=(0,u.v9)(S.zO),[o,d]=(0,c.useState)(!1),h=t=>{var n,l,i,c,d;if("string"!=typeof t){alert("invalid CSV file uploaded");return}let u=new DOMParser,h=u.parseFromString(t,"application/xml"),x=h.getElementsByTagName("order")[0],j=x.getElementsByTagName("fronts")[0],g=x.getElementsByTagName("backs")[0],f=j.getElementsByTagName("card"),v=null!=g?g.getElementsByTagName("card"):void 0,p=null!==(l=null===(n=x.getElementsByTagName("cardback")[0])||void 0===n?void 0:n.textContent)&&void 0!==l?l:r,b=0,y=Array.from({length:m.Wn-a},()=>({front:null,back:null}));if(null!=v)for(let e of v){let t=null===(i=e.getElementsByTagName("slots")[0])||void 0===i?void 0:i.textContent;if(null==t)continue;let n=(0,L.XV)(null!==(c=e.getElementsByTagName("query")[0].textContent)&&void 0!==c?c:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;y[t].back={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},b=Math.max(b,t)})}for(let e of f){let t=e.getElementsByTagName("slots")[0].textContent;if(null==t)continue;let n=(0,L.XV)(null!==(d=e.getElementsByTagName("query")[0].textContent)&&void 0!==d?d:"");t.split(",").map(e=>parseInt(e)).forEach(t=>{var s;y[t].front={query:n,selectedImage:null!==(s=e.getElementsByTagName("id")[0].textContent)&&void 0!==s?s:void 0,selected:!1},null==y[t].back&&null!=p&&(y[t].back={query:{query:null,card_type:m.dt},selectedImage:p,selected:!1}),b=Math.max(b,t)})}e((0,S.r7)({members:y.slice(0,b+1)})),o&&null!=p&&e((0,S.mp)({selectedImage:p})),s()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(E.Z.Item,{onClick:l,children:[(0,i.jsx)("i",{className:"bi bi-file-code",style:{paddingRight:"0.5em"}})," ","XML"]}),(0,i.jsxs)(x.Z,{show:t,onHide:s,"data-testid":"import-xml",children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Add Cards — XML"})}),(0,i.jsxs)(x.Z.Body,{children:[(0,i.jsx)("p",{children:"Upload an XML file of cards to add to the project."}),(0,i.jsxs)("p",{children:["The ",m.vV," website can generate an XML file representing your project, and the ",m.vV," desktop tool which auto-fills your order into"," ",(0,i.jsx)("a",{href:m.vs,target:"_blank",children:m.Fo})," ","expects a file in this format."]}),(0,i.jsx)(y.ZP,{onClick:()=>d(!o),on:"Update Project with XML Cardback",onClassName:"flex-centre",off:"Retain Selected Cardback",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:o}),(0,i.jsx)("hr",{}),(0,i.jsx)(Q,{mimeTypes:{"text/xml":[".xml"]},fileUploadCallback:h,label:"import-xml"})]}),(0,i.jsx)(x.Z.Footer,{children:(0,i.jsx)(g.Z,{variant:"secondary",onClick:s,children:"Close"})})]})]})}function er(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(E.Z,{children:[(0,i.jsx)("div",{className:"d-grid gap-0",children:(0,i.jsxs)(E.Z.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,i.jsx)("i",{className:"bi bi-plus-circle",style:{paddingRight:"0.5em"}})," ","Add Cards"]})}),(0,i.jsxs)(E.Z.Menu,{children:[(0,i.jsx)(en,{}),(0,i.jsx)(ei,{}),(0,i.jsx)(ee,{}),(0,i.jsx)(el,{})]})]})})}var ea=n(8102),ec=n(8375),eo=n(6728),ed=n(3489);function eu(e){var t,n,s,l,r,a;let{slots:o}=e,d=(0,u.I0)(),[h,x]=(0,c.useState)(!1),j=()=>x(!1),g=()=>x(!0),f=e=>{d((0,S.ND)({selectedImage:e,slots:o})),j()},v=(0,u.v9)(e=>o.length>0&&null!=o[0]?e.project.members[o[0][1]][o[0][0]].query:null),p=(0,u.v9)(e=>o.every(l=>{var i,r,a,c,o,d;let[u,h]=l;return(null==v?void 0:v.query)==null&&(null===(i=(null!==(t=e.project.members[h])&&void 0!==t?t:{})[u])||void 0===i?void 0:null===(r=i.query)||void 0===r?void 0:r.query)==null||null!=v&&(null===(a=(null!==(n=e.project.members[h])&&void 0!==n?n:{})[u])||void 0===a?void 0:null===(c=a.query)||void 0===c?void 0:c.query)==v.query&&(null===(o=(null!==(s=e.project.members[h])&&void 0!==s?s:{})[u])||void 0===o?void 0:null===(d=o.query)||void 0===d?void 0:d.card_type)==v.card_type})),b=null!==(l=(0,u.v9)(e=>e.cardbacks.cardbacks))&&void 0!==l?l:[],y=(0,u.v9)(e=>(null==v?void 0:v.query)!=null?null!==(a=(null!==(r=e.searchResults.searchResults[v.query])&&void 0!==r?r:{})[v.card_type])&&void 0!==a?a:[]:o.length>0&&o[0][0]===m.eJ?b:[]);return(0,i.jsxs)(i.Fragment,{children:[y.length>1&&p&&(0,i.jsxs)(E.Z.Item,{className:"text-decoration-none",onClick:g,children:[(0,i.jsx)("i",{className:"bi bi-image",style:{paddingRight:"0.5em"}})," ","Change Version"]}),(0,i.jsx)(I,{testId:"bulk-grid-selector",imageIdentifiers:y,show:h,handleClose:j,onClick:f})]})}function eh(e){var t;let{slots:n}=e,s=(0,u.I0)(),[l,r]=(0,c.useState)(!1),a=()=>r(!1),o=()=>r(!0),[d,j]=(0,c.useState)(""),f=e=>{e.preventDefault(),s((0,S.qe)({query:d,slots:n})),a()},v=(0,u.v9)(h.If),p=(0,R.cf)(void 0,{skip:null==v}),b=null!=p.data&&null!=(null!==(t=p.data)&&void 0!==t?t:{})[m.Zb][0]?p.data[m.Zb][0].name:"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(E.Z.Item,{className:"text-decoration-none",onClick:o,children:[(0,i.jsx)("i",{className:"bi bi-arrow-repeat",style:{paddingRight:"0.5em"}})," ","Change Query"]}),(0,i.jsxs)(x.Z,{show:l,onHide:a,onExited:()=>j(""),children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Change Query"})}),(0,i.jsxs)(x.Z.Body,{children:["Type in a query to update the selected images with and hit"," ",(0,i.jsx)("b",{children:"Submit"}),".",(0,i.jsx)("hr",{}),(0,i.jsx)(et.Z,{onSubmit:f,id:"changeSelectedImageQueriesForm",children:(0,i.jsx)(et.Z.Group,{className:"mb-3",children:(0,i.jsx)(et.Z.Control,{type:"text",placeholder:b,onChange:e=>j(e.target.value),value:d,"aria-label":"change-selected-image-queries-text"})})})]}),(0,i.jsxs)(x.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,i.jsx)(g.Z,{type:"submit",form:"changeSelectedImageQueriesForm",variant:"primary","aria-label":"change-selected-image-queries-submit",children:"Submit"})]})]})]})}function ex(e){let{slots:t}=e,n=(0,u.I0)(),s=t.map(e=>{let[t,n]=e;return n}),l=()=>n((0,S.uA)({slots:s}));return(0,i.jsxs)(E.Z.Item,{onClick:l,className:"text-decoration-none",children:[(0,i.jsx)("i",{className:"bi bi-x-circle",style:{paddingRight:"0.5em"}})," ","Delete Slots"]})}function em(){let e=(0,u.v9)(S.NV),t=(0,u.I0)(),n=()=>t((0,S.fP)({selectedStatus:!1,slots:e}));return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ec.Z,{variant:"primary",style:{display:e.length>0?"":"none"},children:(0,i.jsxs)(b.Z,{direction:"horizontal",gap:2,children:[e.length," image",1!=e.length&&"s"," selected.",(0,i.jsx)(g.Z,{onClick:n,className:"ms-auto","data-testid":"clear-selection",children:(0,i.jsx)("i",{className:"bi bi-x-lg"})}),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(E.Z.Toggle,{variant:"secondary",children:"Modify"}),(0,i.jsxs)(E.Z.Menu,{children:[(0,i.jsx)(eu,{slots:e}),(0,i.jsx)(eh,{slots:e}),(0,i.jsx)(ex,{slots:e})]})]})]})})})}function ej(){let e=(0,q.Z)(["\n  font-size 1.25rem\n"]);return ej=function(){return e},e}let eg=M.ZP.i.withConfig({componentId:"sc-74efdddd-0"})(ej());function ef(){let e=(0,u.v9)(S.eY),t=(0,u.v9)(S.Ed),n=(0,u.v9)(S.zO),s=(0,u.v9)(S.p4),l=()=>(0,ea.saveAs)(new Blob([e],{type:"text/xml;charset=utf-8"}),"cards.xml"),r=()=>(0,ea.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"decklist.txt");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:"Edit MPC Project"}),(0,i.jsx)(em,{}),(0,i.jsxs)(ec.Z,{variant:"secondary",children:["Your project contains ",(0,i.jsx)("b",{children:n})," card",1!==n&&"s",", belongs in the MPC bracket of up to"," ",(0,i.jsx)("b",{children:(0,f.wk)(n)})," cards, and is"," ",(0,i.jsx)("b",{children:(0,f.K)(s,0)})," in total.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),n>=m.Wn&&(0,i.jsx)(ec.Z,{variant:"warning",children:"You've reached the maximum project size!"}),(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(o.Z,{xs:3,children:(0,i.jsx)("div",{className:"d-grid gap-0",children:(0,i.jsx)(eo.Z,{placement:"top",overlay:e=>(0,i.jsx)(ed.Z,{...e,children:"Save Project"}),children:(0,i.jsx)(g.Z,{variant:"outline-light",children:(0,i.jsx)(eg,{className:"bi bi-device-ssd"})})})})}),(0,i.jsx)(o.Z,{xs:3,children:(0,i.jsx)("div",{className:"d-grid gap-0",children:(0,i.jsx)(eo.Z,{placement:"top",overlay:e=>(0,i.jsx)(ed.Z,{...e,children:"Download XML"}),children:(0,i.jsx)(g.Z,{variant:"outline-light",onClick:l,"data-testid":"download-xml",children:(0,i.jsx)(eg,{className:"bi bi-file-earmark-arrow-down"})})})})}),(0,i.jsx)(o.Z,{xs:3,children:(0,i.jsx)("div",{className:"d-grid gap-0",children:(0,i.jsx)(eo.Z,{placement:"top",overlay:e=>(0,i.jsx)(ed.Z,{...e,children:"Download Decklist"}),children:(0,i.jsx)(g.Z,{variant:"outline-light",onClick:r,"data-testid":"download-decklist",children:(0,i.jsx)(eg,{className:"bi bi-file-text"})})})})}),(0,i.jsx)(o.Z,{xs:3,children:(0,i.jsx)("div",{className:"d-grid gap-0",children:(0,i.jsx)(eo.Z,{placement:"top",overlay:e=>(0,i.jsx)(ed.Z,{...e,children:"Download Images"}),children:(0,i.jsx)(g.Z,{variant:"outline-light",children:(0,i.jsx)(eg,{className:"bi bi-images"})})})})})]})]})]})}var ev=n(5582),ep=n(975);function eb(e){let{filterSettings:t,setFilterSettings:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h5",{children:"Filters"}),"Configure the DPI (dots per inch) and file size ranges the search results must be within.",(0,i.jsx)("br",{}),"At a fixed physical size, a higher DPI yields a higher resolution print.",(0,i.jsx)("br",{}),"MakePlayingCards prints cards up to ",(0,i.jsx)("b",{children:"800 DPI"}),", meaning an 800 DPI print and a 1200 DPI print will ",(0,i.jsx)("b",{children:"look the same"}),".",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsxs)(d.Z,{children:[(0,i.jsxs)(o.Z,{xs:6,children:[(0,i.jsxs)(et.Z.Label,{children:["Minimum: ",(0,i.jsxs)("b",{children:[t.minimumDPI," DPI"]})]}),(0,i.jsx)(et.Z.Range,{defaultValue:t.minimumDPI,min:m.sL,max:m.gx,step:m.Ox,onChange:e=>{n({...t,minimumDPI:parseInt(e.target.value)})}})]}),(0,i.jsxs)(o.Z,{xs:6,children:[(0,i.jsxs)(et.Z.Label,{children:["Maximum: ",(0,i.jsxs)("b",{children:[t.maximumDPI," DPI"]})]}),(0,i.jsx)(et.Z.Range,{defaultValue:t.maximumDPI,min:m.sL,max:m.gx,step:m.Ox,onChange:e=>{n({...t,maximumDPI:parseInt(e.target.value)})}})]})]}),(0,i.jsxs)(et.Z.Label,{children:["File size: Up to ",(0,i.jsxs)("b",{children:[t.maximumSize," MB"]})]}),(0,i.jsx)(et.Z.Range,{defaultValue:t.maximumSize,min:0,max:m.bD,step:m.B9,onChange:e=>{n({...t,maximumSize:parseInt(e.target.value)})}})]})}var ey=n(5749);function eZ(e){let{searchTypeSettings:t,setSearchTypeSettings:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h5",{children:"Search Type"}),"Configure how closely the search results should match your query.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(y.ZP,{onClick:()=>n({...t,fuzzySearch:!t.fuzzySearch}),on:"Fuzzy (Forgiving) Search",onClassName:"flex-centre",off:"Precise Search",offClassName:"flex-centre",onstyle:"success",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:t.fuzzySearch})]})}var ek=n(8627);function eC(e){let{sourceSettings:t,setSourceSettings:n}=e,s=(0,u.v9)(ev.TK),l=(0,c.useCallback)((e,s)=>{var l;let i=[...null!==(l=t.sources)&&void 0!==l?l:[]],[r]=i.splice(e,1);i.splice(s,0,r),n({sources:i})},[t.sources,n]),r=e=>{null!=e.destination&&l(e.source.index,e.destination.index)},a=(0,c.useCallback)(e=>{var s;let l=[...null!==(s=t.sources)&&void 0!==s?s:[]];l[e]=[l[e][0],!l[e][1]],n({sources:l})},[t.sources,n]),o=(0,c.useCallback)(()=>{var e;let s=null!==(e=t.sources)&&void 0!==e?e:[],l=!s.some(e=>e[1]),i=s.map(e=>[e[0],l]);n({sources:i})},[t.sources,n]),d=(0,i.jsx)(es.$,{});if(null!=s){var h;let e=(null!==(h=t.sources)&&void 0!==h?h:[]).map((e,n)=>(0,i.jsx)(ek._l,{draggableId:e[0].toString(),index:n,children:(r,c)=>(0,i.jsxs)("tr",{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,children:[(0,i.jsx)("td",{style:{verticalAlign:"middle",width:"20%"},children:(0,i.jsx)(y.ZP,{on:"On",onClassName:"flex-centre prevent-select",off:"Off",offClassName:"flex-centre prevent-select",onstyle:"primary",offstyle:"secondary",size:"md",width:"80%",height:m.B4+"px",active:e[1],onClick:()=>a(n)},"".concat(e[0],"-toggle"))},"".concat(e[0],"-toggle-column")),(0,i.jsx)("td",{style:{verticalAlign:"middle",width:"40%"},children:null!=s[e[0]].external_link?(0,i.jsx)("a",{href:s[e[0]].external_link,target:"_blank",children:s[e[0]].name}):(0,i.jsx)("a",{children:s[e[0]].name})},"".concat(e[0],"-name-column")),(0,i.jsx)("td",{className:"prevent-select",style:{verticalAlign:"middle",width:"30%"},children:s[e[0]].source_type},"".concat(e[0],"-type-column")),(0,i.jsxs)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:[(0,i.jsx)("div",{children:(0,i.jsx)("i",{className:"bi bi-chevron-double-up",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{l(n,0)}},"".concat(e[0],"-up-button"))}),(0,i.jsx)("div",{children:(0,i.jsx)("i",{className:"bi bi-chevron-double-down",style:{fontSize:"1em",cursor:"pointer"},onClick:()=>{var e;l(n,(null!==(e=t.sources)&&void 0!==e?e:[]).length-1)}},"".concat(e[0],"-down-button"))})]},"".concat(e[0],"-updown-button-column")),(0,i.jsx)("td",{style:{verticalAlign:"middle",width:"5%",textAlign:"center"},children:(0,i.jsx)("i",{className:"bi bi-grip-horizontal",style:{fontSize:"2em"}},"".concat(e[0],"-drag-button"))},"".concat(e[0],"-drag-button-column"))]},"".concat(e[0],"-row"))},e[0]));d=(0,i.jsx)(ek.Z5,{onDragEnd:r,children:(0,i.jsx)(ek.bK,{droppableId:"source-order",children:(t,n)=>(0,i.jsx)("div",{style:{height:59*e.length+m.B4+"px"},children:(0,i.jsxs)(z.Z,{ref:t.innerRef,style:{tableLayout:"auto"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{height:m.B4+"px"},onClick:o,children:[(0,i.jsx)("th",{className:"prevent-select",children:"Enabled"}),(0,i.jsx)("th",{className:"prevent-select",children:"Source Name"}),(0,i.jsx)("th",{className:"prevent-select",children:"Source Type"}),(0,i.jsx)("th",{}),(0,i.jsx)("th",{})]})}),(0,i.jsxs)("tbody",{children:[e,t.placeholder]})]})})})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h5",{children:"Sources"}),"Configure the sources to include in the search results.",(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("b",{children:"Drag & drop"})," them to change the order they're searched in."]}),(0,i.jsxs)("li",{children:["Use the ",(0,i.jsx)("b",{children:"arrows"})," to send a source to the top or bottom."]}),(0,i.jsxs)("li",{children:["Click the ",(0,i.jsx)("b",{children:"table header"})," to enable or disable all sources."]})]}),d]})}function eI(){let e=(0,u.I0)(),[t,n]=(0,c.useState)(!1),s=(0,u.v9)(ey.xN),[l,r]=(0,c.useState)(s.searchTypeSettings),[a,o]=(0,c.useState)(s.sourceSettings),[d,h]=(0,c.useState)(s.filterSettings),m=(0,u.v9)(ev.TK);(0,c.useEffect)(()=>{if(null!=m){let t=(0,ep.cI)(m);e((0,ey.Fg)(t.searchTypeSettings)),e((0,ey.Ph)(t.sourceSettings)),e((0,ey._E)(t.filterSettings))}},[e,m]);let j=()=>n(!1),f=(0,c.useCallback)(()=>{r(s.searchTypeSettings),h(s.filterSettings),o(s.sourceSettings),n(!0)},[s]),v=()=>{(0,ep.Wm)({searchTypeSettings:l,sourceSettings:a,filterSettings:d}),e((0,ey.Fg)(l)),e((0,ey.Ph)(a)),e((0,ey._E)(d)),j()};return(0,i.jsxs)("div",{className:"d-grid gap-0",children:[(0,i.jsxs)(g.Z,{variant:"primary",onClick:f,children:[(0,i.jsx)("i",{className:"bi bi-gear",style:{paddingRight:"0.5em"}}),"Search Settings"]}),(0,i.jsxs)(x.Z,{show:t,onHide:v,"data-testid":"search-settings",children:[(0,i.jsx)(x.Z.Header,{closeButton:!0,children:(0,i.jsx)(x.Z.Title,{children:"Search Settings"})}),(0,i.jsxs)(x.Z.Body,{children:[(0,i.jsx)(eZ,{searchTypeSettings:l,setSearchTypeSettings:r}),(0,i.jsx)("hr",{}),(0,i.jsx)(eb,{filterSettings:d,setFilterSettings:h}),(0,i.jsx)("hr",{}),(0,i.jsx)(eC,{sourceSettings:a,setSourceSettings:o})]}),(0,i.jsxs)(x.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:j,children:"Close Without Saving"}),(0,i.jsx)(g.Z,{variant:"primary",onClick:v,children:"Save Changes"})]})]})]})}var eS=n(1110),eN=n(5617);function ew(){let e=(0,u.I0)();return(0,i.jsx)(y.ZP,{onClick:()=>e((0,Z.$3)()),on:"Switch to Backs",onClassName:"flex-centre",off:"Switch to Fronts",offClassName:"flex-centre",onstyle:"info",offstyle:"info",width:"100%",size:"md",height:m.B4+"px",active:(0,u.v9)(e=>e.viewSettings.frontsVisible)})}var eF=function(){var e;let t=(0,u.v9)(h.If),n=(0,u.I0)(),s=null!==(e=(0,u.v9)(e=>e.project.cardback))&&void 0!==e?e:void 0;return(0,c.useEffect)(()=>{n((0,ev.$)())},[n]),(0,i.jsx)(i.Fragment,{children:null!=t?(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(o.Z,{lg:8,md:8,sm:6,xs:6,children:(0,i.jsx)(B,{})}),(0,i.jsx)(o.Z,{lg:4,md:4,sm:6,xs:6,style:{zIndex:1},children:(0,i.jsxs)("div",{className:"sticky-top sticky-offset g-0",style:{position:"sticky"},children:[(0,i.jsx)(eS.Z,{children:(0,i.jsx)(ef,{})}),(0,i.jsx)(d.Z,{className:"g-0",children:(0,i.jsx)(ew,{})}),(0,i.jsxs)(d.Z,{className:"g-0 py-3",children:[(0,i.jsx)(o.Z,{lg:6,md:12,sm:12,xs:12,children:(0,i.jsx)(eI,{})}),(0,i.jsx)(o.Z,{lg:6,md:12,sm:12,xs:12,children:(0,i.jsx)(er,{})})]}),(0,i.jsx)(o.Z,{className:"g-0",lg:{span:8,offset:2},md:12,children:(0,i.jsx)(D,{selectedImage:s})})]})})]}):(0,i.jsx)(eN.O,{})})},eT=n(4353);function eB(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:"Edit MPC Project"})," ",(0,i.jsx)("meta",{name:"description",content:"Edit MPC Project"})]}),(0,i.jsx)(eT.Z,{children:(0,i.jsx)(eF,{})})]})}n(1351)}},function(e){e.O(0,[62,868,536,353,789,774,888,179],function(){return e(e.s=1832)}),_N_E=e.O()}]);