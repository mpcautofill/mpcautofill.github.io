try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fb94d3b2-edbf-48dc-aadd-26b5f7cc8475",e._sentryDebugIdIdentifier="sentry-dbid-fb94d3b2-edbf-48dc-aadd-26b5f7cc8475")}catch(e){}!function(){var e,t,s,n,r,a,i={7209:function(e,t,s){"use strict";var n,r,a,i,o,l,d,c,u,p,y=s(5679),j=s(4375);function m(e){return{arrayItems:e}}function g(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return{unionMembers:t}}function h(e,t){return{props:e,additional:t}}function f(e){return{props:[],additional:e}}function v(e){return{ref:e}}s(9742),(n=l||(l={})).Card="CARD",n.Cardback="CARDBACK",n.Token="TOKEN",(r=d||(d={})).AwsS3="AWS S3",r.GoogleDrive="Google Drive",r.LocalFile="Local File",(a=c||(c={})).DateCreatedAscending="dateCreatedAscending",a.DateCreatedDescending="dateCreatedDescending",a.DateModifiedAscending="dateModifiedAscending",a.DateModifiedDescending="dateModifiedDescending",a.NameAscending="nameAscending",a.NameDescending="nameDescending",h([{json:"searchSettings",js:"searchSettings",typ:v("SearchSettings")}],!1),h([{json:"filterSettings",js:"filterSettings",typ:v("FilterSettings")},{json:"searchTypeSettings",js:"searchTypeSettings",typ:v("SearchTypeSettings")},{json:"sourceSettings",js:"sourceSettings",typ:v("SourceSettings")}],!1),h([{json:"excludesTags",js:"excludesTags",typ:m("")},{json:"includesTags",js:"includesTags",typ:m("")},{json:"languages",js:"languages",typ:m("")},{json:"maximumDPI",js:"maximumDPI",typ:0},{json:"maximumSize",js:"maximumSize",typ:0},{json:"minimumDPI",js:"minimumDPI",typ:0}],!1),h([{json:"filterCardbacks",js:"filterCardbacks",typ:!0},{json:"fuzzySearch",js:"fuzzySearch",typ:!0}],!1),h([{json:"sources",js:"sources",typ:m(m(g(!0,0)))}],!1),h([{json:"cardbacks",js:"cardbacks",typ:m("")}],!1),h([{json:"cardIdentifiers",js:"cardIdentifiers",typ:m("")}],!1),h([{json:"results",js:"results",typ:f(v("Card"))}],!1),h([{json:"cardType",js:"cardType",typ:v("CardType")},{json:"dateCreated",js:"dateCreated",typ:""},{json:"dateModified",js:"dateModified",typ:""},{json:"dpi",js:"dpi",typ:0},{json:"extension",js:"extension",typ:""},{json:"identifier",js:"identifier",typ:""},{json:"language",js:"language",typ:""},{json:"mediumThumbnailUrl",js:"mediumThumbnailUrl",typ:""},{json:"name",js:"name",typ:""},{json:"priority",js:"priority",typ:0},{json:"searchq",js:"searchq",typ:""},{json:"size",js:"size",typ:0},{json:"smallThumbnailUrl",js:"smallThumbnailUrl",typ:""},{json:"source",js:"source",typ:""},{json:"sourceExternalLink",js:"sourceExternalLink",typ:g(void 0,"")},{json:"sourceId",js:"sourceId",typ:0},{json:"sourceName",js:"sourceName",typ:""},{json:"sourceType",js:"sourceType",typ:g(void 0,v("SourceType"))},{json:"sourceVerbose",js:"sourceVerbose",typ:""},{json:"tags",js:"tags",typ:m("")}],!1),h([{json:"cardCountByType",js:"cardCountByType",typ:f(0)},{json:"sources",js:"sources",typ:m(v("SourceContribution"))},{json:"totalDatabaseSize",js:"totalDatabaseSize",typ:0}],!1),h([{json:"avgdpi",js:"avgdpi",typ:""},{json:"description",js:"description",typ:""},{json:"externalLink",js:"externalLink",typ:g(void 0,"")},{json:"name",js:"name",typ:""},{json:"qtyCardbacks",js:"qtyCardbacks",typ:""},{json:"qtyCards",js:"qtyCards",typ:""},{json:"qtyTokens",js:"qtyTokens",typ:""},{json:"size",js:"size",typ:""},{json:"sourceType",js:"sourceType",typ:v("SourceType")}],!1),h([{json:"dfcPairs",js:"dfcPairs",typ:f("")}],!1),h([{json:"queries",js:"queries",typ:m(v("SearchQuery"))},{json:"searchSettings",js:"searchSettings",typ:v("SearchSettings")}],!1),h([{json:"cardType",js:"cardType",typ:v("CardType")},{json:"query",js:"query",typ:g(null,"")}],!1),h([{json:"results",js:"results",typ:f(f(m("")))}],!1),h([{json:"errors",js:"errors",typ:g(void 0,m(f("any")))},{json:"message",js:"message",typ:g(void 0,"")},{json:"name",js:"name",typ:""}],!1),h([{json:"cardTypes",js:"cardTypes",typ:m(v("CardType"))},{json:"pageSize",js:"pageSize",typ:0},{json:"pageStart",js:"pageStart",typ:0},{json:"query",js:"query",typ:g(null,"")},{json:"searchSettings",js:"searchSettings",typ:v("SearchSettings")},{json:"sortBy",js:"sortBy",typ:v("SortBy")}],!1),h([{json:"cards",js:"cards",typ:m(v("Card"))},{json:"count",js:"count",typ:0}],!1),h([{json:"url",js:"url",typ:""}],!1),h([{json:"cards",js:"cards",typ:""}],!1),h([{json:"importSites",js:"importSites",typ:m(v("ImportSite"))}],!1),h([{json:"name",js:"name",typ:""},{json:"url",js:"url",typ:""}],!1),h([{json:"info",js:"info",typ:v("Info")}],!1),h([{json:"description",js:"description",typ:g(null,"")},{json:"discord",js:"discord",typ:g(null,"")},{json:"email",js:"email",typ:g(null,"")},{json:"name",js:"name",typ:g(null,"")},{json:"reddit",js:"reddit",typ:g(null,"")}],!1),h([{json:"languages",js:"languages",typ:m(v("Language"))}],!1),h([{json:"code",js:"code",typ:""},{json:"name",js:"name",typ:""}],!1),h([{json:"results",js:"results",typ:f(v("NewCardsFirstPage"))}],!1),h([{json:"cards",js:"cards",typ:m(v("Card"))},{json:"hits",js:"hits",typ:0},{json:"pages",js:"pages",typ:0},{json:"source",js:"source",typ:v("Source")}],!1),h([{json:"description",js:"description",typ:""},{json:"externalLink",js:"externalLink",typ:g(void 0,"")},{json:"key",js:"key",typ:""},{json:"name",js:"name",typ:""},{json:"pk",js:"pk",typ:0},{json:"sourceType",js:"sourceType",typ:v("SourceType")}],!1),h([{json:"cards",js:"cards",typ:m(v("Card"))}],!1),h([{json:"patreon",js:"patreon",typ:v("Patreon")}],!1),h([{json:"campaign",js:"campaign",typ:g(v("Campaign"),null)},{json:"members",js:"members",typ:m(v("Supporter"))},{json:"tiers",js:"tiers",typ:g(f(v("SupporterTier")),null)},{json:"url",js:"url",typ:g(null,"")}],!1),h([{json:"about",js:"about",typ:""},{json:"id",js:"id",typ:""}],!1),h([{json:"date",js:"date",typ:""},{json:"name",js:"name",typ:""},{json:"tier",js:"tier",typ:""},{json:"usd",js:"usd",typ:3.14}],!1),h([{json:"description",js:"description",typ:""},{json:"title",js:"title",typ:""},{json:"usd",js:"usd",typ:3.14}],!1),h([{json:"cards",js:"cards",typ:v("Cards")}],"any"),h([{json:"CARD",js:"CARD",typ:m(v("Card"))},{json:"CARDBACK",js:"CARDBACK",typ:m(v("Card"))},{json:"TOKEN",js:"TOKEN",typ:m(v("Card"))}],"any"),h([{json:"online",js:"online",typ:!0}],!1),h([{json:"results",js:"results",typ:f(v("Source"))}],!1),h([{json:"tags",js:"tags",typ:m(v("Tag"))}],!1),h([{json:"aliases",js:"aliases",typ:g(void 0,m(""))},{json:"children",js:"children",typ:m(v("ChildElement"))},{json:"isEnabledByDefault",js:"isEnabledByDefault",typ:g(void 0,!0)},{json:"name",js:"name",typ:""},{json:"parent",js:"parent",typ:g(null,"")}],!1),h([{json:"aliases",js:"aliases",typ:g(void 0,m(""))},{json:"children",js:"children",typ:m(v("ChildElement"))},{json:"isEnabledByDefault",js:"isEnabledByDefault",typ:g(void 0,!0)},{json:"name",js:"name",typ:""},{json:"parent",js:"parent",typ:g(null,"")}],!1);let S=l.Card,T={"":S,b:l.Cardback,t:l.Token};Object.fromEntries(Object.keys(T).map(e=>[T[e],e.length>0?e+":":e]));let b=[18,36,55,72,90,108,126,144,162,180,198,216,234,396,504,612];function C(e){return e.replaceAll(/ +(?= )/g,"").trim()}b[b.length-1],(i=u||(u={})).BackendSpecific="backendSpecific",i.SearchResults="searchResults",i.SampleCards="sampleCards",(o=p||(p={})).quantity="Quantity",o.frontQuery="Front",o.frontSelectedImage="Front ID",o.backQuery="Back",o.backSelectedImage="Back ID";let x=e=>e.replace(/^(.+?)(?:\..+)?$/,"$1"),D=e=>C(e.toLowerCase().replaceAll(/[\(\[].*?[\)\]]/g,"").replace("-"," ").replace(" the "," ").replace("â€™","'").replaceAll(/[!"#\$%&'\(\)\*\+,-\.\/:;<=>\?@\[\]\^_`{\|}~\/]/g,"").replaceAll(/[0123456789]/g,"").replaceAll(/^the (.*$)/g,"$1").normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"")),k=e=>{let t=[...e.matchAll(/^(?:\{(.+)\} )?(.*?)$/g)][0];return[t[1],t[2]]};var I=s(9119),F=s(8327),w=s(5007);w.I0.withTypes(),w.v9.withTypes(),w.oR.withTypes();let A=(0,F.wc)({creators:{asyncThunk:F.eU}});F.hg.withTypes();let z={id:"string",name:"string",searchq:"string",cardType:"enum",extension:"enum",language:"enum",tags:"enum[]",dpi:"number",size:"number"};function L(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{searchTypeSettings:{fuzzySearch:t,filterCardbacks:!1},sourceSettings:{sources:Object.values(e).map(e=>[e.pk,!0])},filterSettings:{minimumDPI:0,maximumDPI:1500,maximumSize:30,languages:[],includesTags:[],excludesTags:["NSFW"]}}}let O=A({name:"searchSettings",initialState:L({}),reducers:{setSearchTypeSettings:(e,t)=>{e.searchTypeSettings=t.payload},setSourceSettings:(e,t)=>{e.sourceSettings=t.payload},setFilterSettings:(e,t)=>{e.filterSettings=t.payload}}}),{setSearchTypeSettings:P,setSourceSettings:q,setFilterSettings:E}=O.actions;O.reducer,(0,I.P1)(e=>e.searchSettings.sourceSettings.sources,e=>null!=e);var N=s(4339);let H=(e,t)=>{if(!e)return["",new Set];let s=new Set,n=Array.from(e.matchAll(/\(([^\(\)]+)\)|\[([^\[\]]+)\]/g)).map(e=>void 0!==e[1]?e[1]:e[2]),r=e;for(let e of n)for(let n of e.split(",").map(e=>e.trim())){let e=n.toLowerCase(),i=null;if(t.has(e))i=t.get(e);else for(let s of t.values()){var a;if(null===(a=s.aliases)||void 0===a?void 0:a.map(e=>e.toLowerCase()).includes(e)){i=s;break}}if(null===i)continue;s.add(i.name);let o=i;for(;null!==o.parent;){s.add(o.parent);let e=t.get(o.parent);if(e)o=e;else break}let l=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");for(;;){let e=new RegExp("\\(.*?(".concat(l,",? *).*?\\)|\\[.*?(").concat(l,",? *).*?\\]")),t=r.match(e);if(!t)break;for(let e=1;e<t.length;e++)if(void 0!==t[e]){let s=t[0],n=t[e],a=t.index+s.indexOf(n),i=a+n.length;r=r.slice(0,a)+r.slice(i);break}}}for(let[e,t]of[["( )",""],["()",""],["[ ]",""],["[]",""],["[, ","["],[", ]","]"],["(, ","("],[", )",")"]])r=r.replaceAll(e,t);return[C(r),s]};class B{unpackName(e){let[t,s]=k(this.name),[n,r]=H(s,e);return{language:t,name:n,tags:r}}getLanguage(e){let{language:t}=this.unpackName(e);return void 0===this.parent?t:null!=t?t:this.parent.getLanguage(e)}getTags(e){let{tags:t}=this.unpackName(e);return void 0===this.parent?t:t.union(this.parent.getTags(e))}getFullPath(e){let{name:t}=this.unpackName(e);return void 0===this.parent?[t]:[...this.parent.getFullPath(e),t]}constructor(e,t,s){this.params=e,this.name=t,this.parent=s}}class R{unpackName(e){let[t,s]=k(this.name),[n,r]=H(s,e);return{language:null!=t?t:this.folder.getLanguage(e),name:n,tags:r.union(this.folder.getTags(e))}}getCardType(){return this.folder.name.toLowerCase().startsWith("cardback")?l.Cardback:this.folder.name.toLowerCase().startsWith("token")?l.Token:l.Card}async getFullPath(e){return[...this.folder.getFullPath(e),this.params.sourceType===d.LocalFile?this.params.fileHandle.name:this.params.identifier]}async getImageId(e){if(this.params.sourceType===d.LocalFile){let t=await this.getFullPath(e);return t?"./".concat(t.join("/")):Math.random().toString()}throw Error("getImageId not implemented yet for other source types")}async getOramaCardDocument(e){let{language:t,name:s,tags:n}=this.unpackName(e);return{id:await this.getImageId(e),cardType:this.getCardType(),name:s,searchq:D(this.name),source:this.folder.name,dpi:10*Math.round(300*this.height/1110/10),extension:this.extension,size:this.size,params:this.params,language:null!=t?t:"English",tags:Array.from(n),lastModified:this.modifiedTime}}constructor(e,t,s,n,r,a,i){this.params=e,this.name=t,this.extension=s,this.size=n,this.modifiedTime=r,this.height=a,this.folder=i}}class M{async exploreFolder(e){let t=[e],s=[];for(;t.length>0;){let e=t.pop();if(void 0!==e){let n=await this.getAllImagesInsideFolder(e),r=await this.getAllFoldersInsideFolder(e);s.push(...n),t.push(...r.filter(e=>!e.name.startsWith("!")))}else break}return s}async indexFolder(e,t){let s=(0,y.Ue)({schema:z}),n=new Map((null!=t?t:[]).map(e=>[e.name.toLowerCase(),e])),r=await Promise.all((await this.exploreFolder(e)).map(e=>e.getOramaCardDocument(n)));return(0,y.eB)(s,r),{oramaDb:s,size:r.length}}}class _ extends M{getSourceType(){return d.LocalFile}async getAllFoldersInsideFolder(e){let t=[];if(e.params.sourceType===this.getSourceType())for await(let[s,n]of e.params.fileHandle)n instanceof FileSystemDirectoryHandle&&t.push(new B({fileHandle:n,identifier:void 0,sourceType:e.params.sourceType},n.name,e));return t}async getAllImagesInsideFolder(e){let t=[];if(e.params.sourceType===this.getSourceType()){for await(let[s,n]of e.params.fileHandle)if(n instanceof FileSystemFileHandle){let s=await n.getFile(),r=await (0,N.z)(s.stream());void 0!==r&&t.push(new R({fileHandle:n,identifier:void 0,sourceType:e.params.sourceType},x(n.name),r.type,s.size,new Date(s.lastModified),r.height,e))}}return t}}class U{hasLocalFilesDirectoryHandle(){var e;return(null===(e=this.localFilesIndex)||void 0===e?void 0:e.fileHandle)!==void 0}getLocalFilesDirectoryHandle(){var e;return null===(e=this.localFilesIndex)||void 0===e?void 0:e.fileHandle}async setLocalFilesDirectoryHandle(e,t){this.localFilesIndex={fileHandle:e,index:void 0}}async clearLocalFilesIndex(){this.localFilesIndex=void 0}getLocalFilesIndexSize(){var e,t;return null===(t=this.localFilesIndex)||void 0===t?void 0:null===(e=t.index)||void 0===e?void 0:e.size}async indexDirectory(e){var t;if((null===(t=this.localFilesIndex)||void 0===t?void 0:t.fileHandle)!==void 0){let t=await new _().indexFolder(new B({fileHandle:this.localFilesIndex.fileHandle,identifier:void 0,sourceType:d.LocalFile},this.localFilesIndex.fileHandle.name,void 0),e);return this.localFilesIndex.index=t,{handle:this.localFilesIndex.fileHandle,size:this.localFilesIndex.index.size}}}search(e,t,s,n){var r,a,i,o;if((null===(a=this.localFilesIndex)||void 0===a?void 0:null===(r=a.index)||void 0===r?void 0:r.oramaDb)===void 0)return;let l=e.filterSettings.includesTags.length>0,d=e.filterSettings.excludesTags.length>0;return(0,y.yC)(null===(o=this.localFilesIndex)||void 0===o?void 0:null===(i=o.index)||void 0===i?void 0:i.oramaDb,{term:t?D(t):void 0,properties:["searchq"],limit:null!=n?n:1e6,exact:void 0!==t&&!e.searchTypeSettings.fuzzySearch,where:{and:[{cardType:{in:s}},...l?[{tags:{containsAny:e.filterSettings.includesTags}}]:[],...d?[{not:{tags:{containsAny:e.filterSettings.excludesTags}}}]:[],{dpi:{between:[e.filterSettings.minimumDPI,e.filterSettings.maximumDPI]}},{size:{lte:1e6*e.filterSettings.maximumSize}}]}}).hits}retrieveCardIdentifiers(e,t,s,n){let r=this.search(e,t,s,n);return void 0!==r?r.map(e=>e.id):void 0}editorSearch(e,t){let s={};for(let n of t)if(n.query){Object.prototype.hasOwnProperty.call(s,n.query)||(s[n.query]={CARD:[],CARDBACK:[],TOKEN:[]});let t=this.retrieveCardIdentifiers(e,n.query,[n.cardType]);void 0!==t&&(s[n.query][n.cardType]=t)}return s}retrieveCardbackIdentifiers(e){return this.retrieveCardIdentifiers(e.searchTypeSettings.filterCardbacks?e:L([],!1),void 0,[l.Cardback])}getCardDocuments(e){var t,s;let n=null===(s=this.localFilesIndex)||void 0===s?void 0:null===(t=s.index)||void 0===t?void 0:t.oramaDb;return n?Object.fromEntries(e.reduce((e,t)=>{let s=(0,y.pW)(n,t);return void 0!==s&&e.push([s.id,this.translateOramaCardDocumentToCardDocument(s)]),e},[])):{}}getByID(e){var t,s;if(null===(s=this.localFilesIndex)||void 0===s?void 0:null===(t=s.index)||void 0===t?void 0:t.oramaDb)return(0,y.pW)(this.localFilesIndex.index.oramaDb,e)}translateOramaCardDocumentToCardDocument(e){let t=e.lastModified.toLocaleDateString(void 0,{weekday:void 0,year:"numeric",month:"long",day:"numeric"});return{identifier:e.id,cardType:e.cardType,name:e.name,priority:0,source:e.source,sourceName:e.source,sourceId:0,sourceVerbose:e.source,sourceType:e.params.sourceType,sourceExternalLink:void 0,dpi:e.dpi,searchq:e.searchq,extension:e.extension,dateCreated:t,dateModified:t,size:e.size,smallThumbnailUrl:void 0,mediumThumbnailUrl:void 0,language:"EN",tags:e.tags}}getSampleCards(){return this.hasLocalFilesDirectoryHandle()?Object.fromEntries([l.Card,l.Cardback,l.Token].map(e=>{var t;return[e,this.hasLocalFilesDirectoryHandle()?null===(t=this.search(L([],!1),void 0,[e],e===l.Card?4:1))||void 0===t?void 0:t.map(e=>this.translateOramaCardDocumentToCardDocument(e.document)):[]]})):void 0}constructor(){this.localFilesIndex=void 0}}let K=new U;(0,j.Jj)(K)}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}},n=!0;try{i[e](s,s.exports,l),n=!1}finally{n&&delete o[e]}return s.exports}l.m=i,l.x=function(){var e=l.O(void 0,[774,634],function(){return l(7209)});return l.O(e)},e=[],l.O=function(t,s,n,r){if(s){r=r||0;for(var a=e.length;a>0&&e[a-1][2]>r;a--)e[a]=e[a-1];e[a]=[s,n,r];return}for(var i=1/0,a=0;a<e.length;a++){for(var s=e[a][0],n=e[a][1],r=e[a][2],o=!0,d=0;d<s.length;d++)i>=r&&Object.keys(l.O).every(function(e){return l.O[e](s[d])})?s.splice(d--,1):(o=!1,r<i&&(i=r));if(o){e.splice(a--,1);var c=n();void 0!==c&&(t=c)}}return t},l.d=function(e,t){for(var s in t)l.o(t,s)&&!l.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},l.f={},l.e=function(e){return Promise.all(Object.keys(l.f).reduce(function(t,s){return l.f[s](e,t),t},[]))},l.u=function(e){return 774===e?"static/chunks/framework-dac07bd1e2ef6470.js":"static/chunks/"+e+".005231b69861dcec.js"},l.miniCssF=function(e){},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.tt=function(){return void 0===t&&(t={createScriptURL:function(e){return e}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(t=trustedTypes.createPolicy("nextjs#bundler",t))),t},l.tu=function(e){return l.tt().createScriptURL(e)},l.p="/_next/",s={209:1},l.f.i=function(e,t){s[e]||importScripts(l.tu(l.p+l.u(e)))},r=(n=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(n),n.push=function(e){var t=e[0],n=e[1],a=e[2];for(var i in n)l.o(n,i)&&(l.m[i]=n[i]);for(a&&a(l);t.length;)s[t.pop()]=1;r(e)},a=l.x,l.x=function(){return Promise.all([l.e(774),l.e(634)]).then(a)},_N_E=l.x()}();