"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{2283:function(e,t,r){r.d(t,{D_:function(){return j},Gu:function(){return y},Hz:function(){return v},QA:function(){return f},QZ:function(){return g},Xz:function(){return S},gk:function(){return l},l:function(){return p},uX:function(){return x},zr:function(){return b}});var n=r(5673),a=r(848),s=r(975),c=r(4641);let i=async(e,t,r)=>{let a=t.getState().backend.url,s=(0,n.ni)({baseUrl:a});return s(e,t,r)},l=(0,a.LC)({reducerPath:"apiSlice",baseQuery:i,endpoints:e=>({getCards:e.query({query:e=>({url:"2/cards/",method:"POST",body:{card_identifiers:JSON.stringify(e)}}),transformResponse:(e,t,r)=>e.results}),getCardbacks:e.query({query:()=>({url:"2/cardbacks/",method:"GET"}),transformResponse:(e,t,r)=>e.cardbacks}),search:e.query({query:e=>({url:"2/searchResults/",method:"POST",body:JSON.stringify({searchSettings:e.searchSettings,queries:Array.from(e.queries)})}),transformResponse:(e,t,r)=>e.results}),getSources:e.query({query:()=>({url:"2/sources/",method:"GET"}),transformResponse:(e,t,r)=>e.results}),getImportSites:e.query({query:()=>({url:"2/importSites/",method:"GET"}),transformResponse:(e,t,r)=>e.import_sites}),queryImportSite:e.query({query:e=>({url:"2/importSiteDecklist/",method:"POST",body:JSON.stringify({url:e})}),transformResponse:(e,t,r)=>e.cards}),getDFCPairs:e.query({query:()=>({url:"2/DFCPairs/",method:"GET"}),transformResponse:(e,t,r)=>Object.fromEntries(Object.keys(e.dfc_pairs).map(t=>[(0,c.dG)(t),(0,c.dG)(e.dfc_pairs[t])]))}),getPlaceholderText:e.query({query:()=>({url:"2/placeholderText/",method:"GET"}),transformResponse:(e,t,r)=>e.cards}),getContributions:e.query({query:()=>({url:"2/contributions/",method:"GET"})}),getBackendInfo:e.query({query:()=>({url:"2/info/",method:"GET"}),transformResponse:(e,t,r)=>e.info})})}),{useGetCardsQuery:u,useGetCardbacksQuery:o,useSearchQuery:d,useGetSourcesQuery:m,useGetImportSitesQuery:f,useQueryImportSiteQuery:h,useGetDFCPairsQuery:p,useGetPlaceholderTextQuery:y,useGetContributionsQuery:g,useGetBackendInfoQuery:b}=l;async function S(e,t){let r=await fetch((0,c.X8)(e,"/2/cards/"),{method:"POST",body:JSON.stringify({card_identifiers:Array.from(t)}),credentials:"same-origin",headers:(0,s.ho)()}),n=await r.json();return n.results}async function x(e){let t=await fetch((0,c.X8)(e,"/2/cardbacks/"),{method:"GET",credentials:"same-origin",headers:(0,s.ho)()}),r=await t.json();return r.cardbacks}async function j(e,t,r){let n=await fetch((0,c.X8)(e,"/2/searchResults/"),{method:"POST",body:JSON.stringify({searchSettings:t,queries:Array.from(r)}),credentials:"same-origin",headers:(0,s.ho)()}),a=await n.json();return a.results}async function v(e){let t=await fetch((0,c.X8)(e,"/2/sources/"),{method:"GET",credentials:"same-origin",headers:(0,s.ho)()}),r=await t.json();return r.results}},1677:function(e,t,r){r.d(t,{B4:function(){return f},B9:function(){return b},Ds:function(){return k},Fi:function(){return j},K9:function(){return v},M0:function(){return m},Ni:function(){return l},Ox:function(){return y},P$:function(){return u},WU:function(){return c},Wn:function(){return q},Zb:function(){return a},bD:function(){return g},dt:function(){return s},eJ:function(){return d},fj:function(){return x},gx:function(){return p},i6:function(){return o},qY:function(){return i},sL:function(){return h},tl:function(){return S},vV:function(){return n}});let n="MPC Autofill",a="CARD",s="CARDBACK",c="TOKEN",i=":",l={"":a,b:s,t:c},u=Object.fromEntries(Object.keys(l).map(e=>[l[e],e.length>0?e+i:e])),o="front",d="back",m="|",f=38,h=0,p=1500,y=50,g=30,b=1,S="csrftoken",x="searchSettings",j="googleAnalyticsConsent",v="backendURL",k=[18,36,55,72,90,108,126,144,162,180,198,216,234,396,504,612],q=k[k.length-1]},975:function(e,t,r){r.d(t,{Nj:function(){return y},ho:function(){return u},hC:function(){return h},yI:function(){return o},_m:function(){return m},HO:function(){return p},fj:function(){return d},Y9:function(){return f}});var n=r(1955),a=r(1581),s=r.n(a);let c={title:"Search settings schema",type:"object",properties:{searchTypeSettings:{type:"object",properties:{fuzzySearch:{description:"Whether fuzzy search is enabled",type:"boolean"}},required:["fuzzySearch"]},sourceSettings:{type:"object",properties:{sources:{description:"The list of sources in the order they should be searched",type:["array","null"],items:{type:"array",items:[{type:"number",description:"The source's primary key",minimum:0},{type:"boolean",description:"Whether the source is enabled for searching"}],minItems:2,maxItems:2}}},required:["sources"]},filterSettings:{type:"object",properties:{minimumDPI:{type:"number",description:"The minimum DPI that cards must meet to be included in search results",minimum:0},maximumDPI:{type:"number",description:"The maximum DPI that cards can meet to be included in search results",minimum:0},maximumSize:{type:"number",description:"The maximum filesize that cards can have to be included in search results",minimum:0}},required:["minimumDPI","maximumDPI","maximumSize"]}},required:["searchTypeSettings","sourceSettings","filterSettings"],additionalProperties:!1};var i=r(1677);let l=new(s());function u(){let e=n.Z.get(i.tl);if(null!=e)return{"X-CSRFToken":e}}function o(e){var t,r;let a=JSON.parse(null!==(t=n.Z.get(i.fj))&&void 0!==t?t:"{}"),s=l.compile(c),u=s(a);if(!u)return{searchTypeSettings:{fuzzySearch:!1},sourceSettings:{sources:Object.values(e).map(e=>[e.pk,!0])},filterSettings:{minimumDPI:i.sL,maximumDPI:i.gx,maximumSize:i.bD}};{let t=new Set(Object.values(e).map(e=>e.pk)),n=null!==(r=a.sourceSettings.sources)&&void 0!==r?r:[],s=new Set(n.map(e=>e[0]));return a.sourceSettings.sources=n.filter(e=>t.has(e[0])).concat(Array.from(t).filter(e=>!s.has(e)).map(e=>[e,!0])),a}}function d(e){n.Z.set(i.fj,JSON.stringify(e),{expires:365,sameSite:"strict"})}function m(){let e=n.Z.get(i.Fi);return void 0!=e?!0===JSON.parse(e):void 0}function f(e){n.Z.set(i.Fi,JSON.stringify(e),{expires:365,sameSite:"strict"})}function h(){return n.Z.get(i.K9)}function p(e){n.Z.set(i.K9,e,{expires:365,sameSite:"strict"})}function y(){n.Z.remove(i.K9)}},4641:function(e,t,r){r.d(t,{DE:function(){return u},GL:function(){return s},X8:function(){return o},dG:function(){return c},l_:function(){return l}});var n=r(1677);function a(e){return e.replaceAll(/ +(?= )/g,"").trim()}function s(e){return a(e.replaceAll(/[([].*?[)\]]/g,""))}function c(e){return a(e.toLowerCase().trim().replace(/[~`!@#$%^&*(){}\[\];:"'<,.>?/\\|_+=]/g,""))}function i(e){for(let[t,r]of Object.entries(n.Ni))if(""!==t&&e.trimStart().toLowerCase().startsWith("".concat(t).concat(n.qY)))return{query:c(e.trimStart().slice(t.length+1)),card_type:r};return{query:c(e),card_type:n.Ni[""]}}function l(e,t){let r=[];return e.split(/\r?\n|\r|\n/g).forEach(e=>{if(null!=e&&e.trim().length>0){let[a,s,c]=function(e,t){var r;let a=e.replace(/\s+/g," ").trim(),s=/^([0-9]*)?x?\s?(.*)$/.exec(a);if(null==s)return[0,null,null];let c=parseInt(null!==(r=s[1])&&void 0!==r?r:"1"),l=null,u=null,[o,d]=s[2].split(n.M0);return null!=o&&o.length>0&&(l=i(o)),null!=d&&d.length>0?u=i(d):null!=l&&null!=l.query&&l.query in t&&(u={query:t[l.query],card_type:n.Zb}),[c,l,u]}(e,t);a>0&&(null!=s||null!=c)&&r.push([a,s,c])}}),r}function u(e){var t;let r=[...e.matchAll(/^(https?:\/\/)?(.*?)(?:\/.*)?$/gm)][0];return(null!==(t=r[1])&&void 0!==t?t:"http://")+r[2]}function o(e,t){return e+t}},8208:function(e,t,r){r.d(t,{Di:function(){return l},GN:function(){return i},K:function(){return s},N0:function(){return a},wk:function(){return c}});var n=r(1677);function a(e,t){return(e%t+t)%t}function s(e,t){let r=10**t,n=e/1e6;return n=Math.round(n*r)/r,"".concat(n," MB")}function c(e){for(let t of n.Ds)if(t>=e)return t;return n.Ds[n.Ds.length-1]}function i(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=document.createElement("a");r.href=e,r.setAttribute("download","deez.png"),t&&(r.target="_blank"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function l(e,t){let r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},3152:function(e,t,r){r.d(t,{xu:function(){return s}});var n=r(1876),a=r(2283);let s=(0,n.hg)("cardbacks/fetchCardbacks",async(e,t)=>{let r=t.getState();return(0,a.uX)(r.backend.url)}),c=(0,n.oM)({name:"cardbacks",initialState:{cardbacks:[],status:"idle",error:null},reducers:{addCardbackDocuments:(e,t)=>{e.cardbacks=[...t.payload]}},extraReducers(e){e.addCase(s.pending,(e,t)=>{e.status="loading"}).addCase(s.fulfilled,(e,t)=>{e.status="succeeded",e.cardbacks=[...t.payload]}).addCase(s.rejected,(e,t)=>{e.status="failed",e.error=""})}});t.ZP=c.reducer},9539:function(e,t,r){r.d(t,{HE:function(){return v},ND:function(){return x},ZP:function(){return q},ao:function(){return k},Ed:function(){return p},eY:function(){return h},p4:function(){return y},LI:function(){return m},wH:function(){return d},zO:function(){return f},nZ:function(){return b},Y:function(){return g},mp:function(){return j},qP:function(){return S}});var n=r(1876),a=r(1677),s=r(8208),c=r(3518),i=r.n(c),l=r(4641);let u={members:[{front:{query:{query:"island",card_type:a.Zb},selectedImage:void 0},back:null},{front:{query:{query:"grim monolith",card_type:a.Zb},selectedImage:void 0},back:null},{front:{query:{query:"past in flames",card_type:a.Zb},selectedImage:void 0},back:null},{front:{query:{query:"necropotence",card_type:a.Zb},selectedImage:void 0},back:null}],cardback:null},o=(0,n.oM)({name:"project",initialState:u,reducers:{setSelectedImage:(e,t)=>{null==e.members[t.payload.slot][t.payload.face]?e.members[t.payload.slot][t.payload.face]={query:{query:null,card_type:a.Zb},selectedImage:t.payload.selectedImage}:e.members[t.payload.slot][t.payload.face].selectedImage=t.payload.selectedImage},bulkSetSelectedImage:(e,t)=>{let r=new Set;for(let[n,a]of e.members.entries())null!=a[t.payload.face]&&a[t.payload.face].selectedImage===t.payload.currentImage&&r.add(n);for(let n of r)null==e.members[n][t.payload.face]?e.members[n][t.payload.face]={query:{query:null,card_type:a.Zb},selectedImage:t.payload.selectedImage}:e.members[n][t.payload.face].selectedImage=t.payload.selectedImage},setSelectedCardback:(e,t)=>{e.cardback=t.payload.selectedImage},addImages:(e,t)=>{let r=[];for(let[n,s,c]of t.payload.lines){let t=Math.min(n,a.Wn-(e.members.length+r.length));if(r=[...r,...Array(t).fill({front:{query:s,selectedImage:null},back:{query:c,selectedImage:null}})],e.members.length+r.length>=a.Wn)break}e.members=[...e.members,...r]},deleteImage:(e,t)=>{e.members.splice(t.payload.slot,1)}}}),d=e=>e.project.members,m=e=>new Set(e.project.members.flatMap(e=>{var t,r,n,s;return((null===(t=e.front)||void 0===t?void 0:null===(r=t.query)||void 0===r?void 0:r.query)!=null?[a.P$[e.front.query.card_type]+e.front.query.query]:[]).concat((null===(n=e.back)||void 0===n?void 0:null===(s=n.query)||void 0===s?void 0:s.query)!=null?[a.P$[e.back.query.card_type]+e.back.query.query]:[])})),f=e=>e.project.members.length,h=e=>(function(e,t,r,n){let c=function(e,t){let r={front:{},back:{}};for(let[n,s]of e.entries())for(let e of[a.i6,a.eJ]){let a=s[e];if(null!=a){let s=a.selectedImage;null!=s&&s!==t&&(null==r[e][s]?r[e][s]=new Set([n]):r[e][s].add(n))}}return r}(e,r),l=document.implementation.createDocument("","",null),u=l.createElement("order"),o=l.createElement("details"),d=l.createElement("quantity");d.appendChild(l.createTextNode(n.toString())),o.appendChild(d);let m=l.createElement("bracket");for(let e of(m.appendChild(l.createTextNode((0,s.wk)(n).toString())),o.appendChild(m),u.append(o),[a.i6,a.eJ]))if(Object.keys(c[e]).length>0){let r=l.createElement("".concat(e,"s"));for(let[n,s]of Object.entries(c[e])){let e=function(e,t,r,n){let s=e[r];if(null!=s){let e=t.createElement("card"),c=t.createElement("id");c.appendChild(t.createTextNode(r)),e.appendChild(c);let i=t.createElement("slots");i.appendChild(t.createTextNode(Array.from(n).sort((e,t)=>e-t).toString())),e.appendChild(i);let l=t.createElement("name");l.appendChild(t.createTextNode("".concat(s.name,".").concat(s.extension))),e.append(l);let u=t.createElement("query");return u.appendChild(t.createTextNode(a.P$[s.card_type]+s.searchq)),e.append(u),e}return null}(t,l,n,s);null!=e&&r.appendChild(e)}u.appendChild(r)}let f=l.createElement("cardback");null!=r&&f.appendChild(l.createTextNode(r)),u.appendChild(f),l.appendChild(u);let h=new XMLSerializer,p=h.serializeToString(l);return i()(p,{collapseContent:!0})})(d(e),e.cardDocuments.cardDocuments,e.project.cardback,f(e)),p=e=>(function(e,t){let r=function(e,t){function r(e){return null!=e&&null!=e.selectedImage&&Object.prototype.hasOwnProperty.call(t,e.selectedImage)&&t[e.selectedImage].card_type===a.Zb?(0,l.GL)(t[e.selectedImage].name):null}return e.map(e=>[r(e[a.i6]),r(e[a.eJ])])}(e,t),n=r.map(e=>null!=e[0]?null!=e[1]?"".concat(e[0]," ").concat(a.M0," ").concat(e[1]):e[0]:"").filter(e=>null!=e&&e.length>0);return(function(e){let t=e.reduce((e,t)=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=0),e[t]++,e),{});return Object.keys(t).sort().map(e=>"".concat(t[e],"x ").concat(e))})(n).join("\n")})(d(e),e.cardDocuments.cardDocuments),y=e=>{let t=new Set;for(let r of e.project.members)for(let e of[a.i6,a.eJ])null!=r[e]&&null!=r[e].selectedImage&&t.add(r[e].selectedImage);let r=e.cardDocuments.cardDocuments;return Array.from(t).reduce((e,t)=>{var n;return e+(null!==(n=r[t])&&void 0!==n?n:{size:0}).size},0)},g=e=>{let t=new Set(e.cardbacks.cardbacks);for(let s of e.project.members)for(let c of[a.i6,a.eJ]){var r,n;let a=s[c];null!=a&&null!=a.query&&null!=a.query.query&&(null!==(n=(null!==(r=e.searchResults.searchResults[a.query.query])&&void 0!==r?r:{})[a.query.card_type])&&void 0!==n?n:[]).length>0&&e.searchResults.searchResults[a.query.query][a.query.card_type].forEach(e=>t.add(e))}return t},b=e=>{let t=[];for(let n of e.project.members)for(let s of[a.i6,a.eJ]){var r;let a=n[s];null!=a&&null!=a.query&&null!=a.query.query&&null==(null!==(r=e.searchResults.searchResults[a.query.query])&&void 0!==r?r:{})[a.query.card_type]&&t.push(a.query)}return t},{setSelectedImage:S,bulkSetSelectedImage:x,setSelectedCardback:j,addImages:v,deleteImage:k}=o.actions;var q=o.reducer},7088:function(e,t,r){r.d(t,{U9:function(){return l}});var n=r(1876),a=r(5713),s=r(3152),c=r(9539),i=r(2283);let l=(0,n.hg)("cardDocuments/fetchCardDocuments",async(e,t)=>{await t.dispatch((0,a.IA)()),await t.dispatch((0,s.xu)());let r=t.getState(),n=(0,c.Y)(r),l=new Set(Object.keys(r.cardDocuments.cardDocuments)),u=new Set(Array.from(n).filter(e=>!l.has(e)));if(u.size>0)return(0,i.Xz)(r.backend.url,u)}),u=(0,n.oM)({name:"cardDocuments",initialState:{cardDocuments:{},status:"idle",error:null},reducers:{addCardDocuments:(e,t)=>{e.cardDocuments={...e.cardDocuments,...t.payload}}},extraReducers(e){e.addCase(l.pending,(e,t)=>{e.status="loading"}).addCase(l.fulfilled,(e,t)=>{e.status="succeeded",e.cardDocuments={...e.cardDocuments,...t.payload}}).addCase(l.rejected,(e,t)=>{e.status="failed",e.error=""})}});t.ZP=u.reducer},5713:function(e,t,r){r.d(t,{IA:function(){return c},Ug:function(){return u}});var n=r(1876),a=r(9539),s=r(2283);let c=(0,n.hg)("searchResults/fetchCards",async(e,t)=>{let r=t.getState(),n=(0,a.nZ)(r);if(n.length>0)return(0,s.D_)(r.backend.url,r.searchSettings,n)}),i=(0,n.oM)({name:"searchResults",initialState:{searchResults:{},status:"idle",error:null},reducers:{addSearchResults:(e,t)=>{e.searchResults={...e.searchResults,...t.payload}},clearSearchResults:e=>{e.searchResults={}}},extraReducers(e){e.addCase(c.fulfilled,(e,t)=>{e.searchResults={...e.searchResults,...t.payload}}),e.addCase(c.rejected,(e,t)=>{alert("TODO")})}}),{addSearchResults:l,clearSearchResults:u}=i.actions;t.ZP=i.reducer},5582:function(e,t,r){r.d(t,{$:function(){return s}});var n=r(1876),a=r(2283);let s=(0,n.hg)("sourceDocuments/fetchSourceDocuments",async(e,t)=>{let r=t.getState();return(0,a.Hz)(r.backend.url)}),c=(0,n.oM)({name:"sourceDocuments",initialState:{sourceDocuments:void 0},reducers:{addSourceDocuments:(e,t)=>{e.sourceDocuments={...e.sourceDocuments,...t.payload}}},extraReducers(e){e.addCase(s.fulfilled,(e,t)=>{e.sourceDocuments={...e.sourceDocuments,...t.payload}}),e.addCase(s.rejected,(e,t)=>{alert("TODO")})}});t.ZP=c.reducer},5749:function(e,t,r){r.d(t,{Fg:function(){return i},Ph:function(){return l},_E:function(){return u}});var n=r(1876),a=r(1677);let s={searchTypeSettings:{fuzzySearch:!1},sourceSettings:{sources:null},filterSettings:{minimumDPI:a.sL,maximumDPI:a.gx,maximumSize:a.bD}},c=(0,n.oM)({name:"searchSettings",initialState:s,reducers:{setSearchTypeSettings:(e,t)=>{e.searchTypeSettings=t.payload},setSourceSettings:(e,t)=>{e.sourceSettings=t.payload},setFilterSettings:(e,t)=>{e.filterSettings=t.payload}}}),{setSearchTypeSettings:i,setSourceSettings:l,setFilterSettings:u}=c.actions;t.ZP=c.reducer},1110:function(e,t,r){var n=r(5893),a=r(5152),s=r.n(a),c=r(7294);let i=e=>(0,n.jsx)(c.Fragment,{children:e.children});t.Z=s()(()=>Promise.resolve(i),{ssr:!1})},9749:function(e,t,r){r.d(t,{Z:function(){return en}});var n,a,s=r(5893),c=r(1451),i=r(7054),l=r(4214),u=r(682),o=r(5675),d=r.n(o),m=r(1664),f=r.n(m),h=r(2664),p=r(1677),y=r(4874),g=r(7104),b=r(7294),S=r(2914),x=r(6920),j=r.n(x),v=r(1876);let k=(0,v.oM)({name:"backend",initialState:{url:null},reducers:{setURL:(e,t)=>{e.url=t.payload},clearURL:e=>{e.url=void 0}}}),{setURL:q,clearURL:C}=k.actions;var Z=k.reducer,D=r(975),I=r(2283),w=r(4641),E=r(5276),P=r.n(E);r(1351),(n=a||(a={})).IN_PROGRESS="record-circle-fill",n.SUCCEEDED="check-circle-fill",n.FAILED="x-circle-fill";let R=["Validating URL","Pinging server","Checking search engine health"];function T(e){let t=!1;try{new URL(e),t=!0}catch(e){}return t}async function N(e){let t=!1;try{let r=new(P());await r.ping(e,function(e,r){t=null==e})}catch(e){}return t}async function O(e){let t=!1;try{await fetch(new URL("2/searchEngineHealth/",e).toString(),{method:"GET",mode:"cors"}).then(e=>e.json()).then(e=>{var r;t=!0===(null!==(r=e.online)&&void 0!==r&&r)})}catch(e){}return t}function _(e){var t;let r=(0,h.I0)(),[n,c]=(0,b.useState)([]),[i,l]=I.gk.endpoints.getBackendInfo.useLazyQuery(),[u,o]=(0,b.useState)(""),d=async()=>{let e=(0,w.DE)(u.trim()),t=[];for(let r of(c(t),[T,N,O])){t.push(a.IN_PROGRESS),c(t);let n=await r(e);if(c(t=[...t.slice(0,-1),n?a.SUCCEEDED:a.FAILED]),!n)break}t.every(e=>e===a.SUCCEEDED)&&(r(q(e)),(0,D.HO)(e),r(I.gk.util.resetApiState()),i())};return(0,b.useEffect)(()=>{let e=(0,D.hC)();void 0!=e&&(o(e),r(q(e)),r(I.gk.util.resetApiState()),i())},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(y.Z,{className:j().className,show:e.show,onHide:e.handleClose,children:[(0,s.jsx)(y.Z.Header,{closeButton:!0,children:(0,s.jsx)(y.Z.Title,{children:"Configure Server"})}),(0,s.jsxs)(y.Z.Body,{children:["Enter the URL of the server you'd like to connect ",p.vV," ","to.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsxs)(S.Z,{children:[(0,s.jsx)(S.Z.Group,{className:"mb-3",controlId:"formURL",children:(0,s.jsx)(S.Z.Control,{placeholder:"https://",onChange:e=>o(e.target.value),value:u})}),n.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{}),(0,s.jsx)("ul",{children:R.map((e,r)=>(0,s.jsxs)("li",{children:[(0,s.jsx)("i",{className:"bi bi-".concat(null!==(t=n[r])&&void 0!==t?t:"circle")})," ",e,n[r]===a.IN_PROGRESS&&"..."]},e))}),(0,s.jsx)("hr",{})]}),(0,s.jsx)(g.Z,{variant:"primary",onClick:d,children:"Submit"})]})]})]})})}var z=r(1110);function A(){var e,t,r,n;let a=(0,h.I0)(),o=(0,I.zr)(),[m,y]=(0,b.useState)(!1),g=()=>{y(!1)},S=()=>y(!0),x=(0,h.v9)(e=>e.backend.url),j=()=>{a(C()),(0,D.Nj)(),a(I.gk.util.resetApiState())};return(0,s.jsxs)(z.Z,{children:[(0,s.jsx)(i.Z,{expand:"lg",fixed:"top",variant:"dark",bg:"primary",style:{minHeight:"50px"},children:(0,s.jsxs)(u.Z,{className:"justify-content-center fixed-top align-middle bg-primary",style:{maxWidth:"1200px"},children:[(0,s.jsxs)(i.Z.Brand,{href:"/",as:f(),children:[(0,s.jsx)(d(),{src:"/logolowres.png",alt:"logo",width:"40",height:"40"})," ",(0,s.jsx)("span",{className:"align-middle",children:(0,s.jsx)("b",{children:null!==(r=null===(e=o.data)||void 0===e?void 0:e.name)&&void 0!==r?r:p.vV})})]}),(0,s.jsx)(i.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,s.jsxs)(i.Z.Collapse,{id:"basic-navbar-nav",style:{fontWeight:"bold"},children:[(0,s.jsxs)(c.Z,{className:"me-auto",children:[(0,s.jsx)(c.Z.Link,{as:f(),href:"/editor",children:"Editor (Temp)"}),(0,s.jsx)(c.Z.Link,{as:f(),href:"/guide",children:"Guide"}),null!=x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z.Link,{as:f(),href:"/new",children:"What's New?"}),(0,s.jsx)(c.Z.Link,{as:f(),href:"/contributions",children:"Contributions"})]}),(0,s.jsx)(c.Z.Link,{href:"https://github.com/chilli-axe/mpc-autofill/releases",target:"_blank",children:"Download"})]}),(0,s.jsx)(c.Z,{className:"ms-auto",children:null==x?(0,s.jsx)(c.Z.Link,{onClick:S,children:"Configure Server"}):(0,s.jsxs)(l.Z,{title:null!==(n=null===(t=o.data)||void 0===t?void 0:t.name)&&void 0!==n?n:x,children:[(0,s.jsx)(l.Z.Item,{onClick:S,children:"Configure Server"}),(0,s.jsx)(l.Z.Item,{onClick:j,children:"Exit Server"})]})})]})]})}),(0,s.jsx)(_,{show:m,handleClose:g})]})}var L=r(3559),G=r(8356),F=r(5713),M=r(7088),U=r(3152),J=r(5582),W=r(5749),B=r(9539),V=r(5384);let H=(0,G.UY)({[I.gk.reducerPath]:I.gk.reducer,viewSettings:V.ZP,searchSettings:W.ZP,searchResults:F.ZP,cardDocuments:M.ZP,cardbacks:U.ZP,sourceDocuments:J.ZP,project:B.ZP,backend:Z}),X=(0,v.xC)({reducer:H,preloadedState:void 0,middleware:e=>e().concat(I.gk.middleware)});var Y=r(4304),$=r(5015),K=r(4051),Q=r(1555),ee=r(2021);function et(){let e=(0,D._m)(),[t,r]=(0,b.useState)(!1),n=()=>{(0,D.Y9)(!0),r(!0)},a=()=>{(0,D.Y9)(!1),r(!0)};return(0,s.jsxs)($.Z,{show:void 0==e&&!t,delay:3e3,animation:!0,children:[(0,s.jsx)($.Z.Header,{closeButton:!1,children:(0,s.jsx)("strong",{className:"me-auto",children:"Cookie Usage"})}),(0,s.jsxs)($.Z.Body,{children:[(0,s.jsxs)("p",{children:[p.vV," uses cookies for remembering your search settings, and for collecting analytics data to help improve the site. Your data is never shared with anyone. Would you like to opt out of analytics cookies?"]}),(0,s.jsxs)("p",{children:["View our privacy policy ",(0,s.jsx)(f(),{href:"/about",children:"here"}),"."]}),(0,s.jsx)("div",{className:"mt-2 pt-2 border-top",children:(0,s.jsxs)(K.Z,{children:[(0,s.jsx)(Q.Z,{className:"d-grid gap-0",children:(0,s.jsx)(g.Z,{variant:"outline-info",size:"sm",onClick:a,children:"Opt out"})}),(0,s.jsx)(Q.Z,{className:"d-grid gap-0",children:(0,s.jsx)(g.Z,{variant:"primary",size:"sm",onClick:n,children:"That's fine!"})})]})})]})]})}function er(){return(0,s.jsx)(z.Z,{children:(0,s.jsx)(ee.Z,{position:"top-start",children:(0,s.jsx)(et,{})})})}function en(e){let{children:t}=e,r=(0,D._m)();return(0,s.jsxs)(s.Fragment,{children:[!0===r&&(0,s.jsx)(Y.Wi,{trackPageViews:!0}),(0,s.jsx)(L.Z,{children:(0,s.jsxs)(h.zt,{store:X,children:[(0,s.jsx)(er,{}),(0,s.jsx)(A,{}),(0,s.jsx)(u.Z,{className:"addmargin",style:{maxWidth:"1200px"},children:t})]})})]})}},5384:function(e,t,r){r.d(t,{$3:function(){return i}});var n=r(1876);let a=(0,n.oM)({name:"cardGrid",initialState:{frontsVisible:!0},reducers:{switchToFront:e=>{e.frontsVisible=!0},switchToBack:e=>{e.frontsVisible=!1},toggleFaces:e=>{e.frontsVisible=!e.frontsVisible}}}),{switchToFront:s,switchToBack:c,toggleFaces:i}=a.actions;t.ZP=a.reducer}}]);